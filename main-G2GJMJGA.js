import{$ as P2,$a as v6,A as G2,Aa as Y2,Ab as V6,B as n6,Ba as X,Bb as P6,C as y,Ca as Y,Cb as D6,D as $2,Da as f,Db as J,E as $3,Ea as m,Eb as y3,F as i6,Fa as g,Fb as F6,G as Q3,Ga as N1,Gb as J3,H as L,Ha as p6,Hb as H6,I as Z3,Ia as T,Ib as G1,J as D1,Ja as P,Jb as l1,K as E2,Ka as h6,Kb as e3,L as _1,La as z6,Lb as e4,M,Ma as q1,N as I2,Na as C6,O as u1,Oa as J1,P as z1,Pa as d,Q as r,Qa as A,R as l6,Ra as v3,S as R,Sa as L6,T as V2,Ta as U1,U as Z,Ua as _,V as K3,Va as s1,W as Q2,Wa as B1,X as F1,Xa as M6,Y as r2,Ya as H1,Z as c1,Za as T1,_ as t1,_a as g6,a as C,aa as Z2,ab as f2,b as D,ba as D2,bb as I1,c as J0,ca as Y1,cb as d1,d as w2,da as K2,db as F4,e as l2,ea as a6,eb as C1,f as P1,fa as P4,fb as S6,g as W2,ga as O1,gb as Y3,h as S,ha as a1,hb as m2,i as b,ia as r6,ib as U,j as w,ja as X2,jb as j,k as $,ka as h,kb as y6,l as e6,la as F,lb as J2,m as c6,ma as X3,mb as e2,n as B3,na as o6,nb as b6,o as k,oa as o2,ob as x6,p as j3,pa as f6,pb as j1,q as k2,qa as g1,qb as H4,r as a2,ra as v1,rb as N6,s as t6,sa as V,sb as w6,t as W3,ta as m6,tb as k6,u as G3,ua as u6,ub as A6,v as E1,va as d6,vb as E6,w as m1,wa as D4,wb as S3,x as B,xa as N,xb as I6,y as A2,ya as S1,yb as V1,z as s6,za as q,zb as W1}from"./chunk-PJBGUVA6.js";var u2=(()=>{class s{http=r(j1);createCategory(n){return this.http.post(`${J.apiUrl}/categories`,n)}deleteCategory(n){let e=new e2().set("publicId",n);return this.http.delete(`${J.apiUrl}/categories`,{params:e})}findAllCategories(){return this.http.get(`${J.apiUrl}/categories`)}createProduct(n){let e=new FormData;for(let i=0;i<n.pictures.length;++i)e.append("picture-"+i,n.pictures[i].file);let c=structuredClone(n);return c.pictures=[],e.append("dto",JSON.stringify(c)),this.http.post(`${J.apiUrl}/products`,e)}deleteProduct(n){let e=new e2().set("publicId",n);return this.http.delete(`${J.apiUrl}/products`,{params:e})}findAllProducts(n){let e=y3(n);return this.http.get(`${J.apiUrl}/products`,{params:e})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var M1=(()=>{class s{toasts=[];show(n,e,c=5e3){let i={body:n,type:e};this.toasts.push(i),b(i).pipe(s6(c)).subscribe(()=>this.remove(i))}remove(n){this.toasts=this.toasts.filter(e=>e!=n)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var T6=()=>{},s0={},a8={},r8=null,o8={mark:T6,measure:T6};try{typeof window<"u"&&(s0=window),typeof document<"u"&&(a8=document),typeof MutationObserver<"u"&&(r8=MutationObserver),typeof performance<"u"&&(o8=performance)}catch{}var{userAgent:R6=""}=s0.navigator||{},h2=s0,Q=a8,_6=r8,c4=o8,zn=!!h2.document,s2=!!Q.documentElement&&!!Q.head&&typeof Q.addEventListener=="function"&&typeof Q.createElement=="function",f8=~R6.indexOf("MSIE")||~R6.indexOf("Trident/"),K="classic",m8="duotone",w1="sharp",k1="sharp-duotone",x7=[K,m8,w1,k1],N7={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds"}},O6={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},w7=["kit"],k7=/fa(s|r|l|t|d|b|k|kd|ss|sr|sl|st|sds)?[\-\ ]/,A7=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,E7={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},I7={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds"}},V7={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds"}},P7={classic:["fas","far","fal","fat"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds"]},D7={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid"}},F7={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds"}},u8={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid"}},H7=["solid","regular","light","thin","duotone","brands"],d8=[1,2,3,4,5,6,7,8,9,10],T7=d8.concat([11,12,13,14,15,16,17,18,19,20]),b3={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},R7=[...Object.keys(P7),...H7,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",b3.GROUP,b3.SWAP_OPACITY,b3.PRIMARY,b3.SECONDARY].concat(d8.map(s=>"".concat(s,"x"))).concat(T7.map(s=>"w-".concat(s))),_7={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},O7={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},q7={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},q6={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},c2="___FONT_AWESOME___",U4=16,p8="fa",h8="svg-inline--fa",R2="data-fa-i2svg",B4="data-fa-pseudo-element",U7="data-fa-pseudo-element-pending",n0="data-prefix",i0="data-icon",U6="fontawesome-i2svg",B7="async",j7=["HTML","HEAD","STYLE","SCRIPT"],z8=(()=>{try{return!0}catch{return!1}})(),C8=[K,w1,k1];function E3(s){return new Proxy(s,{get(t,n){return n in t?t[n]:t[K]}})}var L8=C({},u8);L8[K]=C(C(C({},u8[K]),O6.kit),O6["kit-duotone"]);var H2=E3(L8),j4=C({},F7);j4[K]=C(C(C({},j4[K]),q6.kit),q6["kit-duotone"]);var k3=E3(j4),W4=C({},D7);W4[K]=C(C({},W4[K]),q7.kit);var T2=E3(W4),G4=C({},V7);G4[K]=C(C({},G4[K]),O7.kit);var W7=E3(G4),G7=k7,M8="fa-layers-text",$7=A7,Q7=C({},N7),Cn=E3(Q7),Z7=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],T4=b3,s3=new Set;Object.keys(k3[K]).map(s3.add.bind(s3));Object.keys(k3[w1]).map(s3.add.bind(s3));Object.keys(k3[k1]).map(s3.add.bind(s3));var K7=[...w7,...R7],N3=h2.FontAwesomeConfig||{};function X7(s){var t=Q.querySelector("script["+s+"]");if(t)return t.getAttribute(s)}function Y7(s){return s===""?!0:s==="false"?!1:s==="true"?!0:s}Q&&typeof Q.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[n,e]=t,c=Y7(X7(n));c!=null&&(N3[e]=c)});var g8={styleDefault:"solid",familyDefault:"classic",cssPrefix:p8,replacementClass:h8,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};N3.familyPrefix&&(N3.cssPrefix=N3.familyPrefix);var n3=C(C({},g8),N3);n3.autoReplaceSvg||(n3.observeMutations=!1);var x={};Object.keys(g8).forEach(s=>{Object.defineProperty(x,s,{enumerable:!0,set:function(t){n3[s]=t,w3.forEach(n=>n(x))},get:function(){return n3[s]}})});Object.defineProperty(x,"familyPrefix",{enumerable:!0,set:function(s){n3.cssPrefix=s,w3.forEach(t=>t(x))},get:function(){return n3.cssPrefix}});h2.FontAwesomeConfig=x;var w3=[];function J7(s){return w3.push(s),()=>{w3.splice(w3.indexOf(s),1)}}var d2=U4,$1={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function ee(s){if(!s||!s2)return;let t=Q.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=s;let n=Q.head.childNodes,e=null;for(let c=n.length-1;c>-1;c--){let i=n[c],l=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(l)>-1&&(e=i)}return Q.head.insertBefore(t,e),s}var ce="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function A3(){let s=12,t="";for(;s-- >0;)t+=ce[Math.random()*62|0];return t}function i3(s){let t=[];for(let n=(s||[]).length>>>0;n--;)t[n]=s[n];return t}function l0(s){return s.classList?i3(s.classList):(s.getAttribute("class")||"").split(" ").filter(t=>t)}function v8(s){return"".concat(s).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function te(s){return Object.keys(s||{}).reduce((t,n)=>t+"".concat(n,'="').concat(v8(s[n]),'" '),"").trim()}function l4(s){return Object.keys(s||{}).reduce((t,n)=>t+"".concat(n,": ").concat(s[n].trim(),";"),"")}function a0(s){return s.size!==$1.size||s.x!==$1.x||s.y!==$1.y||s.rotate!==$1.rotate||s.flipX||s.flipY}function se(s){let{transform:t,containerWidth:n,iconWidth:e}=s,c={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(t.x*32,", ").concat(t.y*32,") "),l="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)"),o={transform:"".concat(i," ").concat(l," ").concat(a)},u={transform:"translate(".concat(e/2*-1," -256)")};return{outer:c,inner:o,path:u}}function ne(s){let{transform:t,width:n=U4,height:e=U4,startCentered:c=!1}=s,i="";return c&&f8?i+="translate(".concat(t.x/d2-n/2,"em, ").concat(t.y/d2-e/2,"em) "):c?i+="translate(calc(-50% + ".concat(t.x/d2,"em), calc(-50% + ").concat(t.y/d2,"em)) "):i+="translate(".concat(t.x/d2,"em, ").concat(t.y/d2,"em) "),i+="scale(".concat(t.size/d2*(t.flipX?-1:1),", ").concat(t.size/d2*(t.flipY?-1:1),") "),i+="rotate(".concat(t.rotate,"deg) "),i}var ie=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function S8(){let s=p8,t=h8,n=x.cssPrefix,e=x.replacementClass,c=ie;if(n!==s||e!==t){let i=new RegExp("\\.".concat(s,"\\-"),"g"),l=new RegExp("\\--".concat(s,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");c=c.replace(i,".".concat(n,"-")).replace(l,"--".concat(n,"-")).replace(a,".".concat(e))}return c}var B6=!1;function R4(){x.autoAddCss&&!B6&&(ee(S8()),B6=!0)}var le={mixout(){return{dom:{css:S8,insertCss:R4}}},hooks(){return{beforeDOMElementCreation(){R4()},beforeI2svg(){R4()}}}},t2=h2||{};t2[c2]||(t2[c2]={});t2[c2].styles||(t2[c2].styles={});t2[c2].hooks||(t2[c2].hooks={});t2[c2].shims||(t2[c2].shims=[]);var Q1=t2[c2],y8=[],b8=function(){Q.removeEventListener("DOMContentLoaded",b8),n4=1,y8.map(s=>s())},n4=!1;s2&&(n4=(Q.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Q.readyState),n4||Q.addEventListener("DOMContentLoaded",b8));function ae(s){s2&&(n4?setTimeout(s,0):y8.push(s))}function I3(s){let{tag:t,attributes:n={},children:e=[]}=s;return typeof s=="string"?v8(s):"<".concat(t," ").concat(te(n),">").concat(e.map(I3).join(""),"</").concat(t,">")}function j6(s,t,n){if(s&&s[t]&&s[t][n])return{prefix:t,iconName:n,icon:s[t][n]}}var re=function(t,n){return function(e,c,i,l){return t.call(n,e,c,i,l)}},_4=function(t,n,e,c){var i=Object.keys(t),l=i.length,a=c!==void 0?re(n,c):n,o,u,p;for(e===void 0?(o=1,p=t[i[0]]):(o=0,p=e);o<l;o++)u=i[o],p=a(p,t[u],u,t);return p};function oe(s){let t=[],n=0,e=s.length;for(;n<e;){let c=s.charCodeAt(n++);if(c>=55296&&c<=56319&&n<e){let i=s.charCodeAt(n++);(i&64512)==56320?t.push(((c&1023)<<10)+(i&1023)+65536):(t.push(c),n--)}else t.push(c)}return t}function $4(s){let t=oe(s);return t.length===1?t[0].toString(16):null}function fe(s,t){let n=s.length,e=s.charCodeAt(t),c;return e>=55296&&e<=56319&&n>t+1&&(c=s.charCodeAt(t+1),c>=56320&&c<=57343)?(e-55296)*1024+c-56320+65536:e}function W6(s){return Object.keys(s).reduce((t,n)=>{let e=s[n];return!!e.icon?t[e.iconName]=e.icon:t[n]=e,t},{})}function Q4(s,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{skipHooks:e=!1}=n,c=W6(t);typeof Q1.hooks.addPack=="function"&&!e?Q1.hooks.addPack(s,W6(t)):Q1.styles[s]=C(C({},Q1.styles[s]||{}),c),s==="fas"&&Q4("fa",t)}var{styles:F2,shims:me}=Q1,ue={[K]:Object.values(T2[K]),[w1]:Object.values(T2[w1]),[k1]:Object.values(T2[k1])},r0=null,x8={},N8={},w8={},k8={},A8={},de={[K]:Object.keys(H2[K]),[w1]:Object.keys(H2[w1]),[k1]:Object.keys(H2[k1])};function pe(s){return~K7.indexOf(s)}function he(s,t){let n=t.split("-"),e=n[0],c=n.slice(1).join("-");return e===s&&c!==""&&!pe(c)?c:null}var E8=()=>{let s=e=>_4(F2,(c,i,l)=>(c[l]=_4(i,e,{}),c),{});x8=s((e,c,i)=>(c[3]&&(e[c[3]]=i),c[2]&&c[2].filter(a=>typeof a=="number").forEach(a=>{e[a.toString(16)]=i}),e)),N8=s((e,c,i)=>(e[i]=i,c[2]&&c[2].filter(a=>typeof a=="string").forEach(a=>{e[a]=i}),e)),A8=s((e,c,i)=>{let l=c[2];return e[i]=i,l.forEach(a=>{e[a]=i}),e});let t="far"in F2||x.autoFetchSvg,n=_4(me,(e,c)=>{let i=c[0],l=c[1],a=c[2];return l==="far"&&!t&&(l="fas"),typeof i=="string"&&(e.names[i]={prefix:l,iconName:a}),typeof i=="number"&&(e.unicodes[i.toString(16)]={prefix:l,iconName:a}),e},{names:{},unicodes:{}});w8=n.names,k8=n.unicodes,r0=a4(x.styleDefault,{family:x.familyDefault})};J7(s=>{r0=a4(s.styleDefault,{family:x.familyDefault})});E8();function o0(s,t){return(x8[s]||{})[t]}function ze(s,t){return(N8[s]||{})[t]}function p2(s,t){return(A8[s]||{})[t]}function I8(s){return w8[s]||{prefix:null,iconName:null}}function Ce(s){let t=k8[s],n=o0("fas",s);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function z2(){return r0}var f0=()=>({prefix:null,iconName:null,rest:[]});function a4(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{family:n=K}=t,e=H2[n][s],c=k3[n][s]||k3[n][e],i=s in Q1.styles?s:null;return c||i||null}var Le={[K]:Object.keys(T2[K]),[w1]:Object.keys(T2[w1]),[k1]:Object.keys(T2[k1])};function r4(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{skipLookups:n=!1}=t,e={[K]:"".concat(x.cssPrefix,"-").concat(K),[w1]:"".concat(x.cssPrefix,"-").concat(w1),[k1]:"".concat(x.cssPrefix,"-").concat(k1)},c=null,i=K,l=x7.filter(o=>o!==m8);l.forEach(o=>{(s.includes(e[o])||s.some(u=>Le[o].includes(u)))&&(i=o)});let a=s.reduce((o,u)=>{let p=he(x.cssPrefix,u);if(F2[u]?(u=ue[i].includes(u)?W7[i][u]:u,c=u,o.prefix=u):de[i].indexOf(u)>-1?(c=u,o.prefix=a4(u,{family:i})):p?o.iconName=p:u!==x.replacementClass&&!l.some(z=>u===e[z])&&o.rest.push(u),!n&&o.prefix&&o.iconName){let z=c==="fa"?I8(o.iconName):{},v=p2(o.prefix,o.iconName);z.prefix&&(c=null),o.iconName=z.iconName||v||o.iconName,o.prefix=z.prefix||o.prefix,o.prefix==="far"&&!F2.far&&F2.fas&&!x.autoFetchSvg&&(o.prefix="fas")}return o},f0());return(s.includes("fa-brands")||s.includes("fab"))&&(a.prefix="fab"),(s.includes("fa-duotone")||s.includes("fad"))&&(a.prefix="fad"),!a.prefix&&i===w1&&(F2.fass||x.autoFetchSvg)&&(a.prefix="fass",a.iconName=p2(a.prefix,a.iconName)||a.iconName),!a.prefix&&i===k1&&(F2.fasds||x.autoFetchSvg)&&(a.prefix="fasds",a.iconName=p2(a.prefix,a.iconName)||a.iconName),(a.prefix==="fa"||c==="fa")&&(a.prefix=z2()||"fas"),a}var Z4=class{constructor(){this.definitions={}}add(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];let c=n.reduce(this._pullDefinitions,{});Object.keys(c).forEach(i=>{this.definitions[i]=C(C({},this.definitions[i]||{}),c[i]),Q4(i,c[i]);let l=T2[K][i];l&&Q4(l,c[i]),E8()})}reset(){this.definitions={}}_pullDefinitions(t,n){let e=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(e).map(c=>{let{prefix:i,iconName:l,icon:a}=e[c],o=a[2];t[i]||(t[i]={}),o.length>0&&o.forEach(u=>{typeof u=="string"&&(t[i][u]=a)}),t[i][l]=a}),t}},G6=[],c3={},t3={},Me=Object.keys(t3);function ge(s,t){let{mixoutsTo:n}=t;return G6=s,c3={},Object.keys(t3).forEach(e=>{Me.indexOf(e)===-1&&delete t3[e]}),G6.forEach(e=>{let c=e.mixout?e.mixout():{};if(Object.keys(c).forEach(i=>{typeof c[i]=="function"&&(n[i]=c[i]),typeof c[i]=="object"&&Object.keys(c[i]).forEach(l=>{n[i]||(n[i]={}),n[i][l]=c[i][l]})}),e.hooks){let i=e.hooks();Object.keys(i).forEach(l=>{c3[l]||(c3[l]=[]),c3[l].push(i[l])})}e.provides&&e.provides(t3)}),n}function K4(s,t){for(var n=arguments.length,e=new Array(n>2?n-2:0),c=2;c<n;c++)e[c-2]=arguments[c];return(c3[s]||[]).forEach(l=>{t=l.apply(null,[t,...e])}),t}function _2(s){for(var t=arguments.length,n=new Array(t>1?t-1:0),e=1;e<t;e++)n[e-1]=arguments[e];(c3[s]||[]).forEach(i=>{i.apply(null,n)})}function C2(){let s=arguments[0],t=Array.prototype.slice.call(arguments,1);return t3[s]?t3[s].apply(null,t):void 0}function X4(s){s.prefix==="fa"&&(s.prefix="fas");let{iconName:t}=s,n=s.prefix||z2();if(t)return t=p2(n,t)||t,j6(V8.definitions,n,t)||j6(Q1.styles,n,t)}var V8=new Z4,ve=()=>{x.autoReplaceSvg=!1,x.observeMutations=!1,_2("noAuto")},Se={i2svg:function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s2?(_2("beforeI2svg",s),C2("pseudoElements2svg",s),C2("i2svg",s)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{autoReplaceSvgRoot:t}=s;x.autoReplaceSvg===!1&&(x.autoReplaceSvg=!0),x.observeMutations=!0,ae(()=>{be({autoReplaceSvgRoot:t}),_2("watch",s)})}},ye={icon:s=>{if(s===null)return null;if(typeof s=="object"&&s.prefix&&s.iconName)return{prefix:s.prefix,iconName:p2(s.prefix,s.iconName)||s.iconName};if(Array.isArray(s)&&s.length===2){let t=s[1].indexOf("fa-")===0?s[1].slice(3):s[1],n=a4(s[0]);return{prefix:n,iconName:p2(n,t)||t}}if(typeof s=="string"&&(s.indexOf("".concat(x.cssPrefix,"-"))>-1||s.match(G7))){let t=r4(s.split(" "),{skipLookups:!0});return{prefix:t.prefix||z2(),iconName:p2(t.prefix,t.iconName)||t.iconName}}if(typeof s=="string"){let t=z2();return{prefix:t,iconName:p2(t,s)||s}}}},A1={noAuto:ve,config:x,dom:Se,parse:ye,library:V8,findIconDefinition:X4,toHtml:I3},be=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{autoReplaceSvgRoot:t=Q}=s;(Object.keys(Q1.styles).length>0||x.autoFetchSvg)&&s2&&x.autoReplaceSvg&&A1.dom.i2svg({node:t})};function o4(s,t){return Object.defineProperty(s,"abstract",{get:t}),Object.defineProperty(s,"html",{get:function(){return s.abstract.map(n=>I3(n))}}),Object.defineProperty(s,"node",{get:function(){if(!s2)return;let n=Q.createElement("div");return n.innerHTML=s.html,n.children}}),s}function xe(s){let{children:t,main:n,mask:e,attributes:c,styles:i,transform:l}=s;if(a0(l)&&n.found&&!e.found){let{width:a,height:o}=n,u={x:a/o/2,y:.5};c.style=l4(D(C({},i),{"transform-origin":"".concat(u.x+l.x/16,"em ").concat(u.y+l.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function Ne(s){let{prefix:t,iconName:n,children:e,attributes:c,symbol:i}=s,l=i===!0?"".concat(t,"-").concat(x.cssPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:D(C({},c),{id:l}),children:e}]}]}function m0(s){let{icons:{main:t,mask:n},prefix:e,iconName:c,transform:i,symbol:l,title:a,maskId:o,titleId:u,extra:p,watchable:z=!1}=s,{width:v,height:E}=n.found?n:t,W=e==="fak",I=[x.replacementClass,c?"".concat(x.cssPrefix,"-").concat(c):""].filter(X1=>p.classes.indexOf(X1)===-1).filter(X1=>X1!==""||!!X1).concat(p.classes).join(" "),f1={children:[],attributes:D(C({},p.attributes),{"data-prefix":e,"data-icon":c,class:I,role:p.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(E)})},n1=W&&!~p.classes.indexOf("fa-fw")?{width:"".concat(v/E*16*.0625,"em")}:{};z&&(f1.attributes[R2]=""),a&&(f1.children.push({tag:"title",attributes:{id:f1.attributes["aria-labelledby"]||"title-".concat(u||A3())},children:[a]}),delete f1.attributes.title);let i1=D(C({},f1),{prefix:e,iconName:c,main:t,mask:n,maskId:o,transform:i,symbol:l,styles:C(C({},n1),p.styles)}),{children:h1,attributes:O}=n.found&&t.found?C2("generateAbstractMask",i1)||{children:[],attributes:{}}:C2("generateAbstractIcon",i1)||{children:[],attributes:{}};return i1.children=h1,i1.attributes=O,l?Ne(i1):xe(i1)}function $6(s){let{content:t,width:n,height:e,transform:c,title:i,extra:l,watchable:a=!1}=s,o=D(C(C({},l.attributes),i?{title:i}:{}),{class:l.classes.join(" ")});a&&(o[R2]="");let u=C({},l.styles);a0(c)&&(u.transform=ne({transform:c,startCentered:!0,width:n,height:e}),u["-webkit-transform"]=u.transform);let p=l4(u);p.length>0&&(o.style=p);let z=[];return z.push({tag:"span",attributes:o,children:[t]}),i&&z.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),z}function we(s){let{content:t,title:n,extra:e}=s,c=D(C(C({},e.attributes),n?{title:n}:{}),{class:e.classes.join(" ")}),i=l4(e.styles);i.length>0&&(c.style=i);let l=[];return l.push({tag:"span",attributes:c,children:[t]}),n&&l.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),l}var{styles:O4}=Q1;function Y4(s){let t=s[0],n=s[1],[e]=s.slice(4),c=null;return Array.isArray(e)?c={tag:"g",attributes:{class:"".concat(x.cssPrefix,"-").concat(T4.GROUP)},children:[{tag:"path",attributes:{class:"".concat(x.cssPrefix,"-").concat(T4.SECONDARY),fill:"currentColor",d:e[0]}},{tag:"path",attributes:{class:"".concat(x.cssPrefix,"-").concat(T4.PRIMARY),fill:"currentColor",d:e[1]}}]}:c={tag:"path",attributes:{fill:"currentColor",d:e}},{found:!0,width:t,height:n,icon:c}}var ke={found:!1,width:512,height:512};function Ae(s,t){!z8&&!x.showMissingIcons&&s&&console.error('Icon with name "'.concat(s,'" and prefix "').concat(t,'" is missing.'))}function J4(s,t){let n=t;return t==="fa"&&x.styleDefault!==null&&(t=z2()),new Promise((e,c)=>{if(n==="fa"){let i=I8(s)||{};s=i.iconName||s,t=i.prefix||t}if(s&&t&&O4[t]&&O4[t][s]){let i=O4[t][s];return e(Y4(i))}Ae(s,t),e(D(C({},ke),{icon:x.showMissingIcons&&s?C2("missingIconAbstract")||{}:{}}))})}var Q6=()=>{},e0=x.measurePerformance&&c4&&c4.mark&&c4.measure?c4:{mark:Q6,measure:Q6},x3='FA "6.6.0"',Ee=s=>(e0.mark("".concat(x3," ").concat(s," begins")),()=>P8(s)),P8=s=>{e0.mark("".concat(x3," ").concat(s," ends")),e0.measure("".concat(x3," ").concat(s),"".concat(x3," ").concat(s," begins"),"".concat(x3," ").concat(s," ends"))},u0={begin:Ee,end:P8},t4=()=>{};function Z6(s){return typeof(s.getAttribute?s.getAttribute(R2):null)=="string"}function Ie(s){let t=s.getAttribute?s.getAttribute(n0):null,n=s.getAttribute?s.getAttribute(i0):null;return t&&n}function Ve(s){return s&&s.classList&&s.classList.contains&&s.classList.contains(x.replacementClass)}function Pe(){return x.autoReplaceSvg===!0?s4.replace:s4[x.autoReplaceSvg]||s4.replace}function De(s){return Q.createElementNS("http://www.w3.org/2000/svg",s)}function Fe(s){return Q.createElement(s)}function D8(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{ceFn:n=s.tag==="svg"?De:Fe}=t;if(typeof s=="string")return Q.createTextNode(s);let e=n(s.tag);return Object.keys(s.attributes||[]).forEach(function(i){e.setAttribute(i,s.attributes[i])}),(s.children||[]).forEach(function(i){e.appendChild(D8(i,{ceFn:n}))}),e}function He(s){let t=" ".concat(s.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var s4={replace:function(s){let t=s[0];if(t.parentNode)if(s[1].forEach(n=>{t.parentNode.insertBefore(D8(n),t)}),t.getAttribute(R2)===null&&x.keepOriginalSource){let n=Q.createComment(He(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(s){let t=s[0],n=s[1];if(~l0(t).indexOf(x.replacementClass))return s4.replace(s);let e=new RegExp("".concat(x.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){let i=n[0].attributes.class.split(" ").reduce((l,a)=>(a===x.replacementClass||a.match(e)?l.toSvg.push(a):l.toNode.push(a),l),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),i.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}let c=n.map(i=>I3(i)).join(`
`);t.setAttribute(R2,""),t.innerHTML=c}};function K6(s){s()}function F8(s,t){let n=typeof t=="function"?t:t4;if(s.length===0)n();else{let e=K6;x.mutateApproach===B7&&(e=h2.requestAnimationFrame||K6),e(()=>{let c=Pe(),i=u0.begin("mutate");s.map(c),i(),n()})}}var d0=!1;function H8(){d0=!0}function c0(){d0=!1}var i4=null;function X6(s){if(!_6||!x.observeMutations)return;let{treeCallback:t=t4,nodeCallback:n=t4,pseudoElementsCallback:e=t4,observeMutationsRoot:c=Q}=s;i4=new _6(i=>{if(d0)return;let l=z2();i3(i).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!Z6(a.addedNodes[0])&&(x.searchPseudoElements&&e(a.target),t(a.target)),a.type==="attributes"&&a.target.parentNode&&x.searchPseudoElements&&e(a.target.parentNode),a.type==="attributes"&&Z6(a.target)&&~Z7.indexOf(a.attributeName))if(a.attributeName==="class"&&Ie(a.target)){let{prefix:o,iconName:u}=r4(l0(a.target));a.target.setAttribute(n0,o||l),u&&a.target.setAttribute(i0,u)}else Ve(a.target)&&n(a.target)})}),s2&&i4.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Te(){i4&&i4.disconnect()}function Re(s){let t=s.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((e,c)=>{let i=c.split(":"),l=i[0],a=i.slice(1);return l&&a.length>0&&(e[l]=a.join(":").trim()),e},{})),n}function _e(s){let t=s.getAttribute("data-prefix"),n=s.getAttribute("data-icon"),e=s.innerText!==void 0?s.innerText.trim():"",c=r4(l0(s));return c.prefix||(c.prefix=z2()),t&&n&&(c.prefix=t,c.iconName=n),c.iconName&&c.prefix||(c.prefix&&e.length>0&&(c.iconName=ze(c.prefix,s.innerText)||o0(c.prefix,$4(s.innerText))),!c.iconName&&x.autoFetchSvg&&s.firstChild&&s.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=s.firstChild.data)),c}function Oe(s){let t=i3(s.attributes).reduce((c,i)=>(c.name!=="class"&&c.name!=="style"&&(c[i.name]=i.value),c),{}),n=s.getAttribute("title"),e=s.getAttribute("data-fa-title-id");return x.autoA11y&&(n?t["aria-labelledby"]="".concat(x.replacementClass,"-title-").concat(e||A3()):(t["aria-hidden"]="true",t.focusable="false")),t}function qe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:$1,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Y6(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},{iconName:n,prefix:e,rest:c}=_e(s),i=Oe(s),l=K4("parseNodeAttributes",{},s),a=t.styleParser?Re(s):[];return C({iconName:n,title:s.getAttribute("title"),titleId:s.getAttribute("data-fa-title-id"),prefix:e,transform:$1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:c,styles:a,attributes:i}},l)}var{styles:Ue}=Q1;function T8(s){let t=x.autoReplaceSvg==="nest"?Y6(s,{styleParser:!1}):Y6(s);return~t.extra.classes.indexOf(M8)?C2("generateLayersText",s,t):C2("generateSvgReplacementMutation",s,t)}var Z1=new Set;C8.map(s=>{Z1.add("fa-".concat(s))});Object.keys(H2[K]).map(Z1.add.bind(Z1));Object.keys(H2[w1]).map(Z1.add.bind(Z1));Object.keys(H2[k1]).map(Z1.add.bind(Z1));Z1=[...Z1];function J6(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!s2)return Promise.resolve();let n=Q.documentElement.classList,e=p=>n.add("".concat(U6,"-").concat(p)),c=p=>n.remove("".concat(U6,"-").concat(p)),i=x.autoFetchSvg?Z1:C8.map(p=>"fa-".concat(p)).concat(Object.keys(Ue));i.includes("fa")||i.push("fa");let l=[".".concat(M8,":not([").concat(R2,"])")].concat(i.map(p=>".".concat(p,":not([").concat(R2,"])"))).join(", ");if(l.length===0)return Promise.resolve();let a=[];try{a=i3(s.querySelectorAll(l))}catch{}if(a.length>0)e("pending"),c("complete");else return Promise.resolve();let o=u0.begin("onTree"),u=a.reduce((p,z)=>{try{let v=T8(z);v&&p.push(v)}catch(v){z8||v.name==="MissingIcon"&&console.error(v)}return p},[]);return new Promise((p,z)=>{Promise.all(u).then(v=>{F8(v,()=>{e("active"),e("complete"),c("pending"),typeof t=="function"&&t(),o(),p()})}).catch(v=>{o(),z(v)})})}function Be(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;T8(s).then(n=>{n&&F8([n],t)})}function je(s){return function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=(t||{}).icon?t:X4(t||{}),{mask:c}=n;return c&&(c=(c||{}).icon?c:X4(c||{})),s(e,D(C({},n),{mask:c}))}}var We=function(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{transform:n=$1,symbol:e=!1,mask:c=null,maskId:i=null,title:l=null,titleId:a=null,classes:o=[],attributes:u={},styles:p={}}=t;if(!s)return;let{prefix:z,iconName:v,icon:E}=s;return o4(C({type:"icon"},s),()=>(_2("beforeDOMElementCreation",{iconDefinition:s,params:t}),x.autoA11y&&(l?u["aria-labelledby"]="".concat(x.replacementClass,"-title-").concat(a||A3()):(u["aria-hidden"]="true",u.focusable="false")),m0({icons:{main:Y4(E),mask:c?Y4(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:z,iconName:v,transform:C(C({},$1),n),symbol:e,title:l,maskId:i,titleId:a,extra:{attributes:u,styles:p,classes:o}})))},Ge={mixout(){return{icon:je(We)}},hooks(){return{mutationObserverCallbacks(s){return s.treeCallback=J6,s.nodeCallback=Be,s}}},provides(s){s.i2svg=function(t){let{node:n=Q,callback:e=()=>{}}=t;return J6(n,e)},s.generateSvgReplacementMutation=function(t,n){let{iconName:e,title:c,titleId:i,prefix:l,transform:a,symbol:o,mask:u,maskId:p,extra:z}=n;return new Promise((v,E)=>{Promise.all([J4(e,l),u.iconName?J4(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(W=>{let[I,f1]=W;v([t,m0({icons:{main:I,mask:f1},prefix:l,iconName:e,transform:a,symbol:o,maskId:p,title:c,titleId:i,extra:z,watchable:!0})])}).catch(E)})},s.generateAbstractIcon=function(t){let{children:n,attributes:e,main:c,transform:i,styles:l}=t,a=l4(l);a.length>0&&(e.style=a);let o;return a0(i)&&(o=C2("generateAbstractTransformGrouping",{main:c,transform:i,containerWidth:c.width,iconWidth:c.width})),n.push(o||c.icon),{children:n,attributes:e}}}},$e={mixout(){return{layer(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{classes:n=[]}=t;return o4({type:"layer"},()=>{_2("beforeDOMElementCreation",{assembler:s,params:t});let e=[];return s(c=>{Array.isArray(c)?c.map(i=>{e=e.concat(i.abstract)}):e=e.concat(c.abstract)}),[{tag:"span",attributes:{class:["".concat(x.cssPrefix,"-layers"),...n].join(" ")},children:e}]})}}}},Qe={mixout(){return{counter(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{title:n=null,classes:e=[],attributes:c={},styles:i={}}=t;return o4({type:"counter",content:s},()=>(_2("beforeDOMElementCreation",{content:s,params:t}),we({content:s.toString(),title:n,extra:{attributes:c,styles:i,classes:["".concat(x.cssPrefix,"-layers-counter"),...e]}})))}}}},Ze={mixout(){return{text(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{transform:n=$1,title:e=null,classes:c=[],attributes:i={},styles:l={}}=t;return o4({type:"text",content:s},()=>(_2("beforeDOMElementCreation",{content:s,params:t}),$6({content:s,transform:C(C({},$1),n),title:e,extra:{attributes:i,styles:l,classes:["".concat(x.cssPrefix,"-layers-text"),...c]}})))}}},provides(s){s.generateLayersText=function(t,n){let{title:e,transform:c,extra:i}=n,l=null,a=null;if(f8){let o=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();l=u.width/o,a=u.height/o}return x.autoA11y&&!e&&(i.attributes["aria-hidden"]="true"),Promise.resolve([t,$6({content:t.innerHTML,width:l,height:a,transform:c,title:e,extra:i,watchable:!0})])}}},Ke=new RegExp('"',"ug"),e8=[1105920,1112319],c8=C(C(C({FontAwesome:{normal:"fas",400:"fas"}},I7),E7),_7),t0=Object.keys(c8).reduce((s,t)=>(s[t.toLowerCase()]=c8[t],s),{}),Xe=Object.keys(t0).reduce((s,t)=>{let n=t0[t];return s[t]=n[900]||[...Object.entries(n)][0][1],s},{});function Ye(s){let t=s.replace(Ke,""),n=fe(t,0),e=n>=e8[0]&&n<=e8[1],c=t.length===2?t[0]===t[1]:!1;return{value:$4(c?t[0]:t),isSecondary:e||c}}function Je(s,t){let n=s.replace(/^['"]|['"]$/g,"").toLowerCase(),e=parseInt(t),c=isNaN(e)?"normal":e;return(t0[n]||{})[c]||Xe[n]}function t8(s,t){let n="".concat(U7).concat(t.replace(":","-"));return new Promise((e,c)=>{if(s.getAttribute(n)!==null)return e();let l=i3(s.children).filter(v=>v.getAttribute(B4)===t)[0],a=h2.getComputedStyle(s,t),o=a.getPropertyValue("font-family"),u=o.match($7),p=a.getPropertyValue("font-weight"),z=a.getPropertyValue("content");if(l&&!u)return s.removeChild(l),e();if(u&&z!=="none"&&z!==""){let v=a.getPropertyValue("content"),E=Je(o,p),{value:W,isSecondary:I}=Ye(v),f1=u[0].startsWith("FontAwesome"),n1=o0(E,W),i1=n1;if(f1){let h1=Ce(W);h1.iconName&&h1.prefix&&(n1=h1.iconName,E=h1.prefix)}if(n1&&!I&&(!l||l.getAttribute(n0)!==E||l.getAttribute(i0)!==i1)){s.setAttribute(n,i1),l&&s.removeChild(l);let h1=qe(),{extra:O}=h1;O.attributes[B4]=t,J4(n1,E).then(X1=>{let y7=m0(D(C({},h1),{icons:{main:X1,mask:f0()},prefix:E,iconName:i1,extra:O,watchable:!0})),V4=Q.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?s.insertBefore(V4,s.firstChild):s.appendChild(V4),V4.outerHTML=y7.map(b7=>I3(b7)).join(`
`),s.removeAttribute(n),e()}).catch(c)}else e()}else e()})}function e9(s){return Promise.all([t8(s,"::before"),t8(s,"::after")])}function c9(s){return s.parentNode!==document.head&&!~j7.indexOf(s.tagName.toUpperCase())&&!s.getAttribute(B4)&&(!s.parentNode||s.parentNode.tagName!=="svg")}function s8(s){if(s2)return new Promise((t,n)=>{let e=i3(s.querySelectorAll("*")).filter(c9).map(e9),c=u0.begin("searchPseudoElements");H8(),Promise.all(e).then(()=>{c(),c0(),t()}).catch(()=>{c(),c0(),n()})})}var t9={hooks(){return{mutationObserverCallbacks(s){return s.pseudoElementsCallback=s8,s}}},provides(s){s.pseudoElements2svg=function(t){let{node:n=Q}=t;x.searchPseudoElements&&s8(n)}}},n8=!1,s9={mixout(){return{dom:{unwatch(){H8(),n8=!0}}}},hooks(){return{bootstrap(){X6(K4("mutationObserverCallbacks",{}))},noAuto(){Te()},watch(s){let{observeMutationsRoot:t}=s;n8?c0():X6(K4("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},i8=s=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return s.toLowerCase().split(" ").reduce((n,e)=>{let c=e.toLowerCase().split("-"),i=c[0],l=c.slice(1).join("-");if(i&&l==="h")return n.flipX=!0,n;if(i&&l==="v")return n.flipY=!0,n;if(l=parseFloat(l),isNaN(l))return n;switch(i){case"grow":n.size=n.size+l;break;case"shrink":n.size=n.size-l;break;case"left":n.x=n.x-l;break;case"right":n.x=n.x+l;break;case"up":n.y=n.y-l;break;case"down":n.y=n.y+l;break;case"rotate":n.rotate=n.rotate+l;break}return n},t)},n9={mixout(){return{parse:{transform:s=>i8(s)}}},hooks(){return{parseNodeAttributes(s,t){let n=t.getAttribute("data-fa-transform");return n&&(s.transform=i8(n)),s}}},provides(s){s.generateAbstractTransformGrouping=function(t){let{main:n,transform:e,containerWidth:c,iconWidth:i}=t,l={transform:"translate(".concat(c/2," 256)")},a="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),u="rotate(".concat(e.rotate," 0 0)"),p={transform:"".concat(a," ").concat(o," ").concat(u)},z={transform:"translate(".concat(i/2*-1," -256)")},v={outer:l,inner:p,path:z};return{tag:"g",attributes:C({},v.outer),children:[{tag:"g",attributes:C({},v.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:C(C({},n.icon.attributes),v.path)}]}]}}}},q4={x:0,y:0,width:"100%",height:"100%"};function l8(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return s.attributes&&(s.attributes.fill||t)&&(s.attributes.fill="black"),s}function i9(s){return s.tag==="g"?s.children:[s]}var l9={hooks(){return{parseNodeAttributes(s,t){let n=t.getAttribute("data-fa-mask"),e=n?r4(n.split(" ").map(c=>c.trim())):f0();return e.prefix||(e.prefix=z2()),s.mask=e,s.maskId=t.getAttribute("data-fa-mask-id"),s}}},provides(s){s.generateAbstractMask=function(t){let{children:n,attributes:e,main:c,mask:i,maskId:l,transform:a}=t,{width:o,icon:u}=c,{width:p,icon:z}=i,v=se({transform:a,containerWidth:p,iconWidth:o}),E={tag:"rect",attributes:D(C({},q4),{fill:"white"})},W=u.children?{children:u.children.map(l8)}:{},I={tag:"g",attributes:C({},v.inner),children:[l8(C({tag:u.tag,attributes:C(C({},u.attributes),v.path)},W))]},f1={tag:"g",attributes:C({},v.outer),children:[I]},n1="mask-".concat(l||A3()),i1="clip-".concat(l||A3()),h1={tag:"mask",attributes:D(C({},q4),{id:n1,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[E,f1]},O={tag:"defs",children:[{tag:"clipPath",attributes:{id:i1},children:i9(z)},h1]};return n.push(O,{tag:"rect",attributes:C({fill:"currentColor","clip-path":"url(#".concat(i1,")"),mask:"url(#".concat(n1,")")},q4)}),{children:n,attributes:e}}}},a9={provides(s){let t=!1;h2.matchMedia&&(t=h2.matchMedia("(prefers-reduced-motion: reduce)").matches),s.missingIconAbstract=function(){let n=[],e={fill:"currentColor"},c={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:D(C({},e),{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});let i=D(C({},c),{attributeName:"opacity"}),l={tag:"circle",attributes:D(C({},e),{cx:"256",cy:"364",r:"28"}),children:[]};return t||l.children.push({tag:"animate",attributes:D(C({},c),{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:D(C({},i),{values:"1;0;1;1;0;1;"})}),n.push(l),n.push({tag:"path",attributes:D(C({},e),{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:D(C({},i),{values:"1;0;0;0;0;1;"})}]}),t||n.push({tag:"path",attributes:D(C({},e),{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:D(C({},i),{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},r9={hooks(){return{parseNodeAttributes(s,t){let n=t.getAttribute("data-fa-symbol"),e=n===null?!1:n===""?!0:n;return s.symbol=e,s}}}},o9=[le,Ge,$e,Qe,Ze,t9,s9,n9,l9,a9,r9];ge(o9,{mixoutsTo:A1});var Ln=A1.noAuto,R8=A1.config,Mn=A1.library,_8=A1.dom,O8=A1.parse,gn=A1.findIconDefinition,vn=A1.toHtml,q8=A1.icon,Sn=A1.layer,f9=A1.text,m9=A1.counter;var u9=["*"],d9=s=>{throw new Error(`Could not find icon with iconName=${s.iconName} and prefix=${s.prefix} in the icon library.`)},p9=()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")},h9=s=>{let t={[`fa-${s.animation}`]:s.animation!=null&&!s.animation.startsWith("spin"),"fa-spin":s.animation==="spin"||s.animation==="spin-reverse","fa-spin-pulse":s.animation==="spin-pulse"||s.animation==="spin-pulse-reverse","fa-spin-reverse":s.animation==="spin-reverse"||s.animation==="spin-pulse-reverse","fa-pulse":s.animation==="spin-pulse"||s.animation==="spin-pulse-reverse","fa-fw":s.fixedWidth,"fa-border":s.border,"fa-inverse":s.inverse,"fa-layers-counter":s.counter,"fa-flip-horizontal":s.flip==="horizontal"||s.flip==="both","fa-flip-vertical":s.flip==="vertical"||s.flip==="both",[`fa-${s.size}`]:s.size!==null,[`fa-rotate-${s.rotate}`]:s.rotate!==null,[`fa-pull-${s.pull}`]:s.pull!==null,[`fa-stack-${s.stackItemSize}`]:s.stackItemSize!=null};return Object.keys(t).map(n=>t[n]?n:null).filter(n=>n)},p0=new WeakSet,U8="fa-auto-css";function z9(s,t){if(!t.autoAddCss||p0.has(s))return;if(s.getElementById(U8)!=null){t.autoAddCss=!1,p0.add(s);return}let n=s.createElement("style");n.setAttribute("type","text/css"),n.setAttribute("id",U8),n.innerHTML=_8.css();let e=s.head.childNodes,c=null;for(let i=e.length-1;i>-1;i--){let l=e[i],a=l.nodeName.toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(c=l)}s.head.insertBefore(n,c),t.autoAddCss=!1,p0.add(s)}var C9=s=>s.prefix!==void 0&&s.iconName!==void 0,L9=(s,t)=>C9(s)?s:Array.isArray(s)&&s.length===2?{prefix:s[0],iconName:s[1]}:{prefix:t,iconName:s},h0=(()=>{let t=class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null,this._autoAddCss=!0}set autoAddCss(e){R8.autoAddCss=e,this._autoAddCss=e}get autoAddCss(){return this._autoAddCss}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),z0=(()=>{let t=class t{constructor(){this.definitions={}}addIcons(...e){for(let c of e){c.prefix in this.definitions||(this.definitions[c.prefix]={}),this.definitions[c.prefix][c.iconName]=c;for(let i of c.icon[2])typeof i=="string"&&(this.definitions[c.prefix][i]=c)}}addIconPacks(...e){for(let c of e){let i=Object.keys(c).map(l=>c[l]);this.addIcons(...i)}}getIconDefinition(e,c){return e in this.definitions&&c in this.definitions[e]?this.definitions[e][c]:null}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),M9=(()=>{let t=class t{constructor(){this.stackItemSize="1x"}ngOnChanges(e){if("size"in e)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}};t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=Z({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},standalone:!0,features:[r2]});let s=t;return s})(),g9=(()=>{let t=class t{constructor(e,c){this.renderer=e,this.elementRef=c}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(e){"size"in e&&(e.size.currentValue!=null&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${e.size.currentValue}`),e.size.previousValue!=null&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${e.size.previousValue}`))}};t.\u0275fac=function(c){return new(c||t)(F(o2),F(O1))},t.\u0275cmp=R({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},standalone:!0,features:[r2,_],ngContentSelectors:u9,decls:1,vars:0,template:function(c,i){c&1&&(h6(),z6(0))},encapsulation:2});let s=t;return s})(),p1=(()=>{let t=class t{constructor(e,c,i,l,a){this.sanitizer=e,this.config=c,this.iconLibrary=i,this.stackItem=l,this.document=r(C1),a!=null&&l==null&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(e){if(this.icon==null&&this.config.fallbackIcon==null){p9();return}if(e){let c=this.findIconDefinition(this.icon??this.config.fallbackIcon);if(c!=null){let i=this.buildParams();z9(this.document,this.config);let l=q8(c,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(l.html.join(`
`))}}}render(){this.ngOnChanges({})}findIconDefinition(e){let c=L9(e,this.config.defaultPrefix);if("icon"in c)return c;let i=this.iconLibrary.getIconDefinition(c.prefix,c.iconName);return i??(d9(c),null)}buildParams(){let e={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:typeof this.fixedWidth=="boolean"?this.fixedWidth:this.config.fixedWidth,stackItemSize:this.stackItem!=null?this.stackItem.stackItemSize:null},c=typeof this.transform=="string"?O8.transform(this.transform):this.transform;return{title:this.title,transform:c,classes:h9(e),mask:this.mask!=null?this.findIconDefinition(this.mask):null,symbol:this.symbol,attributes:{role:this.a11yRole}}}};t.\u0275fac=function(c){return new(c||t)(F(A6),F(h0),F(z0),F(M9,8),F(g9,8))},t.\u0275cmp=R({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(c,i){c&2&&(p6("innerHTML",i.renderedIconHTML,r6),D4("title",i.title))},inputs:{icon:"icon",title:"title",animation:"animation",mask:"mask",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",transform:"transform",a11yRole:"a11yRole"},standalone:!0,features:[r2,_],decls:0,vars:0,template:function(c,i){},encapsulation:2});let s=t;return s})();var v9=(s,t)=>t.publicId,S9=()=>["fas","circle-exclamation"];function y9(s,t){if(s&1){let n=N1();f(0,"tr",9)(1,"th"),d(2),m(),f(3,"td"),d(4),m(),f(5,"td"),d(6),m(),f(7,"td")(8,"div",11),T("click",function(){let c=c1(n).$implicit,i=P(2);return t1(i.deleteCategory(c.publicId))}),d(9," Delete "),m()()()}if(s&2){let n=t.$implicit,e=t.$index;h(2),A(e),h(2),A(n.publicId),h(2),A(n.name)}}function b9(s,t){if(s&1&&(f(0,"div",4)(1,"table",8)(2,"thead",9)(3,"tr",9),g(4,"th"),f(5,"th"),d(6,"Public Id"),m(),f(7,"th"),d(8,"Name"),m(),f(9,"th"),d(10,"Actions"),m()()(),f(11,"tbody",10),X(12,y9,10,3,"tr",9,v9),m()()()),s&2){let n=P();h(12),Y(n.categoriesQuery.data().content)}}function x9(s,t){s&1&&(f(0,"div",5),g(1,"span",12),m())}function N9(s,t){s&1&&(f(0,"div",6)(1,"span"),d(2,"Error! Failed to load categories."),m()())}function w9(s,t){s&1&&(f(0,"div",7),g(1,"fa-icon",13),f(2,"span"),d(3,"No category created yet."),m()()),s&2&&(h(),N("icon",s1(1,S9)))}var B8=(()=>{class s{productAdminService=r(u2);toastService=r(M1);queryClient=J3();constructor(){d1(()=>this.handleCategoriesQueryError())}categoriesQuery=l1(()=>({queryKey:["categories"],queryFn:()=>$(this.productAdminService.findAllCategories())}));deleteMutation=G1(()=>({mutationFn:n=>$(this.productAdminService.deleteCategory(n)),onSuccess:()=>this.onDeletionSuccess(),onError:()=>this.onDeletionError()}));onDeletionSuccess(){this.queryClient.invalidateQueries({queryKey:["categories"]}),this.toastService.show("Category deleted","SUCCESS")}onDeletionError(){this.toastService.show("Issue when deleting category","ERROR")}handleCategoriesQueryError(){this.categoriesQuery.isError()&&this.toastService.show("Error! Failed to load categories. please try again.","ERROR")}deleteCategory(n){this.deleteMutation.mutate(n)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-admin-categories"]],standalone:!0,features:[_],decls:13,vars:1,consts:[[1,"w-full","flex","justify-between","items-center"],[1,"text-2xl","font-bold"],["routerLink","/admin/categories/create",1,"btn","btn-primary"],[1,"border-t","w-full","border-solid","border-gray-300","mt-3","mb-5"],[1,"overflow-x-auto","border","border-gray-300","rounded-md"],[1,"flex","w-full","justify-center"],[1,"alert","alert-error"],["role","alert",1,"alert","alert-info"],[1,"table","table-lg","table-zebra"],[1,"border-gray-300"],[1,"border-0"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"loading","loading-spinner","loading-lg"],["size","2x",3,"icon"]],template:function(e,c){e&1&&(f(0,"div",0)(1,"div")(2,"h1",1),d(3,"Categories"),m(),f(4,"div"),d(5,"Add and delete categories"),m()(),f(6,"button",2),d(7," Create categories "),m()(),g(8,"div",3),V(9,b9,14,0,"div",4)(10,x9,2,0,"div",5)(11,N9,3,0,"div",6)(12,w9,4,2,"div",7)),e&2&&(h(9),q(c.categoriesQuery.isSuccess()&&c.categoriesQuery.data().content.length!==0?9:c.categoriesQuery.isPending()?10:c.categoriesQuery.isError()?11:c.categoriesQuery.data().content.length===0?12:-1))},dependencies:[U,W1,p1]})}return s})();var Y8=(()=>{let t=class t{constructor(e,c){this._renderer=e,this._elementRef=c,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,c){this._renderer.setProperty(this._elementRef.nativeElement,e,c)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}};t.\u0275fac=function(c){return new(c||t)(F(o2),F(O1))},t.\u0275dir=Z({type:t});let s=t;return s})(),m3=(()=>{let t=class t extends Y8{};t.\u0275fac=(()=>{let e;return function(i){return(e||(e=P2(t)))(i||t)}})(),t.\u0275dir=Z({type:t,features:[v1]});let s=t;return s})(),O2=new u1(""),A9={provide:O2,useExisting:_1(()=>T3),multi:!0},T3=(()=>{let t=class t extends m3{writeValue(e){this.setProperty("checked",e)}};t.\u0275fac=(()=>{let e;return function(i){return(e||(e=P2(t)))(i||t)}})(),t.\u0275dir=Z({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(c,i){c&1&&T("change",function(a){return i.onChange(a.target.checked)})("blur",function(){return i.onTouched()})},features:[U1([A9]),v1]});let s=t;return s})(),E9={provide:O2,useExisting:_1(()=>v2),multi:!0};function I9(){let s=F4()?F4().getUserAgent():"";return/android (\d+)/.test(s.toLowerCase())}var V9=new u1(""),v2=(()=>{let t=class t extends Y8{constructor(e,c,i){super(e,c),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!I9())}writeValue(e){let c=e??"";this.setProperty("value",c)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}};t.\u0275fac=function(c){return new(c||t)(F(o2),F(O1),F(V9,8))},t.\u0275dir=Z({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(c,i){c&1&&T("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[U1([E9]),v1]});let s=t;return s})();function L2(s){return s==null||(typeof s=="string"||Array.isArray(s))&&s.length===0}function J8(s){return s!=null&&typeof s.length=="number"}var y0=new u1(""),b0=new u1(""),P9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,L1=class{static min(t){return D9(t)}static max(t){return F9(t)}static required(t){return H9(t)}static requiredTrue(t){return T9(t)}static email(t){return R9(t)}static minLength(t){return _9(t)}static maxLength(t){return O9(t)}static pattern(t){return q9(t)}static nullValidator(t){return e5(t)}static compose(t){return l5(t)}static composeAsync(t){return a5(t)}};function D9(s){return t=>{if(L2(t.value)||L2(s))return null;let n=parseFloat(t.value);return!isNaN(n)&&n<s?{min:{min:s,actual:t.value}}:null}}function F9(s){return t=>{if(L2(t.value)||L2(s))return null;let n=parseFloat(t.value);return!isNaN(n)&&n>s?{max:{max:s,actual:t.value}}:null}}function H9(s){return L2(s.value)?{required:!0}:null}function T9(s){return s.value===!0?null:{required:!0}}function R9(s){return L2(s.value)||P9.test(s.value)?null:{email:!0}}function _9(s){return t=>L2(t.value)||!J8(t.value)?null:t.value.length<s?{minlength:{requiredLength:s,actualLength:t.value.length}}:null}function O9(s){return t=>J8(t.value)&&t.value.length>s?{maxlength:{requiredLength:s,actualLength:t.value.length}}:null}function q9(s){if(!s)return e5;let t,n;return typeof s=="string"?(n="",s.charAt(0)!=="^"&&(n+="^"),n+=s,s.charAt(s.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=s.toString(),t=s),e=>{if(L2(e.value))return null;let c=e.value;return t.test(c)?null:{pattern:{requiredPattern:n,actualValue:c}}}}function e5(s){return null}function c5(s){return s!=null}function t5(s){return g6(s)?S(s):s}function s5(s){let t={};return s.forEach(n=>{t=n!=null?C(C({},t),n):t}),Object.keys(t).length===0?null:t}function n5(s,t){return t.map(n=>n(s))}function U9(s){return!s.validate}function i5(s){return s.map(t=>U9(t)?t:n=>t.validate(n))}function l5(s){if(!s)return null;let t=s.filter(c5);return t.length==0?null:function(n){return s5(n5(n,t))}}function x0(s){return s!=null?l5(i5(s)):null}function a5(s){if(!s)return null;let t=s.filter(c5);return t.length==0?null:function(n){let e=n5(n,t).map(t5);return a2(e).pipe(k(s5))}}function N0(s){return s!=null?a5(i5(s)):null}function j8(s,t){return s===null?[t]:Array.isArray(s)?[...s,t]:[s,t]}function r5(s){return s._rawValidators}function o5(s){return s._rawAsyncValidators}function C0(s){return s?Array.isArray(s)?s:[s]:[]}function m4(s,t){return Array.isArray(s)?s.includes(t):s===t}function W8(s,t){let n=C0(t);return C0(s).forEach(c=>{m4(n,c)||n.push(c)}),n}function G8(s,t){return C0(t).filter(n=>!m4(s,n))}var u4=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=x0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=N0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},M2=class extends u4{get formDirective(){return null}get path(){return null}},r3=class extends u4{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},d4=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},B9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},fi=D(C({},B9),{"[class.ng-submitted]":"isSubmitted"}),u3=(()=>{let t=class t extends d4{constructor(e){super(e)}};t.\u0275fac=function(c){return new(c||t)(F(r3,2))},t.\u0275dir=Z({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(c,i){c&2&&S1("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[v1]});let s=t;return s})(),d3=(()=>{let t=class t extends d4{constructor(e){super(e)}};t.\u0275fac=function(c){return new(c||t)(F(M2,10))},t.\u0275dir=Z({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(c,i){c&2&&S1("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[v1]});let s=t;return s})();var V3="VALID",f4="INVALID",l3="PENDING",P3="DISABLED",g2=class{},p4=class extends g2{constructor(t,n){super(),this.value=t,this.source=n}},F3=class extends g2{constructor(t,n){super(),this.pristine=t,this.source=n}},H3=class extends g2{constructor(t,n){super(),this.touched=t,this.source=n}},a3=class extends g2{constructor(t,n){super(),this.status=t,this.source=n}},L0=class extends g2{constructor(t){super(),this.source=t}},M0=class extends g2{constructor(t){super(),this.source=t}};function w0(s){return(C4(s)?s.validators:s)||null}function j9(s){return Array.isArray(s)?x0(s):s||null}function k0(s,t){return(C4(t)?t.asyncValidators:s)||null}function W9(s){return Array.isArray(s)?N0(s):s||null}function C4(s){return s!=null&&!Array.isArray(s)&&typeof s=="object"}function f5(s,t,n){let e=s.controls;if(!(t?Object.keys(e):e).length)throw new E2(1e3,"");if(!e[n])throw new E2(1001,"")}function m5(s,t,n){s._forEachChild((e,c)=>{if(n[c]===void 0)throw new E2(1002,"")})}var o3=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=f2(()=>this.statusReactive()),this.statusReactive=g1(void 0),this._pristine=f2(()=>this.pristineReactive()),this.pristineReactive=g1(!0),this._touched=f2(()=>this.touchedReactive()),this.touchedReactive=g1(!1),this._events=new l2,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return I1(this.statusReactive)}set status(t){I1(()=>this.statusReactive.set(t))}get valid(){return this.status===V3}get invalid(){return this.status===f4}get pending(){return this.status==l3}get disabled(){return this.status===P3}get enabled(){return this.status!==P3}get pristine(){return I1(this.pristineReactive)}set pristine(t){I1(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return I1(this.touchedReactive)}set touched(t){I1(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(W8(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(W8(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(G8(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(G8(t,this._rawAsyncValidators))}hasValidator(t){return m4(this._rawValidators,t)}hasAsyncValidator(t){return m4(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let e=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(D(C({},t),{sourceControl:e})),n&&t.emitEvent!==!1&&this._events.next(new H3(!0,e))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let e=t.sourceControl??this;this._forEachChild(c=>{c.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:e})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e),n&&t.emitEvent!==!1&&this._events.next(new H3(!1,e))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let e=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(D(C({},t),{sourceControl:e})),n&&t.emitEvent!==!1&&this._events.next(new F3(!1,e))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let e=t.sourceControl??this;this._forEachChild(c=>{c.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),n&&t.emitEvent!==!1&&this._events.next(new F3(!0,e))}markAsPending(t={}){this.status=l3;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new a3(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(D(C({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=P3,this.errors=null,this._forEachChild(c=>{c.disable(D(C({},t),{onlySelf:!0}))}),this._updateValue();let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new p4(this.value,e)),this._events.next(new a3(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(D(C({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(c=>c(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=V3,this._forEachChild(e=>{e.enable(D(C({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(D(C({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let e=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===V3||this.status===l3)&&this._runAsyncValidator(e,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new p4(this.value,n)),this._events.next(new a3(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(D(C({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P3:V3}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=l3,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let e=t5(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(c=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(c,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((e,c)=>e&&e._find(c),this)}getError(t,n){let e=n?this.get(n):this;return e&&e.errors?e.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,e){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||e)&&this._events.next(new a3(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,e)}_initObservables(){this.valueChanges=new Y1,this.statusChanges=new Y1}_calculateStatus(){return this._allControlsDisabled()?P3:this.errors?f4:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(l3)?l3:this._anyControlsHaveStatus(f4)?f4:V3}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let e=!this._anyControlsDirty(),c=this.pristine!==e;this.pristine=e,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),c&&this._events.next(new F3(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new H3(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){C4(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=j9(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=W9(this._rawAsyncValidators)}},f3=class extends o3{constructor(t,n,e){super(w0(n),k0(e,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,e={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){m5(this,!0,t),Object.keys(t).forEach(e=>{f5(this,!0,e),this.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(e=>{let c=this.controls[e];c&&c.patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((e,c)=>{e.reset(t?t[c]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,e)=>(t[e]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,e)=>e._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let e=this.controls[n];e&&t(e,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,e]of Object.entries(this.controls))if(this.contains(n)&&t(e))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,e,c)=>((e.enabled||this.disabled)&&(n[c]=e.value),n))}_reduceChildren(t,n){let e=t;return this._forEachChild((c,i)=>{e=n(e,c,i)}),e}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var g0=class extends f3{};var R3=new u1("CallSetDisabledState",{providedIn:"root",factory:()=>_3}),_3="always";function G9(s,t){return[...t.path,s]}function v0(s,t,n=_3){A0(s,t),t.valueAccessor.writeValue(s.value),(s.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(s.disabled),Q9(s,t),K9(s,t),Z9(s,t),$9(s,t)}function $8(s,t,n=!0){let e=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(e),t.valueAccessor.registerOnTouched(e)),z4(s,t),s&&(t._invokeOnDestroyCallbacks(),s._registerOnCollectionChange(()=>{}))}function h4(s,t){s.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function $9(s,t){if(t.valueAccessor.setDisabledState){let n=e=>{t.valueAccessor.setDisabledState(e)};s.registerOnDisabledChange(n),t._registerOnDestroy(()=>{s._unregisterOnDisabledChange(n)})}}function A0(s,t){let n=r5(s);t.validator!==null?s.setValidators(j8(n,t.validator)):typeof n=="function"&&s.setValidators([n]);let e=o5(s);t.asyncValidator!==null?s.setAsyncValidators(j8(e,t.asyncValidator)):typeof e=="function"&&s.setAsyncValidators([e]);let c=()=>s.updateValueAndValidity();h4(t._rawValidators,c),h4(t._rawAsyncValidators,c)}function z4(s,t){let n=!1;if(s!==null){if(t.validator!==null){let c=r5(s);if(Array.isArray(c)&&c.length>0){let i=c.filter(l=>l!==t.validator);i.length!==c.length&&(n=!0,s.setValidators(i))}}if(t.asyncValidator!==null){let c=o5(s);if(Array.isArray(c)&&c.length>0){let i=c.filter(l=>l!==t.asyncValidator);i.length!==c.length&&(n=!0,s.setAsyncValidators(i))}}}let e=()=>{};return h4(t._rawValidators,e),h4(t._rawAsyncValidators,e),n}function Q9(s,t){t.valueAccessor.registerOnChange(n=>{s._pendingValue=n,s._pendingChange=!0,s._pendingDirty=!0,s.updateOn==="change"&&u5(s,t)})}function Z9(s,t){t.valueAccessor.registerOnTouched(()=>{s._pendingTouched=!0,s.updateOn==="blur"&&s._pendingChange&&u5(s,t),s.updateOn!=="submit"&&s.markAsTouched()})}function u5(s,t){s._pendingDirty&&s.markAsDirty(),s.setValue(s._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(s._pendingValue),s._pendingChange=!1}function K9(s,t){let n=(e,c)=>{t.valueAccessor.writeValue(e),c&&t.viewToModelUpdate(e)};s.registerOnChange(n),t._registerOnDestroy(()=>{s._unregisterOnChange(n)})}function d5(s,t){s==null,A0(s,t)}function X9(s,t){return z4(s,t)}function Y9(s,t){if(!s.hasOwnProperty("model"))return!1;let n=s.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function J9(s){return Object.getPrototypeOf(s.constructor)===m3}function p5(s,t){s._syncPendingControls(),t.forEach(n=>{let e=n.control;e.updateOn==="submit"&&e._pendingChange&&(n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function ec(s,t){if(!t)return null;Array.isArray(t);let n,e,c;return t.forEach(i=>{i.constructor===v2?n=i:J9(i)?e=i:c=i}),c||e||n||null}function cc(s,t){let n=s.indexOf(t);n>-1&&s.splice(n,1)}var tc={provide:M2,useExisting:_1(()=>E0)},D3=Promise.resolve(),E0=(()=>{let t=class t extends M2{get submitted(){return I1(this.submittedReactive)}constructor(e,c,i){super(),this.callSetDisabledState=i,this._submitted=f2(()=>this.submittedReactive()),this.submittedReactive=g1(!1),this._directives=new Set,this.ngSubmit=new Y1,this.form=new f3({},x0(e),N0(c))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){D3.then(()=>{let c=this._findContainer(e.path);e.control=c.registerControl(e.name,e.control),v0(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){D3.then(()=>{let c=this._findContainer(e.path);c&&c.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){D3.then(()=>{let c=this._findContainer(e.path),i=new f3({});d5(i,e),c.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){D3.then(()=>{let c=this._findContainer(e.path);c&&c.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,c){D3.then(()=>{this.form.get(e.path).setValue(c)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),p5(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}};t.\u0275fac=function(c){return new(c||t)(F(y0,10),F(b0,10),F(R3,8))},t.\u0275dir=Z({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(c,i){c&1&&T("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[U1([tc]),v1]});let s=t;return s})();function Q8(s,t){let n=s.indexOf(t);n>-1&&s.splice(n,1)}function Z8(s){return typeof s=="object"&&s!==null&&Object.keys(s).length===2&&"value"in s&&"disabled"in s}var r1=class extends o3{constructor(t=null,n,e){super(w0(n),k0(e,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),C4(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Z8(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(e=>e(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Q8(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Q8(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Z8(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var sc=s=>s instanceof r1;var p3=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=Z({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let s=t;return s})(),nc={provide:O2,useExisting:_1(()=>I0),multi:!0},I0=(()=>{let t=class t extends m3{writeValue(e){let c=e??"";this.setProperty("value",c)}registerOnChange(e){this.onChange=c=>{e(c==""?null:parseFloat(c))}}};t.\u0275fac=(()=>{let e;return function(i){return(e||(e=P2(t)))(i||t)}})(),t.\u0275dir=Z({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(c,i){c&1&&T("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[U1([nc]),v1]});let s=t;return s})(),ic={provide:O2,useExisting:_1(()=>V0),multi:!0};var lc=(()=>{let t=class t{constructor(){this._accessors=[]}add(e,c){this._accessors.push([e,c])}remove(e){for(let c=this._accessors.length-1;c>=0;--c)if(this._accessors[c][1]===e){this._accessors.splice(c,1);return}}select(e){this._accessors.forEach(c=>{this._isSameGroup(c,e)&&c[1]!==e&&c[1].fireUncheck(e.value)})}_isSameGroup(e,c){return e[0].control?e[0]._parent===c._control._parent&&e[1].name===c.name:!1}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),V0=(()=>{let t=class t extends m3{constructor(e,c,i,l){super(e,c),this._registry=i,this._injector=l,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=r(R3,{optional:!0})??_3}ngOnInit(){this._control=this._injector.get(r3),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};t.\u0275fac=function(c){return new(c||t)(F(o2),F(O1),F(lc),F(Z2))},t.\u0275dir=Z({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(c,i){c&1&&T("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[U1([ic]),v1]});let s=t;return s})();var h5=new u1("");var ac={provide:M2,useExisting:_1(()=>n2)},n2=(()=>{let t=class t extends M2{get submitted(){return I1(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,c,i){super(),this.callSetDisabledState=i,this._submitted=f2(()=>this._submittedReactive()),this._submittedReactive=g1(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Y1,this._setValidators(e),this._setAsyncValidators(c)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(z4(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let c=this.form.get(e.path);return v0(c,e,this.callSetDisabledState),c.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),c}getControl(e){return this.form.get(e.path)}removeControl(e){$8(e.control||null,e,!1),cc(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,c){this.form.get(e.path).setValue(c)}onSubmit(e){return this._submittedReactive.set(!0),p5(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new L0(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new M0(this.form))}_updateDomValue(){this.directives.forEach(e=>{let c=e.control,i=this.form.get(e.path);c!==i&&($8(c||null,e),sc(i)&&(v0(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let c=this.form.get(e.path);d5(c,e),c.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let c=this.form.get(e.path);c&&X9(c,e)&&c.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){A0(this.form,this),this._oldForm&&z4(this._oldForm,this)}_checkFormPresent(){this.form}};t.\u0275fac=function(c){return new(c||t)(F(y0,10),F(b0,10),F(R3,8))},t.\u0275dir=Z({type:t,selectors:[["","formGroup",""]],hostBindings:function(c,i){c&1&&T("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[U1([ac]),v1,r2]});let s=t;return s})();var rc={provide:r3,useExisting:_1(()=>q2)},q2=(()=>{let t=class t extends r3{set isDisabled(e){}constructor(e,c,i,l,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Y1,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(c),this._setAsyncValidators(i),this.valueAccessor=ec(this,l)}ngOnChanges(e){this._added||this._setUpControl(),Y9(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return G9(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(c){return new(c||t)(F(M2,13),F(y0,10),F(b0,10),F(O2,10),F(h5,8))},t.\u0275dir=Z({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[U1([rc]),v1,r2]});let s=t;return s})(),oc={provide:O2,useExisting:_1(()=>L4),multi:!0};function z5(s,t){return s==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${s}: ${t}`.slice(0,50))}function fc(s){return s.split(":")[0]}var L4=(()=>{let t=class t extends m3{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let c=this._getOptionId(e),i=z5(c,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=c=>{this.value=this._getOptionValue(c),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let c of this._optionMap.keys())if(this._compareWith(this._optionMap.get(c),e))return c;return null}_getOptionValue(e){let c=fc(e);return this._optionMap.has(c)?this._optionMap.get(c):e}};t.\u0275fac=(()=>{let e;return function(i){return(e||(e=P2(t)))(i||t)}})(),t.\u0275dir=Z({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(c,i){c&1&&T("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[U1([oc]),v1]});let s=t;return s})(),C5=(()=>{let t=class t{constructor(e,c,i){this._element=e,this._renderer=c,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(z5(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(c){return new(c||t)(F(O1),F(o2),F(L4,9))},t.\u0275dir=Z({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let s=t;return s})(),mc={provide:O2,useExisting:_1(()=>L5),multi:!0};function K8(s,t){return s==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${s}: ${t}`.slice(0,50))}function uc(s){return s.split(":")[0]}var L5=(()=>{let t=class t extends m3{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let c;if(Array.isArray(e)){let i=e.map(l=>this._getOptionId(l));c=(l,a)=>{l._setSelected(i.indexOf(a.toString())>-1)}}else c=(i,l)=>{i._setSelected(!1)};this._optionMap.forEach(c)}registerOnChange(e){this.onChange=c=>{let i=[],l=c.selectedOptions;if(l!==void 0){let a=l;for(let o=0;o<a.length;o++){let u=a[o],p=this._getOptionValue(u.value);i.push(p)}}else{let a=c.options;for(let o=0;o<a.length;o++){let u=a[o];if(u.selected){let p=this._getOptionValue(u.value);i.push(p)}}}this.value=i,e(i)}}_registerOption(e){let c=(this._idCounter++).toString();return this._optionMap.set(c,e),c}_getOptionId(e){for(let c of this._optionMap.keys())if(this._compareWith(this._optionMap.get(c)._value,e))return c;return null}_getOptionValue(e){let c=uc(e);return this._optionMap.has(c)?this._optionMap.get(c)._value:e}};t.\u0275fac=(()=>{let e;return function(i){return(e||(e=P2(t)))(i||t)}})(),t.\u0275dir=Z({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(c,i){c&1&&T("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[U1([mc]),v1]});let s=t;return s})(),M5=(()=>{let t=class t{constructor(e,c,i){this._element=e,this._renderer=c,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(K8(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(K8(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(c){return new(c||t)(F(O1),F(o2),F(L5,9))},t.\u0275dir=Z({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let s=t;return s})();var g5=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=V2({type:t}),t.\u0275inj=I2({});let s=t;return s})(),S0=class extends o3{constructor(t,n,e){super(w0(n),k0(e,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,e={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent})}removeAt(t,n={}){let e=this._adjustIndex(t);e<0&&(e=0),this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,e={}){let c=this._adjustIndex(t);c<0&&(c=0),this.controls[c]&&this.controls[c]._registerOnCollectionChange(()=>{}),this.controls.splice(c,1),n&&(this.controls.splice(c,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){m5(this,!1,t),t.forEach((e,c)=>{f5(this,!1,c),this.at(c).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((e,c)=>{this.at(c)&&this.at(c).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((e,c)=>{e.reset(t[c],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,e)=>e._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,e)=>{t(n,e)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function X8(s){return!!s&&(s.asyncValidators!==void 0||s.validators!==void 0||s.updateOn!==void 0)}var h3=(()=>{let t=class t{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new t;return e.useNonNullable=!0,e}group(e,c=null){let i=this._reduceControls(e),l={};return X8(c)?l=c:c!==null&&(l.validators=c.validator,l.asyncValidators=c.asyncValidator),new f3(i,l)}record(e,c=null){let i=this._reduceControls(e);return new g0(i,c)}control(e,c,i){let l={};return this.useNonNullable?(X8(c)?l=c:(l.validators=c,l.asyncValidators=i),new r1(e,D(C({},l),{nonNullable:!0}))):new r1(e,c,i)}array(e,c,i){let l=e.map(a=>this._createControl(a));return new S0(l,c,i)}_reduceControls(e){let c={};return Object.keys(e).forEach(i=>{c[i]=this._createControl(e[i])}),c}_createControl(e){if(e instanceof r1)return e;if(e instanceof o3)return e;if(Array.isArray(e)){let c=e[0],i=e.length>1?e[1]:null,l=e.length>2?e[2]:null;return this.control(c,i,l)}else return this.control(e)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var v5=(()=>{let t=class t{static withConfig(e){return{ngModule:t,providers:[{provide:R3,useValue:e.callSetDisabledState??_3}]}}};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=V2({type:t}),t.\u0275inj=I2({imports:[g5]});let s=t;return s})(),z3=(()=>{let t=class t{static withConfig(e){return{ngModule:t,providers:[{provide:h5,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:R3,useValue:e.callSetDisabledState??_3}]}}};t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=V2({type:t}),t.\u0275inj=I2({imports:[g5]});let s=t;return s})();function D0(s){s||(F1(D0),s=r(D2));let t=new w2(n=>s.onDestroy(n.next.bind(n)));return n=>n.pipe(Z3(t))}function S2(s,t){!t?.injector&&F1(S2);let n=t?.injector??r(Z2),e=new W2(1),c=d1(()=>{let i;try{i=s()}catch(l){I1(()=>e.error(l));return}I1(()=>e.next(i))},{injector:n,manualCleanup:!0});return n.get(D2).onDestroy(()=>{c.destroy(),e.complete()}),e.asObservable()}function y1(s,t){let n=!t?.manualCleanup;n&&!t?.injector&&F1(y1);let e=n?t?.injector?.get(D2)??r(D2):null,c=dc(t?.equal),i;t?.requireSync?i=g1({kind:0},{equal:c}):i=g1({kind:1,value:t?.initialValue},{equal:c});let l=s.subscribe({next:a=>i.set({kind:1,value:a}),error:a=>{if(t?.rejectErrors)throw a;i.set({kind:2,error:a})}});if(t?.requireSync&&i().kind===0)throw new E2(601,!1);return e?.onDestroy(l.unsubscribe.bind(l)),f2(()=>{let a=i();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new E2(601,!1)}},{equal:t?.equal})}function dc(s=Object.is){return(t,n)=>t.kind===1&&n.kind===1&&s(t.value,n.value)}var S5=()=>E1(s=>s!=null);var pc=s=>{let t=new P1(s.touched),n=s.markAsTouched.bind(s),e=s.markAsUntouched.bind(s);return s.markAsTouched=(...c)=>{n(...c),t.next(!0)},s.markAsUntouched=(...c)=>{e(...c),t.next(!1)},t.pipe(G2())},hc=(s,t)=>j3([s.valueChanges.pipe(Q3(s.value)),s.statusChanges.pipe(Q3(s.status),G2()),pc(s),t?.ngSubmit.pipe(k(()=>!0),Q3(t.submitted),G2())??b(!1)],(n,e,c,i)=>e==="INVALID"&&(c||i)),zc=new u1("NGX_CONTROL_ERROR_STATE_MATCHER",{factory:()=>hc}),Cc=new u1("NGX_CONTROL_ERROR_PARENT");var M4=(()=>{let t=class t{constructor(){this.templateRef=r(X3),this.viewContainerRef=r(f6),this.track$=g1(void 0),this.parent$=g1(r(Cc,{optional:!0})??r(n2,{optional:!0})??r(E0,{optional:!0})??void 0),this.control$=g1(void 0),this.errorStateMatcher$=g1(r(zc)),this._hasError$=j3([S2(this.track$),S2(this.errorStateMatcher$),S2(this.control$).pipe(S5()),S2(this.parent$)]).pipe(L(([e,c,i,l])=>c(i,l).pipe(k(a=>a&&e!=null&&i!=null&&(typeof e=="string"?i.hasError(e):e.some(o=>i.hasError(o)))))),i6(1)),this.hasError$=y1(this._hasError$,{initialValue:!1}),j3([S2(this.track$),S2(this.control$),this._hasError$],(e,c,i)=>{this.viewContainerRef.clear(),i&&c!=null&&e!=null&&this.viewContainerRef.createEmbeddedView(this.templateRef,{$implicit:c.errors??{},track:e,control:c})}).pipe(D0()).subscribe()}set track(e){this.track$.set(e)}get track(){return this.track$()}set control(e){this.control$.set(e)}get control(){return this.control$()}set errorStateMatcher(e){this.errorStateMatcher$.set(e)}get errorStateMatcher(){return this.errorStateMatcher$()}set parent(e){this.parent$.set(e)}get parent(){return this.parent$()}get context(){return this.viewContainerRef.get(0)?.context}};t.ngTemplateContextGuard=(e,c)=>!0,t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=Z({type:t,selectors:[["","ngxControlError",""]],inputs:{track:[0,"ngxControlErrorTrack","track"],control:[0,"ngxControlError","control"],errorStateMatcher:[0,"ngxControlErrorErrorStateMatcher","errorStateMatcher"],parent:[0,"ngxControlErrorParent","parent"]},standalone:!0});let s=t;return s})();function Lc(s,t){s&1&&(f(0,"span",10),d(1," Name is required "),m())}function Mc(s,t){s&1&&g(0,"span",9)}var y5=(()=>{class s{formBuilder=r(h3);productService=r(u2);toastService=r(M1);router=r(V1);name=new r1("",{nonNullable:!0,validators:[L1.required]});createForm=this.formBuilder.nonNullable.group({name:this.name});loading=!1;createMutation=G1(()=>({mutationFn:n=>$(this.productService.createCategory(n)),onSettled:()=>this.onCreationSettled(),onSuccess:()=>this.onCreationSuccess(),onError:()=>this.onCreationError()}));create(){let n={name:this.createForm.getRawValue().name};this.loading=!0,this.createMutation.mutate(n)}onCreationSettled(){this.loading=!1}onCreationSuccess(){this.toastService.show("Category created","SUCCESS"),this.router.navigate(["/admin/categories/list"])}onCreationError(){this.toastService.show("Issue when creating category","ERROR")}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-create-category"]],standalone:!0,features:[_],decls:16,vars:7,consts:[[1,"grid","grid-cols-3"],["id","createForm",3,"ngSubmit","formGroup"],[1,"text-lg","font-bold"],[1,"form-control","w-full"],[1,"label"],[1,"label-text"],["type","text","placeholder","Type name here","formControlName","name",1,"input","input-bordered","w-full"],["class","label-text-alt text-red-600",4,"ngxControlError","ngxControlErrorTrack"],["type","submit",1,"btn","btn-primary","btn-wide","w-full",3,"disabled"],[1,"loading","loading-spinner"],[1,"label-text-alt","text-red-600"]],template:function(e,c){e&1&&(f(0,"div",0),g(1,"div"),f(2,"form",1),T("ngSubmit",function(){return c.create()}),f(3,"h1",2),d(4,"Create new category"),m(),f(5,"label",3)(6,"div",4)(7,"span",5),d(8,"Name"),m()(),g(9,"input",6),f(10,"div",4),V(11,Lc,2,0,"span",7),m()(),f(12,"button",8),V(13,Mc,1,0,"span",9),d(14," Create category "),m()(),g(15,"div"),m()),e&2&&(h(2),N("formGroup",c.createForm),h(7),S1("input-error",c.name.invalid&&!c.name.untouched),h(2),N("ngxControlError",c.name)("ngxControlErrorTrack","required"),h(),N("disabled",c.createForm.invalid),h(),q(c.loading?13:-1))},dependencies:[U,z3,p3,v2,u3,d3,n2,q2,M4]})}return s})();function gc(s,t,n){var e;if(n===void 0&&(n={}),!t.codes){t.codes={};for(var c=0;c<t.chars.length;++c)t.codes[t.chars[c]]=c}if(!n.loose&&s.length*t.bits&7)throw new SyntaxError("Invalid padding");for(var i=s.length;s[i-1]==="=";)if(--i,!n.loose&&!((s.length-i)*t.bits&7))throw new SyntaxError("Invalid padding");for(var l=new((e=n.out)!=null?e:Uint8Array)(i*t.bits/8|0),a=0,o=0,u=0,p=0;p<i;++p){var z=t.codes[s[p]];if(z===void 0)throw new SyntaxError("Invalid character "+s[p]);o=o<<t.bits|z,a+=t.bits,a>=8&&(a-=8,l[u++]=255&o>>a)}if(a>=t.bits||255&o<<8-a)throw new SyntaxError("Unexpected end of data");return l}function vc(s,t,n){n===void 0&&(n={});for(var e=n,c=e.pad,i=c===void 0?!0:c,l=(1<<t.bits)-1,a="",o=0,u=0,p=0;p<s.length;++p)for(u=u<<8|255&s[p],o+=8;o>t.bits;)o-=t.bits,a+=t.chars[l&u>>o];if(o&&(a+=t.chars[l&u<<t.bits-o]),i)for(;a.length*t.bits&7;)a+="=";return a}var b5={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};var x5={parse:function(t,n){return gc(t,b5,n)},stringify:function(t,n){return vc(t,b5,n)}};var g4=class{},H0=class{constructor(t){this.passedConfigs=t}loadConfigs(){return Array.isArray(this.passedConfigs)?b(this.passedConfigs):b([this.passedConfigs])}};function Sc(s){if(!s?.config)throw new Error("No config provided!");return new H0(s.config)}var N5=new u1("PASSED_CONFIG"),I5=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),yc=(()=>{let t=class t{logError(e,...c){console.error(e,...c)}logWarning(e,...c){console.warn(e,...c)}logDebug(e,...c){console.debug(e,...c)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),S4=(()=>{let t=class t{};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),bc=(()=>{let t=class t{read(e){return sessionStorage.getItem(e)}write(e,c){sessionStorage.setItem(e,c)}remove(e){sessionStorage.removeItem(e)}clear(){sessionStorage.clear()}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function V5(s){return K3([...xc(s)])}function xc(s){return[{provide:N5,useValue:s},s?.loader||{provide:g4,useFactory:Sc,deps:[N5]},{provide:S4,useClass:bc},{provide:I5,useClass:yc}]}var U2=function(s){return s[s.None=0]="None",s[s.Debug=1]="Debug",s[s.Warn=2]="Warn",s[s.Error=3]="Error",s}(U2||{}),H=(()=>{let t=class t{constructor(){this.abstractLoggerService=r(I5)}logError(e,c,...i){if(this.loggingIsTurnedOff(e))return;let{configId:l}=e,a=this.isObject(c)?JSON.stringify(c):c;i&&i.length?this.abstractLoggerService.logError(`[ERROR] ${l} - ${a}`,...i):this.abstractLoggerService.logError(`[ERROR] ${l} - ${a}`)}logWarning(e,c,...i){if(!this.logLevelIsSet(e)||this.loggingIsTurnedOff(e)||!this.currentLogLevelIsEqualOrSmallerThan(e,U2.Warn))return;let{configId:l}=e,a=this.isObject(c)?JSON.stringify(c):c;i&&i.length?this.abstractLoggerService.logWarning(`[WARN] ${l} - ${a}`,...i):this.abstractLoggerService.logWarning(`[WARN] ${l} - ${a}`)}logDebug(e,c,...i){if(!e||!this.logLevelIsSet(e)||this.loggingIsTurnedOff(e)||!this.currentLogLevelIsEqualOrSmallerThan(e,U2.Debug))return;let{configId:l}=e,a=this.isObject(c)?JSON.stringify(c):c;i&&i.length?this.abstractLoggerService.logDebug(`[DEBUG] ${l} - ${a}`,...i):this.abstractLoggerService.logDebug(`[DEBUG] ${l} - ${a}`)}currentLogLevelIsEqualOrSmallerThan(e,c){let{logLevel:i}=e||{};return i?i<=c:!1}logLevelIsSet(e){let{logLevel:c}=e||{};return c===null?!1:c!==void 0}loggingIsTurnedOff(e){let{logLevel:c}=e||{};return c===U2.None}isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Nc=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.abstractSecurityStorage=r(S4)}read(e,c){let{configId:i}=c;if(!i)return this.loggerService.logDebug(c,`Wanted to read '${e}' but configId was '${i}'`),null;if(!this.hasStorage())return this.loggerService.logDebug(c,`Wanted to read '${e}' but Storage was undefined`),null;let l=this.abstractSecurityStorage.read(i);return l?JSON.parse(l):null}write(e,c){let{configId:i}=c;return i?this.hasStorage()?(e=e||null,this.abstractSecurityStorage.write(i,JSON.stringify(e)),!0):(this.loggerService.logDebug(c,"Wanted to write but Storage was falsy"),!1):(this.loggerService.logDebug(c,`Wanted to write but configId was '${i}'`),!1)}remove(e,c){return this.hasStorage()?(this.abstractSecurityStorage.remove(e),!0):(this.loggerService.logDebug(c,`Wanted to remove '${e}' but Storage was falsy`),!1)}clear(e){return this.hasStorage()?(this.abstractSecurityStorage.clear(),!0):(this.loggerService.logDebug(e,"Wanted to clear storage but Storage was falsy"),!1)}hasStorage(){return typeof Storage<"u"}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),o1=(()=>{let t=class t{constructor(){this.browserStorageService=r(Nc)}read(e,c){return(this.browserStorageService.read(e,c)||{})[e]}write(e,c,i){let l=this.browserStorageService.read(e,i)||{};return l[e]=c,this.browserStorageService.write(l,i)}remove(e,c){let i=this.browserStorageService.read(e,c)||{};delete i[e],this.browserStorageService.write(i,c)}clear(e){this.browserStorageService.clear(e)}resetStorageFlowData(e){this.remove("session_state",e),this.remove("storageSilentRenewRunning",e),this.remove("storageCodeFlowInProgress",e),this.remove("codeVerifier",e),this.remove("userData",e),this.remove("storageCustomParamsAuthRequest",e),this.remove("access_token_expires_at",e),this.remove("storageCustomParamsRefresh",e),this.remove("storageCustomParamsEndSession",e),this.remove("reusable_refresh_token",e)}resetAuthStateInStorage(e){this.remove("authzData",e),this.remove("reusable_refresh_token",e),this.remove("authnResult",e)}getAccessToken(e){return this.read("authzData",e)}getIdToken(e){return this.read("authnResult",e)?.id_token}getRefreshToken(e){let c=this.read("authnResult",e)?.refresh_token;return!c&&e.allowUnsafeReuseRefreshToken?this.read("reusable_refresh_token",e):c}getAuthenticationResult(e){return this.read("authnResult",e)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),F0="redirect",wc=(()=>{let t=class t{constructor(){this.storageService=r(o1),this.router=r(V1)}checkSavedRedirectRouteAndNavigate(e){if(!e)return;let c=this.getStoredRedirectRoute(e);c!=null&&(this.deleteStoredRedirectRoute(e),this.router.navigateByUrl(c))}saveRedirectRoute(e,c){e&&this.storageService.write(F0,c,e)}getStoredRedirectRoute(e){return this.storageService.read(F0,e)}deleteStoredRedirectRoute(e){this.storageService.remove(F0,e)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),y2=(()=>{let t=class t{isCurrentFlowCodeFlow(e){return this.currentFlowIs("code",e)}isCurrentFlowAnyImplicitFlow(e){return this.isCurrentFlowImplicitFlowWithAccessToken(e)||this.isCurrentFlowImplicitFlowWithoutAccessToken(e)}isCurrentFlowCodeFlowWithRefreshTokens(e){if(!e)return!1;let{useRefreshToken:c}=e;return this.isCurrentFlowCodeFlow(e)&&!!c}isCurrentFlowImplicitFlowWithAccessToken(e){return this.currentFlowIs("id_token token",e)}currentFlowIs(e,c){let{responseType:i}=c;return Array.isArray(e)?e.some(l=>i===l):i===e}isCurrentFlowImplicitFlowWithoutAccessToken(e){return this.currentFlowIs("id_token",e)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),R0=(()=>{let t=class t{constructor(){this.document=r(C1)}getCrypto(){return this.document.defaultView?.crypto||this.document.defaultView?.msCrypto}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),kc=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.cryptoService=r(R0)}createRandom(e,c){if(e<=0)return"";e>0&&e<7&&(this.loggerService.logWarning(c,`RandomService called with ${e} but 7 chars is the minimum, returning 10 chars`),e=10);let i=e-6,l=new Uint8Array(Math.floor(i/2)),a=this.cryptoService.getCrypto();return a&&a.getRandomValues(l),Array.from(l,this.toHex).join("")+this.randomString(7)}toHex(e){return("0"+e.toString(16)).substr(-2)}randomString(e){let c="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=new Uint32Array(e),a=this.cryptoService.getCrypto();if(a){a.getRandomValues(l);for(let o=0;o<e;o++)c+=i[l[o]%i.length]}return c}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),x1=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.storagePersistenceService=r(o1),this.randomService=r(kc)}createNonce(e){let c=this.randomService.createRandom(40,e);return this.loggerService.logDebug(e,"Nonce created. nonce:"+c),this.setNonce(c,e),c}setNonce(e,c){this.storagePersistenceService.write("authNonce",e,c)}getAuthStateControl(e){return e?this.storagePersistenceService.read("authStateControl",e):""}setAuthStateControl(e,c){return c?this.storagePersistenceService.write("authStateControl",e,c):!1}getExistingOrCreateAuthStateControl(e){let c=this.storagePersistenceService.read("authStateControl",e);return c||(c=this.randomService.createRandom(40,e),this.storagePersistenceService.write("authStateControl",c,e)),c}setSessionState(e,c){this.storagePersistenceService.write("session_state",e,c)}resetStorageFlowData(e){this.storagePersistenceService.resetStorageFlowData(e)}getCodeVerifier(e){return this.storagePersistenceService.read("codeVerifier",e)}createCodeVerifier(e){let c=this.randomService.createRandom(67,e);return this.storagePersistenceService.write("codeVerifier",c,e),c}isCodeFlowInProgress(e){return!!this.storagePersistenceService.read("storageCodeFlowInProgress",e)}setCodeFlowInProgress(e){this.storagePersistenceService.write("storageCodeFlowInProgress",!0,e)}resetCodeFlowInProgress(e){this.storagePersistenceService.write("storageCodeFlowInProgress",!1,e)}isSilentRenewRunning(e){let{configId:c,silentRenewTimeoutInSeconds:i}=e,l=this.getSilentRenewRunningStorageEntry(e);if(!l||l.state==="not-running")return!1;let a=(i??0)*1e3,o=Date.parse(l.dateOfLaunchedProcessUtc),u=Date.parse(new Date().toISOString());return Math.abs(u-o)>a?(this.loggerService.logDebug(e,"silent renew process is probably stuck, state will be reset.",c),this.resetSilentRenewRunning(e),!1):l.state==="running"}setSilentRenewRunning(e){let c={state:"running",dateOfLaunchedProcessUtc:new Date().toISOString()};this.storagePersistenceService.write("storageSilentRenewRunning",JSON.stringify(c),e)}resetSilentRenewRunning(e){e&&this.storagePersistenceService.write("storageSilentRenewRunning","",e)}getSilentRenewRunningStorageEntry(e){let c=this.storagePersistenceService.read("storageSilentRenewRunning",e);return c?JSON.parse(c):{dateOfLaunchedProcessUtc:"",state:"not-running"}}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),P5=(()=>{let t=class t{constructor(){this.cryptoService=r(R0)}generateCodeChallenge(e){return this.calcHash(e).pipe(k(c=>this.base64UrlEncode(c)))}generateAtHash(e,c){return this.calcHash(e,c).pipe(k(i=>{let l=i.substr(0,i.length/2);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}))}calcHash(e,c="SHA-256"){let i=new TextEncoder().encode(e);return S(this.cryptoService.getCrypto().subtle.digest(c,i)).pipe(k(l=>{let a=l,o=Array.from(new Uint8Array(a));return this.toHashString(o)}))}toHashString(e){let c="";for(let i of e)c+=String.fromCharCode(i);return c}base64UrlEncode(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),T0=class{encodeKey(t){return encodeURIComponent(t)}encodeValue(t){return encodeURIComponent(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}},Ac=["code","state","token","id_token"],Ec="auth0.com",K1=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.flowsDataService=r(x1),this.flowHelper=r(y2),this.storagePersistenceService=r(o1),this.jwtWindowCryptoService=r(P5)}getUrlParameter(e,c){if(!e||!c)return"";c=c.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");let l=new RegExp("[\\?&#]"+c+"=([^&#]*)").exec(e);return l===null?"":decodeURIComponent(l[1])}isCallbackFromSts(e){return Ac.some(c=>!!this.getUrlParameter(e,c))}getRefreshSessionSilentRenewUrl(e,c){return this.flowHelper.isCurrentFlowCodeFlow(e)?this.createUrlCodeFlowWithSilentRenew(e,c):b(this.createUrlImplicitFlowWithSilentRenew(e,c))}getAuthorizeParUrl(e,c){let i=this.storagePersistenceService.read("authWellKnownEndPoints",c);if(!i)return this.loggerService.logError(c,"authWellKnownEndpoints is undefined"),null;let l=i.authorizationEndpoint;if(!l)return this.loggerService.logError(c,`Can not create an authorize URL when authorizationEndpoint is '${l}'`),null;let{clientId:a}=c;if(!a)return this.loggerService.logError(c,"getAuthorizeParUrl could not add clientId because it was: ",a),null;let o=l.split("?"),u=o[0],p=o[1],z=this.createHttpParams(p);return z=z.set("request_uri",e),z=z.append("client_id",a),`${u}?${z}`}getAuthorizeUrl(e,c){return e?this.flowHelper.isCurrentFlowCodeFlow(e)?this.createUrlCodeFlowAuthorize(e,c):b(this.createUrlImplicitFlowAuthorize(e,c)||""):b(null)}getEndSessionEndpoint(e){let i=this.storagePersistenceService.read("authWellKnownEndPoints",e)?.endSessionEndpoint;if(!i)return{url:"",existingParams:""};let l=i.split("?"),a=l[0],o=l[1]??"";return{url:a,existingParams:o}}getEndSessionUrl(e,c){if(!e)return null;let i=this.storagePersistenceService.getIdToken(e),{customParamsEndSessionRequest:l}=e,a=C(C({},l),c);return this.createEndSessionUrl(i,e,a)}createRevocationEndpointBodyAccessToken(e,c){let i=this.getClientId(c);if(!i)return null;let l=this.createHttpParams();return l=l.set("client_id",i),l=l.set("token",e),l=l.set("token_type_hint","access_token"),l.toString()}createRevocationEndpointBodyRefreshToken(e,c){let i=this.getClientId(c);if(!i)return null;let l=this.createHttpParams();return l=l.set("client_id",i),l=l.set("token",e),l=l.set("token_type_hint","refresh_token"),l.toString()}getRevocationEndpointUrl(e){let i=this.storagePersistenceService.read("authWellKnownEndPoints",e)?.revocationEndpoint;return i?i.split("?")[0]:null}createBodyForCodeFlowCodeRequest(e,c,i){let l=this.getClientId(c);if(!l)return null;let a=this.createHttpParams();if(a=a.set("grant_type","authorization_code"),a=a.set("client_id",l),!c.disablePkce){let p=this.flowsDataService.getCodeVerifier(c);if(!p)return this.loggerService.logError(c,"CodeVerifier is not set ",p),null;a=a.set("code_verifier",p)}a=a.set("code",e),i&&(a=this.appendCustomParams(C({},i),a));let o=this.getSilentRenewUrl(c);if(this.flowsDataService.isSilentRenewRunning(c)&&o)return a=a.set("redirect_uri",o),a.toString();let u=this.getRedirectUrl(c);return u?(a=a.set("redirect_uri",u),a.toString()):null}createBodyForCodeFlowRefreshTokensRequest(e,c,i){let l=this.getClientId(c);if(!l)return null;let a=this.createHttpParams();return a=a.set("grant_type","refresh_token"),a=a.set("client_id",l),a=a.set("refresh_token",e),i&&(a=this.appendCustomParams(C({},i),a)),a.toString()}createBodyForParCodeFlowRequest(e,c){let i=this.getRedirectUrl(e,c);if(!i)return b(null);let l=this.flowsDataService.getExistingOrCreateAuthStateControl(e),a=this.flowsDataService.createNonce(e);this.loggerService.logDebug(e,"Authorize created. adding myautostate: "+l);let o=this.flowsDataService.createCodeVerifier(e);return this.jwtWindowCryptoService.generateCodeChallenge(o).pipe(k(u=>{let{clientId:p,responseType:z,scope:v,hdParam:E,customParamsAuthRequest:W}=e,I=this.createHttpParams("");return I=I.set("client_id",p??""),I=I.append("redirect_uri",i),I=I.append("response_type",z??""),I=I.append("scope",v??""),I=I.append("nonce",a),I=I.append("state",l),I=I.append("code_challenge",u),I=I.append("code_challenge_method","S256"),E&&(I=I.append("hd",E)),W&&(I=this.appendCustomParams(C({},W),I)),c?.customParams&&(I=this.appendCustomParams(C({},c.customParams),I)),I.toString()}))}getPostLogoutRedirectUrl(e){let{postLogoutRedirectUri:c}=e;return c||(this.loggerService.logError(e,"could not get postLogoutRedirectUri, was: ",c),null)}createEndSessionUrl(e,c,i){if(this.isAuth0Endpoint(c))return this.composeAuth0Endpoint(c);let{url:l,existingParams:a}=this.getEndSessionEndpoint(c);if(!l)return null;let o=this.createHttpParams(a);e&&(o=o.set("id_token_hint",e));let u=this.getPostLogoutRedirectUrl(c);return u&&(o=o.append("post_logout_redirect_uri",u)),i&&(o=this.appendCustomParams(C({},i),o)),`${l}?${o}`}createAuthorizeUrl(e,c,i,l,a,o,u){let z=this.storagePersistenceService.read("authWellKnownEndPoints",a)?.authorizationEndpoint;if(!z)return this.loggerService.logError(a,`Can not create an authorize URL when authorizationEndpoint is '${z}'`),"";let{clientId:v,responseType:E,scope:W,hdParam:I,customParamsAuthRequest:f1}=a;if(!v)return this.loggerService.logError(a,"createAuthorizeUrl could not add clientId because it was: ",v),"";if(!E)return this.loggerService.logError(a,"createAuthorizeUrl could not add responseType because it was: ",E),"";if(!W)return this.loggerService.logError(a,"createAuthorizeUrl could not add scope because it was: ",W),"";let n1=z.split("?"),i1=n1[0],h1=n1[1],O=this.createHttpParams(h1);O=O.set("client_id",v),O=O.append("redirect_uri",c),O=O.append("response_type",E),O=O.append("scope",W),O=O.append("nonce",i),O=O.append("state",l),this.flowHelper.isCurrentFlowCodeFlow(a)&&(O=O.append("code_challenge",e),O=O.append("code_challenge_method","S256"));let X1=C(C({},f1),u);return Object.keys(X1).length>0&&(O=this.appendCustomParams(C({},X1),O)),o&&(O=this.overWriteParam(O,"prompt",o)),I&&(O=O.append("hd",I)),`${i1}?${O}`}createUrlImplicitFlowWithSilentRenew(e,c){let i=this.flowsDataService.getExistingOrCreateAuthStateControl(e),l=this.flowsDataService.createNonce(e),a=this.getSilentRenewUrl(e);return a?(this.loggerService.logDebug(e,"RefreshSession created. adding myautostate: ",i),this.storagePersistenceService.read("authWellKnownEndPoints",e)?this.createAuthorizeUrl("",a,l,i,e,"none",c):(this.loggerService.logError(e,"authWellKnownEndpoints is undefined"),null)):null}createUrlCodeFlowWithSilentRenew(e,c){let i=this.flowsDataService.getExistingOrCreateAuthStateControl(e),l=this.flowsDataService.createNonce(e);this.loggerService.logDebug(e,"RefreshSession created. adding myautostate: "+i);let a=this.flowsDataService.createCodeVerifier(e);return this.jwtWindowCryptoService.generateCodeChallenge(a).pipe(k(o=>{let u=this.getSilentRenewUrl(e);return u?this.storagePersistenceService.read("authWellKnownEndPoints",e)?this.createAuthorizeUrl(o,u,l,i,e,"none",c):(this.loggerService.logWarning(e,"authWellKnownEndpoints is undefined"),""):""}))}createUrlImplicitFlowAuthorize(e,c){let i=this.flowsDataService.getExistingOrCreateAuthStateControl(e),l=this.flowsDataService.createNonce(e);this.loggerService.logDebug(e,"Authorize created. adding myautostate: "+i);let a=this.getRedirectUrl(e,c);if(!a)return null;if(this.storagePersistenceService.read("authWellKnownEndPoints",e)){let{customParams:u}=c||{};return this.createAuthorizeUrl("",a,l,i,e,"",u)}return this.loggerService.logError(e,"authWellKnownEndpoints is undefined"),null}createUrlCodeFlowAuthorize(e,c){let i=this.flowsDataService.getExistingOrCreateAuthStateControl(e),l=this.flowsDataService.createNonce(e);this.loggerService.logDebug(e,"Authorize created. adding myautostate: "+i);let a=this.getRedirectUrl(e,c);return a?this.getCodeChallenge(e).pipe(k(o=>{if(this.storagePersistenceService.read("authWellKnownEndPoints",e)){let{customParams:p}=c||{};return this.createAuthorizeUrl(o,a,l,i,e,"",p)}return this.loggerService.logError(e,"authWellKnownEndpoints is undefined"),""})):b(null)}getCodeChallenge(e){if(e.disablePkce)return b("");let c=this.flowsDataService.createCodeVerifier(e);return this.jwtWindowCryptoService.generateCodeChallenge(c)}getRedirectUrl(e,c){let{redirectUrl:i}=e;return c?.redirectUrl&&(i=c.redirectUrl),i||(this.loggerService.logError(e,"could not get redirectUrl, was: ",i),null)}getSilentRenewUrl(e){let{silentRenewUrl:c}=e;return c||(this.loggerService.logError(e,"could not get silentRenewUrl, was: ",c),null)}getClientId(e){let{clientId:c}=e;return c||(this.loggerService.logError(e,"could not get clientId, was: ",c),null)}appendCustomParams(e,c){for(let[i,l]of Object.entries(C({},e)))c=c.append(i,l.toString());return c}overWriteParam(e,c,i){return e.set(c,i)}createHttpParams(e){return e=e??"",new e2({fromString:e,encoder:new T0})}isAuth0Endpoint(e){let{authority:c,useCustomAuth0Domain:i}=e;return c?c.endsWith(Ec)||!!i:!1}composeAuth0Endpoint(e){let{authority:c,clientId:i}=e,l=this.getPostLogoutRedirectUrl(e);return`${c}/v2/logout?client_id=${i}&returnTo=${l}`}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Ic=(()=>{let t=class t{constructor(){this.http=r(j1)}get(e,c){return this.http.get(e,c)}post(e,c,i){return this.http.post(e,c,i)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Vc="ngsw-bypass",B2=(()=>{let t=class t{constructor(){this.httpClient=r(Ic)}get(e,c,i){let l=this.prepareHeaders(i),a=this.prepareParams(c);return this.httpClient.get(e,{headers:l,params:a})}post(e,c,i,l){let a=l||this.prepareHeaders(),o=this.prepareParams(i);return this.httpClient.post(e??"",c,{headers:a,params:o})}prepareHeaders(e){let c=new J2;return c=c.set("Accept","application/json"),e&&(c=c.set("Authorization","Bearer "+decodeURIComponent(e))),c}prepareParams(e){let c=new e2,{ngswBypass:i}=e;return i&&(c=c.set(Vc,"")),c}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),D5=(()=>{let t=class t{extractJwk(e,c,i=!0){if(e.length===0)throw Pc;let l=e.filter(a=>c?.kid?a.kid===c.kid:!0).filter(a=>c?.use?a.use===c.use:!0).filter(a=>c?.kty?a.kty===c.kty:!0);if(l.length===0&&i)throw Dc;if(l.length>1&&c==null)throw Fc;return l}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function _0(s){return D5.name+": "+s}var Pc={name:_0("InvalidArgumentError"),message:"Array of keys was empty. Unable to extract"},Dc={name:_0("NoMatchingKeysError"),message:"No key found matching the spec"},Fc={name:_0("SeveralMatchingKeysError"),message:"More than one key found. Please use spec to filter"},w5=3,y4=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.document=r(C1)}getTokenExpirationDate(e){if(!Object.prototype.hasOwnProperty.call(e,"exp"))return new Date(new Date().toUTCString());let c=new Date(0);return c.setUTCSeconds(e.exp),c}getSigningInputFromToken(e,c,i){if(!this.tokenIsValid(e,i))return"";let l=this.getHeaderFromToken(e,c,i),a=this.getPayloadFromToken(e,c,i);return[l,a].join(".")}getHeaderFromToken(e,c,i){return this.tokenIsValid(e,i)?this.getPartOfToken(e,0,c):{}}getPayloadFromToken(e,c,i){return i?this.tokenIsValid(e,i)?this.getPartOfToken(e,1,c):{}:{}}getSignatureFromToken(e,c,i){return this.tokenIsValid(e,i)?this.getPartOfToken(e,2,c):{}}getPartOfToken(e,c,i){let l=this.extractPartOfToken(e,c);if(i)return l;let a=this.urlBase64Decode(l);return JSON.parse(a)}urlBase64Decode(e){let c=e.replace(/-/g,"+").replace(/_/g,"/");switch(c.length%4){case 0:break;case 2:c+="==";break;case 3:c+="=";break;default:throw Error("Illegal base64url string!")}let i=typeof this.document.defaultView<"u"?this.document.defaultView?.atob(c):Buffer.from(c,"base64").toString("binary");if(!i)return"";try{return decodeURIComponent(i.split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch{return i}}tokenIsValid(e,c){return e?e.includes(".")?e.split(".").length!==w5?(this.loggerService.logError(c,`token '${e}' is not valid --> token has to have exactly ${w5-1} dots`),!1):!0:(this.loggerService.logError(c,`token '${e}' is not valid --> no dots included`),!1):(this.loggerService.logError(c,`token '${e}' is not valid --> token falsy`),!1)}extractPartOfToken(e,c){return e.split(".")[c]}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Hc=(()=>{let t=class t{constructor(){this.cryptoService=r(R0)}importVerificationKey(e,c){return this.cryptoService.getCrypto().subtle.importKey("jwk",e,c,!1,["verify"])}verifyKey(e,c,i,l){return this.cryptoService.getCrypto().subtle.verify(e,c,i,new TextEncoder().encode(l))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function Tc(s){switch(s.charAt(0)){case"R":return{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"};case"E":return s.includes("256")?{name:"ECDSA",hash:"SHA-256"}:s.includes("384")?{name:"ECDSA",hash:"SHA-384"}:null;default:return null}}function Rc(s){switch(s.charAt(0)){case"R":return"RSA";case"E":return"EC";default:throw new Error("Cannot infer kty from alg: "+s)}}function _c(s){switch(s.charAt(0)){case"R":return s.includes("256")?{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"}:s.includes("384")?{name:"RSASSA-PKCS1-v1_5",hash:"SHA-384"}:s.includes("512")?{name:"RSASSA-PKCS1-v1_5",hash:"SHA-512"}:null;case"E":return s.includes("256")?{name:"ECDSA",namedCurve:"P-256"}:s.includes("384")?{name:"ECDSA",namedCurve:"P-384"}:null;default:return null}}var b4=(()=>{let t=class t{constructor(){this.keyAlgorithms=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","PS256","PS384","PS512"],this.tokenHelperService=r(y4),this.loggerService=r(H),this.jwkExtractor=r(D5),this.jwkWindowCryptoService=r(Hc),this.jwtWindowCryptoService=r(P5)}hasIdTokenExpired(e,c,i){let l=this.tokenHelperService.getPayloadFromToken(e,!1,c);return!this.validateIdTokenExpNotExpired(l,c,i)}validateIdTokenExpNotExpired(e,c,i){let l=this.tokenHelperService.getTokenExpirationDate(e);if(i=i||0,!l)return!1;let a=l.valueOf(),o=this.calculateNowWithOffset(i),u=a>o;return this.loggerService.logDebug(c,`Has idToken expired: ${!u} --> expires in ${this.millisToMinutesAndSeconds(a-o)} , ${new Date(a).toLocaleTimeString()} > ${new Date(o).toLocaleTimeString()}`),u}validateAccessTokenNotExpired(e,c,i){if(!e)return!0;i=i||0;let l=e.valueOf(),a=this.calculateNowWithOffset(i),o=l>a;return this.loggerService.logDebug(c,`Has accessToken expired: ${!o} --> expires in ${this.millisToMinutesAndSeconds(l-a)} , ${new Date(l).toLocaleTimeString()} > ${new Date(a).toLocaleTimeString()}`),o}validateRequiredIdToken(e,c){let i=!0;return Object.prototype.hasOwnProperty.call(e,"iss")||(i=!1,this.loggerService.logWarning(c,"iss is missing, this is required in the id_token")),Object.prototype.hasOwnProperty.call(e,"sub")||(i=!1,this.loggerService.logWarning(c,"sub is missing, this is required in the id_token")),Object.prototype.hasOwnProperty.call(e,"aud")||(i=!1,this.loggerService.logWarning(c,"aud is missing, this is required in the id_token")),Object.prototype.hasOwnProperty.call(e,"exp")||(i=!1,this.loggerService.logWarning(c,"exp is missing, this is required in the id_token")),Object.prototype.hasOwnProperty.call(e,"iat")||(i=!1,this.loggerService.logWarning(c,"iat is missing, this is required in the id_token")),i}validateIdTokenIatMaxOffset(e,c,i,l){if(i)return!0;if(!Object.prototype.hasOwnProperty.call(e,"iat"))return!1;let a=new Date(0);a.setUTCSeconds(e.iat),c=c||0;let u=new Date(new Date().toUTCString()).valueOf()-a.valueOf(),p=c*1e3;return this.loggerService.logDebug(l,`validate id token iat max offset ${u} < ${p}`),u>0?u<p:-u<p}validateIdTokenNonce(e,c,i,l){return!((e.nonce===void 0||i)&&c===t.refreshTokenNoncePlaceholder)&&e.nonce!==c?(this.loggerService.logDebug(l,"Validate_id_token_nonce failed, dataIdToken.nonce: "+e.nonce+" local_nonce:"+c),!1):!0}validateIdTokenIss(e,c,i){return e.iss!==c?(this.loggerService.logDebug(i,"Validate_id_token_iss failed, dataIdToken.iss: "+e.iss+" authWellKnownEndpoints issuer:"+c),!1):!0}validateIdTokenAud(e,c,i){return Array.isArray(e.aud)?e.aud.includes(c)?!0:(this.loggerService.logDebug(i,"Validate_id_token_aud array failed, dataIdToken.aud: "+e.aud+" client_id:"+c),!1):e.aud!==c?(this.loggerService.logDebug(i,"Validate_id_token_aud failed, dataIdToken.aud: "+e.aud+" client_id:"+c),!1):!0}validateIdTokenAzpExistsIfMoreThanOneAud(e){return e?!(Array.isArray(e.aud)&&e.aud.length>1&&!e.azp):!1}validateIdTokenAzpValid(e,c){return e?.azp?e.azp===c:!0}validateStateFromHashCallback(e,c,i){return e!==c?(this.loggerService.logDebug(i,"ValidateStateFromHashCallback failed, state: "+e+" local_state:"+c),!1):!0}validateSignatureIdToken(e,c,i){if(!e)return b(!0);if(!c||!c.keys)return b(!1);let l=this.tokenHelperService.getHeaderFromToken(e,!1,i);if(Object.keys(l).length===0&&l.constructor===Object)return this.loggerService.logWarning(i,"id token has no header data"),b(!1);let a=l.kid,o=l.alg,u=c.keys,p,z;if(!this.keyAlgorithms.includes(o))return this.loggerService.logWarning(i,"alg not supported",o),b(!1);let v=Rc(o),E="sig";try{p=a?this.jwkExtractor.extractJwk(u,{kid:a,kty:v,use:E},!1):this.jwkExtractor.extractJwk(u,{kty:v,use:E},!1),p.length===0&&(p=a?this.jwkExtractor.extractJwk(u,{kid:a,kty:v}):this.jwkExtractor.extractJwk(u,{kty:v})),z=p[0]}catch(n1){return this.loggerService.logError(i,n1),b(!1)}let W=_c(o),I=this.tokenHelperService.getSigningInputFromToken(e,!0,i),f1=this.tokenHelperService.getSignatureFromToken(e,!0,i);return S(this.jwkWindowCryptoService.importVerificationKey(z,W)).pipe(k2(n1=>{let i1=x5.parse(f1,{loose:!0}),h1=Tc(o);return S(this.jwkWindowCryptoService.verifyKey(h1,n1,i1,I))}),D1(n1=>{n1||this.loggerService.logWarning(i,"incorrect Signature, validation failed for id_token")}))}validateIdTokenAtHash(e,c,i,l){this.loggerService.logDebug(l,"at_hash from the server:"+c);let a="SHA-256";return i.includes("384")?a="SHA-384":i.includes("512")&&(a="SHA-512"),this.jwtWindowCryptoService.generateAtHash(""+e,a).pipe(k2(o=>(this.loggerService.logDebug(l,"at_hash client validation not decoded:"+o),o===c?b(!0):this.jwtWindowCryptoService.generateAtHash(""+decodeURIComponent(e),a).pipe(k(u=>(this.loggerService.logDebug(l,"-gen access--"+o),u===c))))))}millisToMinutesAndSeconds(e){let c=Math.floor(e/6e4),i=(e%6e4/1e3).toFixed(0);return c+":"+(+i<10?"0":"")+i}calculateNowWithOffset(e){return new Date(new Date().toUTCString()).valueOf()+e*1e3}};t.refreshTokenNoncePlaceholder="--RefreshToken--",t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),F5=s=>!!s&&s instanceof x6&&(s.error instanceof ProgressEvent&&s.error.type==="error"||s.status===0&&!!s.error),Oc=(()=>{let t=class t{constructor(){this.urlService=r(K1),this.loggerService=r(H),this.tokenValidationService=r(b4),this.flowsDataService=r(x1),this.storagePersistenceService=r(o1),this.dataService=r(B2)}codeFlowCallback(e,c){let i=this.urlService.getUrlParameter(e,"code"),l=this.urlService.getUrlParameter(e,"state"),a=this.urlService.getUrlParameter(e,"session_state");return l?i?(this.loggerService.logDebug(c,"running validation for callback",e),b({code:i,refreshToken:"",state:l,sessionState:a,authResult:null,isRenewProcess:!1,jwtKeys:null,validationResult:null,existingIdToken:null})):(this.loggerService.logDebug(c,"no code in url"),w(()=>new Error("no code in url"))):(this.loggerService.logDebug(c,"no state in url"),w(()=>new Error("no state in url")))}codeFlowCodeRequest(e,c){let i=this.flowsDataService.getAuthStateControl(c);if(!this.tokenValidationService.validateStateFromHashCallback(e.state,i,c))return w(()=>new Error("codeFlowCodeRequest incorrect state"));let o=this.storagePersistenceService.read("authWellKnownEndPoints",c)?.tokenEndpoint;if(!o)return w(()=>new Error("Token Endpoint not defined"));let u=new J2;u=u.set("Content-Type","application/x-www-form-urlencoded");let p=this.urlService.createBodyForCodeFlowCodeRequest(e.code,c,c?.customParamsCodeRequest);return this.dataService.post(o,p,c,u).pipe(L(z=>{if(z){let v=D(C({},z),{state:e.state,session_state:e.sessionState});e.authResult=v}return b(e)}),$3(z=>this.handleRefreshRetry(z,c)),m1(z=>{let{authority:v}=c,E=`OidcService code request ${v}`;return this.loggerService.logError(c,E,z),w(()=>new Error(E))}))}handleRefreshRetry(e,c){return e.pipe(k2(i=>{if(F5(i)){let{authority:l,refreshTokenRetryInSeconds:a}=c,o=`OidcService code request ${l} - no internet connection`;return this.loggerService.logWarning(c,o,i),W3((a??0)*1e3)}return w(()=>i)}))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),b1=function(s){return s[s.ConfigLoaded=0]="ConfigLoaded",s[s.CheckingAuth=1]="CheckingAuth",s[s.CheckingAuthFinished=2]="CheckingAuthFinished",s[s.CheckingAuthFinishedWithError=3]="CheckingAuthFinishedWithError",s[s.ConfigLoadingFailed=4]="ConfigLoadingFailed",s[s.CheckSessionReceived=5]="CheckSessionReceived",s[s.UserDataChanged=6]="UserDataChanged",s[s.NewAuthenticationResult=7]="NewAuthenticationResult",s[s.TokenExpired=8]="TokenExpired",s[s.IdTokenExpired=9]="IdTokenExpired",s[s.SilentRenewStarted=10]="SilentRenewStarted",s[s.SilentRenewFailed=11]="SilentRenewFailed",s}(b1||{}),j2=(()=>{let t=class t{constructor(){this.notify=new W2(1)}fireEvent(e,c){this.notify.next({type:e,value:c})}registerForEvents(){return this.notify.asObservable()}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),qc={isAuthenticated:!1,allConfigsAuthenticated:[]},R1=(()=>{let t=class t{constructor(){this.storagePersistenceService=r(o1),this.loggerService=r(H),this.publicEventsService=r(j2),this.tokenValidationService=r(b4),this.authenticatedInternal$=new P1(qc)}get authenticated$(){return this.authenticatedInternal$.asObservable().pipe(G2())}setAuthenticatedAndFireEvent(e){let c=this.composeAuthenticatedResult(e);this.authenticatedInternal$.next(c)}setUnauthenticatedAndFireEvent(e,c){this.storagePersistenceService.resetAuthStateInStorage(e);let i=this.composeUnAuthenticatedResult(c);this.authenticatedInternal$.next(i)}updateAndPublishAuthState(e){this.publicEventsService.fireEvent(b1.NewAuthenticationResult,e)}setAuthorizationData(e,c,i,l){this.loggerService.logDebug(i,`storing the accessToken '${e}'`),this.storagePersistenceService.write("authzData",e,i),this.persistAccessTokenExpirationTime(c,i),this.setAuthenticatedAndFireEvent(l)}getAccessToken(e){if(!e||!this.isAuthenticated(e))return"";let c=this.storagePersistenceService.getAccessToken(e);return this.decodeURIComponentSafely(c)}getIdToken(e){if(!e||!this.isAuthenticated(e))return"";let c=this.storagePersistenceService.getIdToken(e);return this.decodeURIComponentSafely(c)}getRefreshToken(e){if(!e||!this.isAuthenticated(e))return"";let c=this.storagePersistenceService.getRefreshToken(e);return this.decodeURIComponentSafely(c)}getAuthenticationResult(e){return!e||!this.isAuthenticated(e)?null:this.storagePersistenceService.getAuthenticationResult(e)}areAuthStorageTokensValid(e){return!e||!this.isAuthenticated(e)?!1:this.hasIdTokenExpiredAndRenewCheckIsEnabled(e)?(this.loggerService.logDebug(e,"persisted idToken is expired"),!1):this.hasAccessTokenExpiredIfExpiryExists(e)?(this.loggerService.logDebug(e,"persisted accessToken is expired"),!1):(this.loggerService.logDebug(e,"persisted idToken and accessToken are valid"),!0)}hasIdTokenExpiredAndRenewCheckIsEnabled(e){let{renewTimeBeforeTokenExpiresInSeconds:c,triggerRefreshWhenIdTokenExpired:i,disableIdTokenValidation:l}=e;if(!i||l)return!1;let a=this.storagePersistenceService.getIdToken(e),o=this.tokenValidationService.hasIdTokenExpired(a,e,c);return o&&this.publicEventsService.fireEvent(b1.IdTokenExpired,o),o}hasAccessTokenExpiredIfExpiryExists(e){let{renewTimeBeforeTokenExpiresInSeconds:c}=e,i=this.storagePersistenceService.read("access_token_expires_at",e),a=!this.tokenValidationService.validateAccessTokenNotExpired(i,e,c);return a&&this.publicEventsService.fireEvent(b1.TokenExpired,a),a}isAuthenticated(e){if(!e)return w(()=>new Error("Please provide a configuration before setting up the module")),!1;let c=!!this.storagePersistenceService.getAccessToken(e),i=!!this.storagePersistenceService.getIdToken(e);return c&&i}decodeURIComponentSafely(e){return e?decodeURIComponent(e):""}persistAccessTokenExpirationTime(e,c){if(e?.expires_in){let i=new Date(new Date().toUTCString()).valueOf()+e.expires_in*1e3;this.storagePersistenceService.write("access_token_expires_at",i,c)}}composeAuthenticatedResult(e){if(e.length===1){let{configId:c}=e[0];return{isAuthenticated:!0,allConfigsAuthenticated:[{configId:c??"",isAuthenticated:!0}]}}return this.checkAllConfigsIfTheyAreAuthenticated(e)}composeUnAuthenticatedResult(e){if(e.length===1){let{configId:c}=e[0];return{isAuthenticated:!1,allConfigsAuthenticated:[{configId:c??"",isAuthenticated:!1}]}}return this.checkAllConfigsIfTheyAreAuthenticated(e)}checkAllConfigsIfTheyAreAuthenticated(e){let c=e.map(l=>({configId:l.configId??"",isAuthenticated:this.isAuthenticated(l)})),i=c.every(l=>!!l.isAuthenticated);return{allConfigsAuthenticated:c,isAuthenticated:i}}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),e1=function(s){return s.NotSet="NotSet",s.StatesDoNotMatch="StatesDoNotMatch",s.SignatureFailed="SignatureFailed",s.IncorrectNonce="IncorrectNonce",s.RequiredPropertyMissing="RequiredPropertyMissing",s.MaxOffsetExpired="MaxOffsetExpired",s.IssDoesNotMatchIssuer="IssDoesNotMatchIssuer",s.NoAuthWellKnownEndPoints="NoAuthWellKnownEndPoints",s.IncorrectAud="IncorrectAud",s.IncorrectIdTokenClaimsAfterRefresh="IncorrectIdTokenClaimsAfterRefresh",s.IncorrectAzp="IncorrectAzp",s.TokenExpired="TokenExpired",s.IncorrectAtHash="IncorrectAtHash",s.Ok="Ok",s.LoginRequired="LoginRequired",s.SecureTokenServerError="SecureTokenServerError",s}(e1||{}),Uc={userData:null,allUserData:[]},C3=(()=>{let t=class t{constructor(){this.userDataInternal$=new P1(Uc),this.loggerService=r(H),this.tokenHelperService=r(y4),this.flowHelper=r(y2),this.oidcDataService=r(B2),this.storagePersistenceService=r(o1),this.eventService=r(j2)}get userData$(){return this.userDataInternal$.asObservable()}getAndPersistUserDataInStore(e,c,i=!1,l,a){l=l||this.storagePersistenceService.getIdToken(e),a=a||this.tokenHelperService.getPayloadFromToken(l,!1,e);let o=this.getUserDataFromStore(e),u=!!o,p=this.flowHelper.isCurrentFlowImplicitFlowWithAccessToken(e),z=this.flowHelper.isCurrentFlowCodeFlow(e),v=this.storagePersistenceService.getAccessToken(e);if(!(p||z))return this.loggerService.logDebug(e,`authCallback idToken flow with accessToken ${v}`),this.setUserDataToStore(a,e,c),b(a);let{renewUserInfoAfterTokenRenew:E}=e;return!i||E||!u?this.getUserDataOidcFlowAndSave(a.sub,e,c).pipe(L(W=>(this.loggerService.logDebug(e,"Received user data: ",W),W?(this.loggerService.logDebug(e,"accessToken: ",v),b(W)):w(()=>new Error("Received no user data, request failed"))))):b(o)}getUserDataFromStore(e){return e?this.storagePersistenceService.read("userData",e)||null:w(()=>new Error("Please provide a configuration before setting up the module"))}publishUserDataIfExists(e,c){let i=this.getUserDataFromStore(e);i&&this.fireUserDataEvent(e,c,i)}setUserDataToStore(e,c,i){this.storagePersistenceService.write("userData",e,c),this.fireUserDataEvent(c,i,e)}resetUserDataInStore(e,c){this.storagePersistenceService.remove("userData",e),this.fireUserDataEvent(e,c,null)}getUserDataOidcFlowAndSave(e,c,i){return this.getIdentityUserData(c).pipe(k(l=>this.validateUserDataSubIdToken(c,e,l?.sub)?(this.setUserDataToStore(l,c,i),l):(this.loggerService.logWarning(c,"User data sub does not match sub in id_token, resetting"),this.resetUserDataInStore(c,i),null)))}getIdentityUserData(e){let c=this.storagePersistenceService.getAccessToken(e),i=this.storagePersistenceService.read("authWellKnownEndPoints",e);if(!i)return this.loggerService.logWarning(e,"init check session: authWellKnownEndpoints is undefined"),w(()=>new Error("authWellKnownEndpoints is undefined"));let l=i.userInfoEndpoint;return l?this.oidcDataService.get(l,e,c).pipe($2(2)):(this.loggerService.logError(e,"init check session: authWellKnownEndpoints.userinfo_endpoint is undefined; set auto_userinfo = false in config"),w(()=>new Error("authWellKnownEndpoints.userinfo_endpoint is undefined")))}validateUserDataSubIdToken(e,c,i){return!c||!i?!1:c.toString()!==i.toString()?(this.loggerService.logDebug(e,"validateUserDataSubIdToken failed",c,i),!1):!0}fireUserDataEvent(e,c,i){let l=this.composeSingleOrMultipleUserDataObject(e,c,i);this.userDataInternal$.next(l);let{configId:a}=e;this.eventService.fireEvent(b1.UserDataChanged,{configId:a,userData:i})}composeSingleOrMultipleUserDataObject(e,c,i){if(!(c.length>1)){let{configId:o}=e;return this.composeSingleUserDataResult(o??"",i)}return{userData:null,allUserData:c.map(o=>{let u=e.configId??"",p=o.configId??"";if(this.currentConfigIsToUpdate(u,o))return{configId:p,userData:i};let z=this.storagePersistenceService.read("userData",o)||null;return{configId:p,userData:z}})}}composeSingleUserDataResult(e,c){return{userData:c,allUserData:[{configId:e,userData:c}]}}currentConfigIsToUpdate(e,c){return c.configId===e}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),b2=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.userService=r(C3),this.flowsDataService=r(x1),this.authStateService=r(R1)}resetAuthorizationData(e,c){e&&(this.userService.resetUserDataInStore(e,c),this.flowsDataService.resetStorageFlowData(e),this.authStateService.setUnauthenticatedAndFireEvent(e,c),this.loggerService.logDebug(e,"Local Login information cleaned up and event fired"))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Bc=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.storagePersistenceService=r(o1),this.dataService=r(B2)}getSigningKeys(e){let i=this.storagePersistenceService.read("authWellKnownEndPoints",e)?.jwksUri;if(!i){let l=`getSigningKeys: authWellKnownEndpoints.jwksUri is: '${i}'`;return this.loggerService.logWarning(e,l),w(()=>new Error(l))}return this.loggerService.logDebug(e,"Getting signinkeys from ",i),this.dataService.get(i,e).pipe($2(2),m1(l=>this.handleErrorGetSigningKeys(l,e)))}handleErrorGetSigningKeys(e,c){let i="";if(e instanceof b6){let l=e.body||{},a=JSON.stringify(l),{status:o,statusText:u}=e;i=`${o||""} - ${u||""} ${a||""}`}else{let{message:l}=e;i=l||`${e}`}return this.loggerService.logError(c,i),w(()=>new Error(i))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),k5="jwtKeys",jc=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.authStateService=r(R1),this.flowsDataService=r(x1),this.signInKeyDataService=r(Bc),this.storagePersistenceService=r(o1),this.resetAuthDataService=r(b2),this.document=r(C1)}callbackHistoryAndResetJwtKeys(e,c,i){let l=C({},e.authResult);if(!this.responseHasIdToken(e)){let a=this.storagePersistenceService.getIdToken(c);l=D(C({},l),{id_token:a})}if(this.storagePersistenceService.write("authnResult",l,c),c.allowUnsafeReuseRefreshToken&&e.authResult?.refresh_token&&this.storagePersistenceService.write("reusable_refresh_token",e.authResult.refresh_token,c),this.historyCleanUpTurnedOn(c)&&!e.isRenewProcess?this.resetBrowserHistory():this.loggerService.logDebug(c,"history clean up inactive"),e.authResult?.error){let a=`AuthCallback AuthResult came with error: ${e.authResult.error}`;return this.loggerService.logDebug(c,a),this.resetAuthDataService.resetAuthorizationData(c,i),this.flowsDataService.setNonce("",c),this.handleResultErrorFromCallback(e.authResult,e.isRenewProcess),w(()=>new Error(a))}return this.loggerService.logDebug(c,`AuthResult '${JSON.stringify(e.authResult,null,2)}'.
      AuthCallback created, begin token validation`),this.signInKeyDataService.getSigningKeys(c).pipe(D1(a=>this.storeSigningKeys(a,c)),m1(a=>{let o=this.readSigningKeys(c);return o?(this.loggerService.logWarning(c,"Failed to retrieve signing keys, fallback to stored keys"),b(o)):w(()=>new Error(a))}),L(a=>{if(a)return e.jwtKeys=a,b(e);let o="Failed to retrieve signing key";return this.loggerService.logWarning(c,o),w(()=>new Error(o))}),m1(a=>{let o=`Failed to retrieve signing key with error: ${a}`;return this.loggerService.logWarning(c,o),w(()=>new Error(o))}))}responseHasIdToken(e){return!!e?.authResult?.id_token}handleResultErrorFromCallback(e,c){let i=e1.SecureTokenServerError;e&&typeof e=="object"&&"error"in e&&e.error==="login_required"&&(i=e1.LoginRequired),this.authStateService.updateAndPublishAuthState({isAuthenticated:!1,validationResult:i,isRenewProcess:c})}historyCleanUpTurnedOn(e){let{historyCleanupOff:c}=e;return!c}resetBrowserHistory(){this.document.defaultView?.history.replaceState({},this.document.title,this.document.defaultView.location.origin+this.document.defaultView.location.pathname)}storeSigningKeys(e,c){this.storagePersistenceService.write(k5,e,c)}readSigningKeys(e){return this.storagePersistenceService.read(k5,e)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Wc=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.resetAuthDataService=r(b2),this.flowsDataService=r(x1),this.document=r(C1)}implicitFlowCallback(e,c,i){let l=this.flowsDataService.isSilentRenewRunning(e);this.loggerService.logDebug(e,"BEGIN callback, no auth data"),l||this.resetAuthDataService.resetAuthorizationData(e,c),i=i||this.document.location.hash.substring(1);let o={code:"",refreshToken:"",state:"",sessionState:null,authResult:i.split("&").reduce((u,p)=>{let z=p.split("=");return u[z.shift()]=z.join("="),u},{}),isRenewProcess:l,jwtKeys:null,validationResult:null,existingIdToken:null};return b(o)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Gc=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.authStateService=r(R1),this.flowsDataService=r(x1)}refreshSessionWithRefreshTokens(e){let c=this.flowsDataService.getExistingOrCreateAuthStateControl(e);this.loggerService.logDebug(e,"RefreshSession created. Adding myautostate: "+c);let i=this.authStateService.getRefreshToken(e),l=this.authStateService.getIdToken(e);if(i){let a={code:"",refreshToken:i,state:c,sessionState:null,authResult:null,isRenewProcess:!0,jwtKeys:null,validationResult:null,existingIdToken:l};return this.loggerService.logDebug(e,"found refresh code, obtaining new credentials with refresh code"),this.flowsDataService.setNonce(b4.refreshTokenNoncePlaceholder,e),b(a)}else{let a="no refresh token found, please login";return this.loggerService.logError(e,a),w(()=>new Error(a))}}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),$c=(()=>{let t=class t{constructor(){this.urlService=r(K1),this.loggerService=r(H),this.dataService=r(B2),this.storagePersistenceService=r(o1)}refreshTokensRequestTokens(e,c,i){let l=new J2;l=l.set("Content-Type","application/x-www-form-urlencoded");let o=this.storagePersistenceService.read("authWellKnownEndPoints",c)?.tokenEndpoint;if(!o)return w(()=>new Error("Token Endpoint not defined"));let u=this.urlService.createBodyForCodeFlowRefreshTokensRequest(e.refreshToken,c,i);return this.dataService.post(o,u,c,l).pipe(L(p=>(this.loggerService.logDebug(c,`token refresh response: ${p}`),p&&(p.state=e.state),e.authResult=p,b(e))),$3(p=>this.handleRefreshRetry(p,c)),m1(p=>{let{authority:z}=c,v=`OidcService code request ${z}`;return this.loggerService.logError(c,v,p),w(()=>new Error(v))}))}handleRefreshRetry(e,c){return e.pipe(k2(i=>{if(F5(i)){let{authority:l,refreshTokenRetryInSeconds:a}=c,o=`OidcService code request ${l} - no internet connection`;return this.loggerService.logWarning(c,o,i),W3((a??0)*1e3)}return w(()=>i)}))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Qc=(()=>{let t=class t{isStringEqualOrNonOrderedArrayEqual(e,c){return this.isNullOrUndefined(e)||this.isNullOrUndefined(c)||this.oneValueIsStringAndTheOtherIsArray(e,c)?!1:this.bothValuesAreStrings(e,c)?e===c:this.arraysHaveEqualContent(e,c)}areEqual(e,c){if(!e||!c)return!1;if(this.bothValuesAreArrays(e,c))return this.arraysStrictEqual(e,c);if(this.bothValuesAreStrings(e,c))return e===c;if(this.bothValuesAreObjects(e,c))return JSON.stringify(e).toLowerCase()===JSON.stringify(c).toLowerCase();if(this.oneValueIsStringAndTheOtherIsArray(e,c)){if(Array.isArray(e)&&this.valueIsString(c))return e[0]===c;if(Array.isArray(c)&&this.valueIsString(e))return c[0]===e}return e===c}oneValueIsStringAndTheOtherIsArray(e,c){return Array.isArray(e)&&this.valueIsString(c)||Array.isArray(c)&&this.valueIsString(e)}bothValuesAreObjects(e,c){return this.valueIsObject(e)&&this.valueIsObject(c)}bothValuesAreStrings(e,c){return this.valueIsString(e)&&this.valueIsString(c)}bothValuesAreArrays(e,c){return Array.isArray(e)&&Array.isArray(c)}valueIsString(e){return typeof e=="string"||e instanceof String}valueIsObject(e){return typeof e=="object"}arraysStrictEqual(e,c){if(e.length!==c.length)return!1;for(let i=e.length;i--;)if(e[i]!==c[i])return!1;return!0}arraysHaveEqualContent(e,c){return e.length!==c.length?!1:e.some(i=>c.includes(i))}isNullOrUndefined(e){return e==null}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),v4=class{constructor(t="",n="",e=!1,c={at_hash:""},i=e1.NotSet){this.accessToken=t,this.idToken=n,this.authResponseIsValid=e,this.decodedIdToken=c,this.state=i}},Zc=(()=>{let t=class t{constructor(){this.storagePersistenceService=r(o1),this.tokenValidationService=r(b4),this.tokenHelperService=r(y4),this.loggerService=r(H),this.equalityService=r(Qc),this.flowHelper=r(y2)}getValidatedStateResult(e,c){let i=!!e.authResult?.error;return!!!e||i?b(new v4("","",!1,{})):this.validateState(e,c)}validateState(e,c){let i=new v4,l=this.storagePersistenceService.read("authStateControl",c);if(!this.tokenValidationService.validateStateFromHashCallback(e.authResult?.state,l,c))return this.loggerService.logWarning(c,"authCallback incorrect state"),i.state=e1.StatesDoNotMatch,this.handleUnsuccessfulValidation(c),b(i);let a=this.flowHelper.isCurrentFlowImplicitFlowWithAccessToken(c),o=this.flowHelper.isCurrentFlowCodeFlow(c);if((a||o)&&(i.accessToken=e.authResult?.access_token??""),c.disableIdTokenValidation)return i.state=e1.Ok,i.authResponseIsValid=!0,b(i);let p=e.isRenewProcess&&!!e.refreshToken,z=!!e.authResult?.id_token;if(p&&!z)return i.state=e1.Ok,i.authResponseIsValid=!0,b(i);if(z){let{clientId:v,issValidationOff:E,maxIdTokenIatOffsetAllowedInSeconds:W,disableIatOffsetValidation:I,ignoreNonceAfterRefresh:f1,renewTimeBeforeTokenExpiresInSeconds:n1}=c;return i.idToken=e.authResult?.id_token??"",i.decodedIdToken=this.tokenHelperService.getPayloadFromToken(i.idToken,!1,c),this.tokenValidationService.validateSignatureIdToken(i.idToken,e.jwtKeys,c).pipe(k2(i1=>{if(!i1)return this.loggerService.logDebug(c,"authCallback Signature validation failed id_token"),i.state=e1.SignatureFailed,this.handleUnsuccessfulValidation(c),b(i);let h1=this.storagePersistenceService.read("authNonce",c);if(!this.tokenValidationService.validateIdTokenNonce(i.decodedIdToken,h1,!!f1,c))return this.loggerService.logWarning(c,"authCallback incorrect nonce, did you call the checkAuth() method multiple times?"),i.state=e1.IncorrectNonce,this.handleUnsuccessfulValidation(c),b(i);if(!this.tokenValidationService.validateRequiredIdToken(i.decodedIdToken,c))return this.loggerService.logDebug(c,"authCallback Validation, one of the REQUIRED properties missing from id_token"),i.state=e1.RequiredPropertyMissing,this.handleUnsuccessfulValidation(c),b(i);if(!p&&!this.tokenValidationService.validateIdTokenIatMaxOffset(i.decodedIdToken,W??120,!!I,c))return this.loggerService.logWarning(c,"authCallback Validation, iat rejected id_token was issued too far away from the current time"),i.state=e1.MaxOffsetExpired,this.handleUnsuccessfulValidation(c),b(i);let O=this.storagePersistenceService.read("authWellKnownEndPoints",c);if(O){if(E)this.loggerService.logDebug(c,"iss validation is turned off, this is not recommended!");else if(!E&&!this.tokenValidationService.validateIdTokenIss(i.decodedIdToken,O.issuer,c))return this.loggerService.logWarning(c,"authCallback incorrect iss does not match authWellKnownEndpoints issuer"),i.state=e1.IssDoesNotMatchIssuer,this.handleUnsuccessfulValidation(c),b(i)}else return this.loggerService.logWarning(c,"authWellKnownEndpoints is undefined"),i.state=e1.NoAuthWellKnownEndPoints,this.handleUnsuccessfulValidation(c),b(i);return this.tokenValidationService.validateIdTokenAud(i.decodedIdToken,v,c)?this.tokenValidationService.validateIdTokenAzpExistsIfMoreThanOneAud(i.decodedIdToken)?this.tokenValidationService.validateIdTokenAzpValid(i.decodedIdToken,v)?this.isIdTokenAfterRefreshTokenRequestValid(e,i.decodedIdToken,c)?!p&&!this.tokenValidationService.validateIdTokenExpNotExpired(i.decodedIdToken,c,n1)?(this.loggerService.logWarning(c,"authCallback id token expired"),i.state=e1.TokenExpired,this.handleUnsuccessfulValidation(c),b(i)):this.validateDefault(a,o,i,c,e):(this.loggerService.logWarning(c,"authCallback pre, post id_token claims do not match in refresh"),i.state=e1.IncorrectIdTokenClaimsAfterRefresh,this.handleUnsuccessfulValidation(c),b(i)):(this.loggerService.logWarning(c,"authCallback incorrect azp"),i.state=e1.IncorrectAzp,this.handleUnsuccessfulValidation(c),b(i)):(this.loggerService.logWarning(c,"authCallback missing azp"),i.state=e1.IncorrectAzp,this.handleUnsuccessfulValidation(c),b(i)):(this.loggerService.logWarning(c,"authCallback incorrect aud"),i.state=e1.IncorrectAud,this.handleUnsuccessfulValidation(c),b(i))}))}else this.loggerService.logDebug(c,"No id_token found, skipping id_token validation");return this.validateDefault(a,o,i,c,e)}validateDefault(e,c,i,l,a){if(!e&&!c)return i.authResponseIsValid=!0,i.state=e1.Ok,this.handleSuccessfulValidation(l),this.handleUnsuccessfulValidation(l),b(i);if(a.authResult?.id_token){let o=this.tokenHelperService.getHeaderFromToken(i.idToken,!1,l);if(c&&!i.decodedIdToken.at_hash)this.loggerService.logDebug(l,"Code Flow active, and no at_hash in the id_token, skipping check!");else return this.tokenValidationService.validateIdTokenAtHash(i.accessToken,i.decodedIdToken.at_hash,o.alg,l).pipe(k(u=>!u||!i.accessToken?(this.loggerService.logWarning(l,"authCallback incorrect at_hash"),i.state=e1.IncorrectAtHash,this.handleUnsuccessfulValidation(l),i):(i.authResponseIsValid=!0,i.state=e1.Ok,this.handleSuccessfulValidation(l),i)))}return i.authResponseIsValid=!0,i.state=e1.Ok,this.handleSuccessfulValidation(l),b(i)}isIdTokenAfterRefreshTokenRequestValid(e,c,i){let{useRefreshToken:l,disableRefreshIdTokenAuthTimeValidation:a}=i;if(!l||!e.existingIdToken)return!0;let o=this.tokenHelperService.getPayloadFromToken(e.existingIdToken,!1,i);return o.iss!==c.iss?(this.loggerService.logDebug(i,`iss do not match: ${o.iss} ${c.iss}`),!1):o.azp!==c.azp?(this.loggerService.logDebug(i,`azp do not match: ${o.azp} ${c.azp}`),!1):o.sub!==c.sub?(this.loggerService.logDebug(i,`sub do not match: ${o.sub} ${c.sub}`),!1):this.equalityService.isStringEqualOrNonOrderedArrayEqual(o?.aud,c?.aud)?a?!0:o.auth_time!==c.auth_time?(this.loggerService.logDebug(i,`auth_time do not match: ${o.auth_time} ${c.auth_time}`),!1):!0:(this.loggerService.logDebug(i,`aud in new id_token is not valid: '${o?.aud}' '${c.aud}'`),!1)}handleSuccessfulValidation(e){let{autoCleanStateAfterAuthentication:c}=e;this.storagePersistenceService.write("authNonce",null,e),c&&this.storagePersistenceService.write("authStateControl","",e),this.loggerService.logDebug(e,"authCallback token(s) validated, continue")}handleUnsuccessfulValidation(e){let{autoCleanStateAfterAuthentication:c}=e;this.storagePersistenceService.write("authNonce",null,e),c&&this.storagePersistenceService.write("authStateControl","",e),this.loggerService.logDebug(e,"authCallback token(s) invalid")}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Kc=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.stateValidationService=r(Zc),this.authStateService=r(R1),this.resetAuthDataService=r(b2),this.document=r(C1)}callbackStateValidation(e,c,i){return this.stateValidationService.getValidatedStateResult(e,c).pipe(k(l=>{if(e.validationResult=l,l.authResponseIsValid)return this.authStateService.setAuthorizationData(l.accessToken,e.authResult,c,i),e;{let a=`authorizedCallback, token(s) validation failed, resetting. Hash: ${this.document.location.hash}`;throw this.loggerService.logWarning(c,a),this.resetAuthDataService.resetAuthorizationData(c,i),this.publishUnauthorizedState(e.validationResult,e.isRenewProcess),new Error(a)}}))}publishUnauthorizedState(e,c){this.authStateService.updateAndPublishAuthState({isAuthenticated:!1,validationResult:e.state,isRenewProcess:c})}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Xc=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.authStateService=r(R1),this.flowsDataService=r(x1),this.userService=r(C3),this.resetAuthDataService=r(b2)}callbackUser(e,c,i){let{isRenewProcess:l,validationResult:a,authResult:o,refreshToken:u}=e,{autoUserInfo:p,renewUserInfoAfterTokenRenew:z}=c;return p?this.userService.getAndPersistUserDataInStore(c,i,l,a?.idToken,a?.decodedIdToken).pipe(L(v=>{if(v)return u||this.flowsDataService.setSessionState(o?.session_state,c),this.publishAuthState(a,l),b(e);{this.resetAuthDataService.resetAuthorizationData(c,i),this.publishUnauthenticatedState(a,l);let E=`Called for userData but they were ${v}`;return this.loggerService.logWarning(c,E),w(()=>new Error(E))}}),m1(v=>{let E=`Failed to retrieve user info with error:  ${v}`;return this.loggerService.logWarning(c,E),w(()=>new Error(E))})):((!l||z)&&a?.decodedIdToken&&this.userService.setUserDataToStore(a.decodedIdToken,c,i),!l&&!u&&this.flowsDataService.setSessionState(o?.session_state,c),this.publishAuthState(a,l),b(e))}publishAuthState(e,c){e&&this.authStateService.updateAndPublishAuthState({isAuthenticated:!0,validationResult:e.state,isRenewProcess:c})}publishUnauthenticatedState(e,c){e&&this.authStateService.updateAndPublishAuthState({isAuthenticated:!1,validationResult:e.state,isRenewProcess:c})}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),x4=(()=>{let t=class t{constructor(){this.codeFlowCallbackHandlerService=r(Oc),this.implicitFlowCallbackHandlerService=r(Wc),this.historyJwtKeysCallbackHandlerService=r(jc),this.userHandlerService=r(Xc),this.stateValidationCallbackHandlerService=r(Kc),this.refreshSessionCallbackHandlerService=r(Gc),this.refreshTokenCallbackHandlerService=r($c)}processCodeFlowCallback(e,c,i){return this.codeFlowCallbackHandlerService.codeFlowCallback(e,c).pipe(B(l=>this.codeFlowCallbackHandlerService.codeFlowCodeRequest(l,c)),B(l=>this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(l,c,i)),B(l=>this.stateValidationCallbackHandlerService.callbackStateValidation(l,c,i)),B(l=>this.userHandlerService.callbackUser(l,c,i)))}processSilentRenewCodeFlowCallback(e,c,i){return this.codeFlowCallbackHandlerService.codeFlowCodeRequest(e,c).pipe(B(l=>this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(l,c,i)),B(l=>this.stateValidationCallbackHandlerService.callbackStateValidation(l,c,i)),B(l=>this.userHandlerService.callbackUser(l,c,i)))}processImplicitFlowCallback(e,c,i){return this.implicitFlowCallbackHandlerService.implicitFlowCallback(e,c,i).pipe(B(l=>this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(l,e,c)),B(l=>this.stateValidationCallbackHandlerService.callbackStateValidation(l,e,c)),B(l=>this.userHandlerService.callbackUser(l,e,c)))}processRefreshToken(e,c,i){return this.refreshSessionCallbackHandlerService.refreshSessionWithRefreshTokens(e).pipe(B(l=>this.refreshTokenCallbackHandlerService.refreshTokensRequestTokens(l,e,i)),B(l=>this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(l,e,c)),B(l=>this.stateValidationCallbackHandlerService.callbackStateValidation(l,e,c)),B(l=>this.userHandlerService.callbackUser(l,e,c)))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),O3=(()=>{let t=class t{constructor(){this.zone=r(K2),this.document=r(C1),this.runTokenValidationRunning=null}isTokenValidationRunning(){return!!this.runTokenValidationRunning}stopPeriodicTokenCheck(){this.runTokenValidationRunning&&(this.runTokenValidationRunning.unsubscribe(),this.runTokenValidationRunning=null)}startPeriodicTokenCheck(e){let c=e*1e3;return new w2(i=>{let l;return this.zone.runOutsideAngular(()=>{l=this.document?.defaultView?.setInterval(()=>this.zone.run(()=>i.next()),c)}),()=>{clearInterval(l)}})}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Yc=(()=>{let t=class t{constructor(){this.flowsService=r(x4),this.router=r(V1),this.flowsDataService=r(x1),this.intervalService=r(O3)}authenticatedCallbackWithCode(e,c,i){let l=this.flowsDataService.isSilentRenewRunning(c),{triggerAuthorizationResultEvent:a}=c,o=c.postLoginRoute||"/",u=c.unauthorizedRoute||"/";return this.flowsService.processCodeFlowCallback(e,c,i).pipe(D1(p=>{this.flowsDataService.resetCodeFlowInProgress(c),!a&&!p.isRenewProcess&&this.router.navigateByUrl(o)}),m1(p=>(this.flowsDataService.resetSilentRenewRunning(c),this.flowsDataService.resetCodeFlowInProgress(c),this.intervalService.stopPeriodicTokenCheck(),!a&&!l&&this.router.navigateByUrl(u),w(()=>new Error(p)))))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),H5=(()=>{let t=class t{constructor(){this.flowsService=r(x4),this.router=r(V1),this.flowsDataService=r(x1),this.intervalService=r(O3)}authenticatedImplicitFlowCallback(e,c,i){let l=this.flowsDataService.isSilentRenewRunning(e),a=!!e.triggerAuthorizationResultEvent,o=e.postLoginRoute??"",u=e.unauthorizedRoute??"";return this.flowsService.processImplicitFlowCallback(e,c,i).pipe(D1(p=>{!a&&!p.isRenewProcess&&this.router.navigateByUrl(o)}),m1(p=>(this.flowsDataService.resetSilentRenewRunning(e),this.intervalService.stopPeriodicTokenCheck(),!a&&!l&&this.router.navigateByUrl(u),w(()=>new Error(p)))))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),T5=(()=>{let t=class t{constructor(){this.urlService=r(K1),this.flowHelper=r(y2),this.implicitFlowCallbackService=r(H5),this.codeFlowCallbackService=r(Yc),this.stsCallbackInternal$=new l2}get stsCallback$(){return this.stsCallbackInternal$.asObservable()}isCallback(e){return e?this.urlService.isCallbackFromSts(e):!1}handleCallbackAndFireEvents(e,c,i){let l=new w2;if(this.flowHelper.isCurrentFlowCodeFlow(c))l=this.codeFlowCallbackService.authenticatedCallbackWithCode(e,c,i);else if(this.flowHelper.isCurrentFlowAnyImplicitFlow(c))if(e?.includes("#")){let a=e.substring(e.indexOf("#")+1);l=this.implicitFlowCallbackService.authenticatedImplicitFlowCallback(c,i,a)}else l=this.implicitFlowCallbackService.authenticatedImplicitFlowCallback(c,i);return l.pipe(D1(()=>this.stsCallbackInternal$.next()))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Jc=(()=>{let t=class t{constructor(){this.platformId=r(a1)}isBrowser(){return j(this.platformId)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),et="/.well-known/openid-configuration",ct=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.http=r(B2)}getWellKnownEndPointsForConfig(e){let{authWellknownEndpointUrl:c}=e;if(!c){let i="no authWellknownEndpoint given!";return this.loggerService.logError(e,i),w(()=>new Error(i))}return this.getWellKnownDocument(c,e).pipe(k(i=>({issuer:i.issuer,jwksUri:i.jwks_uri,authorizationEndpoint:i.authorization_endpoint,tokenEndpoint:i.token_endpoint,userInfoEndpoint:i.userinfo_endpoint,endSessionEndpoint:i.end_session_endpoint,checkSessionIframe:i.check_session_iframe,revocationEndpoint:i.revocation_endpoint,introspectionEndpoint:i.introspection_endpoint,parEndpoint:i.pushed_authorization_request_endpoint})))}getWellKnownDocument(e,c){let i=e,l=c.authWellknownUrlSuffix||et;return e.includes(l)||(i=`${e}${l}`),this.http.get(i,c).pipe($2(2))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),L3=(()=>{let t=class t{constructor(){this.dataService=r(ct),this.publicEventsService=r(j2),this.storagePersistenceService=r(o1)}storeWellKnownEndpoints(e,c){this.storagePersistenceService.write("authWellKnownEndPoints",c,e)}queryAndStoreAuthWellKnownEndPoints(e){return e?this.dataService.getWellKnownEndPointsForConfig(e).pipe(D1(c=>this.storeWellKnownEndpoints(e,c)),m1(c=>(this.publicEventsService.fireEvent(b1.ConfigLoadingFailed,null),w(()=>new Error(c))))):w(()=>new Error("Please provide a configuration before setting up the module"))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),tt={authority:"https://please_set",authWellknownEndpointUrl:"",authWellknownEndpoints:void 0,redirectUrl:"https://please_set",clientId:"please_set",responseType:"code",scope:"openid email profile",hdParam:"",postLogoutRedirectUri:"https://please_set",startCheckSession:!1,silentRenew:!1,silentRenewUrl:"https://please_set",silentRenewTimeoutInSeconds:20,renewTimeBeforeTokenExpiresInSeconds:0,useRefreshToken:!1,usePushedAuthorisationRequests:!1,ignoreNonceAfterRefresh:!1,postLoginRoute:"/",forbiddenRoute:"/forbidden",unauthorizedRoute:"/unauthorized",autoUserInfo:!0,autoCleanStateAfterAuthentication:!0,triggerAuthorizationResultEvent:!1,logLevel:U2.Warn,issValidationOff:!1,historyCleanupOff:!1,maxIdTokenIatOffsetAllowedInSeconds:120,disableIatOffsetValidation:!1,customParamsAuthRequest:{},customParamsRefreshTokenRequest:{},customParamsEndSessionRequest:{},customParamsCodeRequest:{},disableRefreshIdTokenAuthTimeValidation:!1,triggerRefreshWhenIdTokenExpired:!0,tokenRefreshInSeconds:4,refreshTokenRetryInSeconds:3,ngswBypass:!1},M3={result:!0,messages:[],level:"none"},st=s=>s.authority?M3:{result:!1,messages:["The authority URL MUST be provided in the configuration! "],level:"error"},nt=s=>s.clientId?M3:{result:!1,messages:["The clientId is required and missing from your config!"],level:"error"},it=s=>{if(!s)return"";let{authority:t,clientId:n,scope:e}=s;return`${t}${n}${e}`},lt=s=>new Set(s).size!==s.length,at=s=>{let t=s.map(c=>it(c));return t.some(c=>c==="")?{result:!1,messages:["Please make sure you add an object with a 'config' property: ....({ config }) instead of ...(config)"],level:"error"}:lt(t)?{result:!1,messages:["You added multiple configs with the same authority, clientId and scope"],level:"warning"}:M3},rt=s=>s.redirectUrl?M3:{result:!1,messages:["The redirectUrl is required and missing from your config"],level:"error"},ot=s=>{let t=s.silentRenew,n=s.useRefreshToken,e=s.silentRenewUrl;return t&&!n&&!e?{result:!1,messages:["Please provide a silent renew URL if using renew and not refresh tokens"],level:"error"}:M3},ft=s=>{let t=s.useRefreshToken,n=s.silentRenew,c=(s.scope||"").split(" ").includes("offline_access");return t&&n&&!c?{result:!1,messages:["When using silent renew and refresh tokens please set the `offline_access` scope"],level:"warning"}:M3},mt=[st,ft,rt,nt,ot],ut=[at],dt=(()=>{let t=class t{constructor(){this.loggerService=r(H)}validateConfigs(e){return this.validateConfigsInternal(e??[],ut)}validateConfig(e){return this.validateConfigInternal(e,mt)}validateConfigsInternal(e,c){if(e.length===0)return!1;let i=c.map(a=>a(e)),l=0;return e.forEach(a=>{let o=this.processValidationResultsAndGetErrorCount(i,a);l+=o}),l===0}validateConfigInternal(e,c){let i=c.map(a=>a(e));return this.processValidationResultsAndGetErrorCount(i,e)===0}processValidationResultsAndGetErrorCount(e,c){let i=e.filter(o=>o.messages.length>0),l=this.getAllMessagesOfType("error",i),a=this.getAllMessagesOfType("warning",i);return l.forEach(o=>this.loggerService.logError(c,o)),a.forEach(o=>this.loggerService.logWarning(c,o)),l.length}getAllMessagesOfType(e,c){return c.filter(l=>l.level===e).map(l=>l.messages).reduce((l,a)=>l.concat(a),[])}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),O0=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.publicEventsService=r(j2),this.storagePersistenceService=r(o1),this.platformProvider=r(Jc),this.authWellKnownService=r(L3),this.loader=r(g4),this.configValidationService=r(dt),this.configsInternal={}}hasManyConfigs(){return Object.keys(this.configsInternal).length>1}getAllConfigurations(){return Object.values(this.configsInternal)}getOpenIDConfiguration(e){return this.configsAlreadySaved()?b(this.getConfig(e)):this.getOpenIDConfigurations(e).pipe(k(c=>c.currentConfig))}getOpenIDConfigurations(e){return this.loadConfigs().pipe(B(c=>this.prepareAndSaveConfigs(c)),k(c=>({allConfigs:c,currentConfig:this.getConfig(e)})))}hasAtLeastOneConfig(){return Object.keys(this.configsInternal).length>0}saveConfig(e){let{configId:c}=e;this.configsInternal[c]=e}loadConfigs(){return this.loader.loadConfigs()}configsAlreadySaved(){return this.hasAtLeastOneConfig()}getConfig(e){if(e)return this.configsInternal[e]||null;let[,c]=Object.entries(this.configsInternal)[0]||[[null,null]];return c||null}prepareAndSaveConfigs(e){if(!this.configValidationService.validateConfigs(e))return b([]);this.createUniqueIds(e);let c=e.map(l=>this.handleConfig(l));return a2(c).pipe(k(l=>l.filter(a=>!!a)),k(l=>l))}createUniqueIds(e){e.forEach((c,i)=>{c.configId||(c.configId=`${i}-${c.clientId}`)})}handleConfig(e){if(!this.configValidationService.validateConfig(e))return this.loggerService.logError(e,"Validation of config rejected with errors. Config is NOT set."),b(null);e.authWellknownEndpointUrl||(e.authWellknownEndpointUrl=e.authority);let c=this.prepareConfig(e);this.saveConfig(c);let i=this.enhanceConfigWithWellKnownEndpoint(c);return this.publicEventsService.fireEvent(b1.ConfigLoaded,i),b(c)}enhanceConfigWithWellKnownEndpoint(e){let c=this.storagePersistenceService.read("authWellKnownEndPoints",e);if(c)return e.authWellknownEndpoints=c,e;let i=e.authWellknownEndpoints;return i&&(this.authWellKnownService.storeWellKnownEndpoints(e,i),e.authWellknownEndpoints=i),e}prepareConfig(e){let c=C(C({},tt),e);return this.setSpecialCases(c),c}setSpecialCases(e){this.platformProvider.isBrowser()||(e.startCheckSession=!1,e.silentRenew=!1,e.useRefreshToken=!1,e.usePushedAuthorisationRequests=!1)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),R5=(()=>{let t=class t{constructor(){this.document=r(C1),this.loggerService=r(H)}getExistingIFrame(e){let c=this.getIFrameFromParentWindow(e);if(this.isIFrameElement(c))return c;let i=this.getIFrameFromWindow(e);return this.isIFrameElement(i)?i:null}addIFrameToWindowBody(e,c){let i=this.document.createElement("iframe");return i.id=e,i.title=e,this.loggerService.logDebug(c,i),i.style.display="none",this.document.body.appendChild(i),i}getIFrameFromParentWindow(e){try{let c=this.document.defaultView?.parent.document.getElementById(e);return this.isIFrameElement(c)?c:null}catch{return null}}getIFrameFromWindow(e){let c=this.document.getElementById(e);return this.isIFrameElement(c)?c:null}isIFrameElement(e){return!!e&&e instanceof HTMLIFrameElement}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),A5="myiFrameForSilentRenew",q0=(()=>{let t=class t{constructor(){this.refreshSessionWithIFrameCompletedInternal$=new l2,this.loggerService=r(H),this.iFrameService=r(R5),this.flowsService=r(x4),this.resetAuthDataService=r(b2),this.flowsDataService=r(x1),this.authStateService=r(R1),this.flowHelper=r(y2),this.implicitFlowCallbackService=r(H5),this.intervalService=r(O3)}get refreshSessionWithIFrameCompleted$(){return this.refreshSessionWithIFrameCompletedInternal$.asObservable()}getOrCreateIframe(e){let c=this.getExistingIframe();return c||this.iFrameService.addIFrameToWindowBody(A5,e)}isSilentRenewConfigured(e){let{useRefreshToken:c,silentRenew:i}=e;return!c&&!!i}codeFlowCallbackSilentRenewIframe(e,c,i){let l=new e2({fromString:e[1]}),a=l.get("error");if(a)return this.authStateService.updateAndPublishAuthState({isAuthenticated:!1,validationResult:e1.LoginRequired,isRenewProcess:!0}),this.resetAuthDataService.resetAuthorizationData(c,i),this.flowsDataService.setNonce("",c),this.intervalService.stopPeriodicTokenCheck(),w(()=>new Error(a));let o=l.get("code")??"",u=l.get("state")??"",p=l.get("session_state"),z={code:o,refreshToken:"",state:u,sessionState:p,authResult:null,isRenewProcess:!0,jwtKeys:null,validationResult:null,existingIdToken:null};return this.flowsService.processSilentRenewCodeFlowCallback(z,c,i).pipe(m1(v=>(this.intervalService.stopPeriodicTokenCheck(),this.resetAuthDataService.resetAuthorizationData(c,i),w(()=>new Error(v)))))}silentRenewEventHandler(e,c,i){if(this.loggerService.logDebug(c,"silentRenewEventHandler"),!e.detail)return;let l;if(this.flowHelper.isCurrentFlowCodeFlow(c)){let o=e.detail.toString().split("?");l=this.codeFlowCallbackSilentRenewIframe(o,c,i)}else l=this.implicitFlowCallbackService.authenticatedImplicitFlowCallback(c,i,e.detail);l.subscribe({next:o=>{this.refreshSessionWithIFrameCompletedInternal$.next(o),this.flowsDataService.resetSilentRenewRunning(c)},error:o=>{this.loggerService.logError(c,"Error: "+o),this.refreshSessionWithIFrameCompletedInternal$.next(null),this.flowsDataService.resetSilentRenewRunning(c)}})}getExistingIframe(){return this.iFrameService.getExistingIFrame(A5)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),_5=(()=>{let t=class t{constructor(){this.renderer=r(o6).createRenderer(null,null),this.loggerService=r(H),this.urlService=r(K1),this.silentRenewService=r(q0),this.document=r(C1)}refreshSessionWithIframe(e,c,i){return this.loggerService.logDebug(e,"BEGIN refresh session Authorize Iframe renew"),this.urlService.getRefreshSessionSilentRenewUrl(e,i).pipe(L(l=>this.sendAuthorizeRequestUsingSilentRenew(l,e,c)))}sendAuthorizeRequestUsingSilentRenew(e,c,i){let l=this.silentRenewService.getOrCreateIframe(c);return this.initSilentRenewRequest(c,i),this.loggerService.logDebug(c,`sendAuthorizeRequestUsingSilentRenew for URL: ${e}`),new w2(a=>{let o=()=>{l.removeEventListener("load",o),this.loggerService.logDebug(c,"removed event listener from IFrame"),a.next(!0),a.complete()};l.addEventListener("load",o),l.contentWindow?.location.replace(e??"")})}initSilentRenewRequest(e,c){let i=Math.random(),l=this.renderer.listen("window","oidc-silent-renew-init",o=>{o.detail!==i&&(l(),a())}),a=this.renderer.listen("window","oidc-silent-renew-message",o=>this.silentRenewService.silentRenewEventHandler(o,e,c));this.document.defaultView?.dispatchEvent(new CustomEvent("oidc-silent-renew-init",{detail:i}))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),O5=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.resetAuthDataService=r(b2),this.flowsService=r(x4),this.intervalService=r(O3)}refreshSessionWithRefreshTokens(e,c,i){this.loggerService.logDebug(e,"BEGIN refresh session Authorize");let l=!1;return this.flowsService.processRefreshToken(e,c,i).pipe(m1(a=>(this.resetAuthDataService.resetAuthorizationData(e,c),l=!0,w(()=>new Error(a)))),n6(()=>l&&this.intervalService.stopPeriodicTokenCheck()))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),pt=(()=>{let t=class t{constructor(){this.resetAuthDataService=r(b2),this.flowHelper=r(y2),this.flowsDataService=r(x1),this.loggerService=r(H),this.userService=r(C3),this.authStateService=r(R1),this.refreshSessionIframeService=r(_5),this.refreshSessionRefreshTokenService=r(O5),this.intervalService=r(O3),this.storagePersistenceService=r(o1),this.publicEventsService=r(j2),this.configurationService=r(O0)}startTokenValidationPeriodically(e,c){let i=this.getConfigsWithSilentRenewEnabled(e);if(i.length<=0||this.intervalService.isTokenValidationRunning())return;let l=this.getSmallestRefreshTimeFromConfigs(i),a=this.intervalService.startPeriodicTokenCheck(l).pipe(L(()=>{let o={};return i.forEach(u=>{let p=u.configId,z=this.getRefreshEvent(u,e);o[p]=z}),a2(o)}));this.intervalService.runTokenValidationRunning=a.pipe(m1(o=>w(()=>new Error(o)))).subscribe({next:o=>{for(let[u,p]of Object.entries(o))this.configurationService.getOpenIDConfiguration(u).subscribe(z=>{this.loggerService.logDebug(z,"silent renew, periodic check finished!"),this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(z)&&this.flowsDataService.resetSilentRenewRunning(z)})},error:o=>{this.loggerService.logError(c,"silent renew failed!",o)}})}getRefreshEvent(e,c){if(!this.shouldStartPeriodicallyCheckForConfig(e))return b(null);let l=this.createRefreshEventForConfig(e,c);return this.publicEventsService.fireEvent(b1.SilentRenewStarted),l.pipe(m1(a=>(this.loggerService.logError(e,"silent renew failed!",a),this.publicEventsService.fireEvent(b1.SilentRenewFailed,a),this.flowsDataService.resetSilentRenewRunning(e),w(()=>new Error(a)))))}getSmallestRefreshTimeFromConfigs(e){return e.reduce((i,l)=>(i.tokenRefreshInSeconds??0)<(l.tokenRefreshInSeconds??0)?i:l).tokenRefreshInSeconds??0}getConfigsWithSilentRenewEnabled(e){return e.filter(c=>c.silentRenew)}createRefreshEventForConfig(e,c){return this.loggerService.logDebug(e,"starting silent renew..."),this.configurationService.getOpenIDConfiguration(e.configId).pipe(L(i=>{if(!i?.silentRenew)return this.resetAuthDataService.resetAuthorizationData(i,c),b(null);if(this.flowsDataService.setSilentRenewRunning(i),this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(i)){let a=this.storagePersistenceService.read("storageCustomParamsRefresh",i)||{},{customParamsRefreshTokenRequest:o}=i,u=C(C({},o),a);return this.refreshSessionRefreshTokenService.refreshSessionWithRefreshTokens(i,c,u)}let l=this.storagePersistenceService.read("storageCustomParamsAuthRequest",i);return this.refreshSessionIframeService.refreshSessionWithIframe(i,c,l)}))}shouldStartPeriodicallyCheckForConfig(e){let c=this.authStateService.getIdToken(e),i=this.flowsDataService.isSilentRenewRunning(e),l=this.flowsDataService.isCodeFlowInProgress(e),a=this.userService.getUserDataFromStore(e);if(this.loggerService.logDebug(e,`Checking: silentRenewRunning: ${i}, isCodeFlowInProgress: ${l} - has idToken: ${!!c} - has userData: ${!!a}`),!(!!a&&!i&&!!c&&!l))return!1;let u=this.authStateService.hasIdTokenExpiredAndRenewCheckIsEnabled(e),p=this.authStateService.hasAccessTokenExpiredIfExpiryExists(e);return u||p}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),ht=3,q5=(()=>{let t=class t{constructor(){this.flowHelper=r(y2),this.flowsDataService=r(x1),this.loggerService=r(H),this.silentRenewService=r(q0),this.authStateService=r(R1),this.authWellKnownService=r(L3),this.refreshSessionIframeService=r(_5),this.storagePersistenceService=r(o1),this.refreshSessionRefreshTokenService=r(O5),this.userService=r(C3)}userForceRefreshSession(e,c,i){return e?(this.persistCustomParams(i,e),this.forceRefreshSession(e,c,i).pipe(D1(()=>this.flowsDataService.resetSilentRenewRunning(e)))):w(()=>new Error("Please provide a configuration before setting up the module"))}forceRefreshSession(e,c,i){let{customParamsRefreshTokenRequest:l,configId:a}=e,o=C(C({},l),i);if(this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(e))return this.startRefreshSession(e,c,o).pipe(k(()=>{let z=this.authStateService.areAuthStorageTokensValid(e);return z?{idToken:this.authStateService.getIdToken(e),accessToken:this.authStateService.getAccessToken(e),userData:this.userService.getUserDataFromStore(e),isAuthenticated:z,configId:a}:{isAuthenticated:!1,errorMessage:"",userData:null,idToken:"",accessToken:"",configId:a}}));let{silentRenewTimeoutInSeconds:u}=e,p=(u??0)*1e3;return a2([this.startRefreshSession(e,c,i),this.silentRenewService.refreshSessionWithIFrameCompleted$.pipe(A2(1))]).pipe(B3(p),$3(z=>z.pipe(k2((v,E)=>{let I=E+1;return!(v instanceof c6)||I>ht?w(()=>new Error(v)):(this.loggerService.logDebug(e,`forceRefreshSession timeout. Attempt #${I}`),this.flowsDataService.resetSilentRenewRunning(e),W3(I*1e3))}))),k(([z,v])=>{let E=this.authStateService.areAuthStorageTokensValid(e);return E?{idToken:v?.authResult?.id_token??"",accessToken:v?.authResult?.access_token??"",userData:this.userService.getUserDataFromStore(e),isAuthenticated:E,configId:a}:{isAuthenticated:!1,errorMessage:"",userData:null,idToken:"",accessToken:"",configId:a}}))}persistCustomParams(e,c){let{useRefreshToken:i}=c;e&&(i?this.storagePersistenceService.write("storageCustomParamsRefresh",e,c):this.storagePersistenceService.write("storageCustomParamsAuthRequest",e,c))}startRefreshSession(e,c,i){let l=this.flowsDataService.isSilentRenewRunning(e);return this.loggerService.logDebug(e,`Checking: silentRenewRunning: ${l}`),!l?this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).pipe(L(()=>(this.flowsDataService.setSilentRenewRunning(e),this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(e)?this.refreshSessionRefreshTokenService.refreshSessionWithRefreshTokens(e,c,i):this.refreshSessionIframeService.refreshSessionWithIframe(e,c,i)))):b(null)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),E5="myiFrameForCheckSession",U0=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.storagePersistenceService=r(o1),this.iFrameService=r(R5),this.eventService=r(j2),this.zone=r(K2),this.document=r(C1),this.checkSessionReceived=!1,this.scheduledHeartBeatRunning=null,this.lastIFrameRefresh=0,this.outstandingMessages=0,this.heartBeatInterval=3e3,this.iframeRefreshInterval=6e4,this.checkSessionChangedInternal$=new P1(!1)}get checkSessionChanged$(){return this.checkSessionChangedInternal$.asObservable()}ngOnDestroy(){this.stop();let e=this.document.defaultView;e&&this.iframeMessageEventListener&&e.removeEventListener("message",this.iframeMessageEventListener,!1)}isCheckSessionConfigured(e){let{startCheckSession:c}=e;return!!c}start(e){if(this.scheduledHeartBeatRunning)return;let{clientId:c}=e;this.pollServerSession(c,e)}stop(){this.scheduledHeartBeatRunning&&(this.clearScheduledHeartBeat(),this.checkSessionReceived=!1)}serverStateChanged(e){let{startCheckSession:c}=e;return!!c&&this.checkSessionReceived}getExistingIframe(){return this.iFrameService.getExistingIFrame(E5)}init(e){if(this.lastIFrameRefresh+this.iframeRefreshInterval>Date.now())return b(void 0);let c=this.storagePersistenceService.read("authWellKnownEndPoints",e);if(!c)return this.loggerService.logWarning(e,"CheckSession - init check session: authWellKnownEndpoints is undefined. Returning."),b();let i=this.getOrCreateIframe(e);this.bindMessageEventToIframe(e);let l=c.checkSessionIframe,a=i.contentWindow;return l||this.loggerService.logWarning(e,"CheckSession - init check session: checkSessionIframe is not configured to run"),a?a.location.replace(l):this.loggerService.logWarning(e,"CheckSession - init check session: IFrame contentWindow does not exist"),new w2(o=>{i.onload=()=>{this.lastIFrameRefresh=Date.now(),o.next(),o.complete()}})}pollServerSession(e,c){this.outstandingMessages=0;let i=()=>{this.init(c).pipe(A2(1)).subscribe(()=>{let l=this.getExistingIframe();if(l&&e){this.loggerService.logDebug(c,`CheckSession - clientId : '${e}' - existingIframe: '${l}'`);let a=this.storagePersistenceService.read("session_state",c),o=this.storagePersistenceService.read("authWellKnownEndPoints",c),u=l.contentWindow;if(a&&o?.checkSessionIframe&&u){let p=new URL(o.checkSessionIframe)?.origin;this.outstandingMessages++,u.postMessage(e+" "+a,p)}else this.loggerService.logDebug(c,`CheckSession - session_state is '${a}' - AuthWellKnownEndPoints is '${JSON.stringify(o,null,2)}'`),this.checkSessionChangedInternal$.next(!0)}else this.loggerService.logWarning(c,`CheckSession - OidcSecurityCheckSession pollServerSession checkSession IFrame does not exist:
               clientId : '${e}' - existingIframe: '${l}'`);this.outstandingMessages>3&&this.loggerService.logError(c,`CheckSession - OidcSecurityCheckSession not receiving check session response messages.
                            Outstanding messages: '${this.outstandingMessages}'. Server unreachable?`),this.zone.runOutsideAngular(()=>{this.scheduledHeartBeatRunning=this.document?.defaultView?.setTimeout(()=>this.zone.run(i),this.heartBeatInterval)??null})})};i()}clearScheduledHeartBeat(){this.scheduledHeartBeatRunning!==null&&(clearTimeout(this.scheduledHeartBeatRunning),this.scheduledHeartBeatRunning=null)}messageHandler(e,c){let i=this.getExistingIframe(),a=!!this.storagePersistenceService.read("authWellKnownEndPoints",e)?.checkSessionIframe?.startsWith(c.origin);this.outstandingMessages=0,i&&a&&c.source===i.contentWindow&&(c.data==="error"?this.loggerService.logWarning(e,"CheckSession - error from check session messageHandler"):c.data==="changed"?(this.loggerService.logDebug(e,`CheckSession - ${c} from check session messageHandler`),this.checkSessionReceived=!0,this.eventService.fireEvent(b1.CheckSessionReceived,c.data),this.checkSessionChangedInternal$.next(!0)):(this.eventService.fireEvent(b1.CheckSessionReceived,c.data),this.loggerService.logDebug(e,`CheckSession - ${c.data} from check session messageHandler`)))}bindMessageEventToIframe(e){this.iframeMessageEventListener=this.messageHandler.bind(this,e);let c=this.document.defaultView;c&&c.addEventListener("message",this.iframeMessageEventListener,!1)}getOrCreateIframe(e){return this.getExistingIframe()||this.iFrameService.addIFrameToWindowBody(E5,e)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),N4=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.storagePersistenceService=r(o1),this.document=r(C1),this.STORAGE_IDENTIFIER="popupauth",this.popUp=null,this.handle=-1,this.resultInternal$=new l2}get result$(){return this.resultInternal$.asObservable()}get windowInternal(){return this.document.defaultView}isCurrentlyInPopup(e){if(this.canAccessSessionStorage()){let c=this.storagePersistenceService.read(this.STORAGE_IDENTIFIER,e),i=this.windowInternal;return i?!!i.opener&&i.opener!==i&&!!c:!1}return!1}openPopUp(e,c,i){let l=this.getOptions(c);this.storagePersistenceService.write(this.STORAGE_IDENTIFIER,"true",i);let a=this.windowInternal;if(!a)return;if(!e){this.loggerService.logError(i,"Could not open popup, url is empty");return}if(this.popUp=a.open(e,"_blank",l),!this.popUp){this.storagePersistenceService.remove(this.STORAGE_IDENTIFIER,i),this.loggerService.logError(i,"Could not open popup");return}this.loggerService.logDebug(i,"Opened popup with url "+e);let o=u=>{if(!u?.data||typeof u.data!="string"){this.cleanUp(o,i);return}this.loggerService.logDebug(i,"Received message from popup with url "+u.data),this.resultInternal$.next({userClosed:!1,receivedUrl:u.data}),this.cleanUp(o,i)};a.addEventListener("message",o,!1),this.handle=a.setInterval(()=>{this.popUp?.closed&&(this.resultInternal$.next({userClosed:!0,receivedUrl:""}),this.cleanUp(o,i))},200)}sendMessageToMainWindow(e,c){let i=this.windowInternal;if(i&&i.opener){let l=i.location.href;this.sendMessage(e,l,c)}}cleanUp(e,c){let i=this.windowInternal;i&&(i.removeEventListener("message",e,!1),i.clearInterval(this.handle),this.popUp&&(this.storagePersistenceService.remove(this.STORAGE_IDENTIFIER,c),this.popUp.close(),this.popUp=null))}sendMessage(e,c,i){let l=this.windowInternal;if(l){if(!e){this.loggerService.logDebug(i,`Can not send message to parent, no url: '${e}'`);return}l.opener.postMessage(e,c)}}getOptions(e){let c={width:500,height:500,left:50,top:50},i=C(C({},c),e||{}),l=this.windowInternal;if(!l)return"";let a=i.width||c.width,o=i.height||c.height,u=l.screenLeft+(l.outerWidth-a)/2,p=l.screenTop+(l.outerHeight-o)/2;return i.left=u,i.top=p,Object.entries(i).map(([z,v])=>`${encodeURIComponent(z)}=${encodeURIComponent(v)}`).join(",")}canAccessSessionStorage(){return typeof navigator<"u"&&navigator.cookieEnabled&&typeof Storage<"u"}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),zt=(()=>{let t=class t{constructor(){this.document=r(C1)}getStateParamFromCurrentUrl(e){let c=e||this.getCurrentUrl();if(!c)return null;let i=new URL(c);return new URLSearchParams(i.search).get("state")}getCurrentUrl(){return this.document?.defaultView?.location.toString()??null}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),B0=(()=>{let t=class t{constructor(){this.checkSessionService=r(U0),this.currentUrlService=r(zt),this.silentRenewService=r(q0),this.userService=r(C3),this.loggerService=r(H),this.authStateService=r(R1),this.callbackService=r(T5),this.refreshSessionService=r(q5),this.periodicallyTokenCheckService=r(pt),this.popupService=r(N4),this.autoLoginService=r(wc),this.storagePersistenceService=r(o1),this.publicEventsService=r(j2)}getConfig(e,c){let i=this.currentUrlService.getStateParamFromCurrentUrl(c);return i?this.getConfigurationWithUrlState([e],i):e}checkAuth(e,c,i){if(!e)return w(()=>new Error("Please provide a configuration before setting up the module"));this.publicEventsService.fireEvent(b1.CheckingAuth);let l=this.currentUrlService.getStateParamFromCurrentUrl(i);return this.getConfig(e,i)?this.checkAuthWithConfig(e,c,i):w(()=>new Error(`could not find matching config for state ${l}`))}checkAuthMultiple(e,c){let i=this.currentUrlService.getStateParamFromCurrentUrl(c);if(i){let o=this.getConfigurationWithUrlState(e,i);return o?this.composeMultipleLoginResults(e,o,c):w(()=>new Error(`could not find matching config for state ${i}`))}let l=e,a=l.map(o=>this.checkAuthWithConfig(o,l,c));return a2(a)}checkAuthIncludingServer(e,c){return e?this.checkAuthWithConfig(e,c).pipe(L(i=>{let{isAuthenticated:l}=i;return l?b(i):this.refreshSessionService.forceRefreshSession(e,c).pipe(D1(a=>{a?.isAuthenticated&&this.startCheckSessionAndValidation(e,c)}))})):w(()=>new Error("Please provide a configuration before setting up the module"))}checkAuthWithConfig(e,c,i){if(!e){let z="Please provide at least one configuration before setting up the module";return this.loggerService.logError(e,z),b({isAuthenticated:!1,errorMessage:z,userData:null,idToken:"",accessToken:"",configId:""})}let l=i||this.currentUrlService.getCurrentUrl();if(!l){let z="No URL found!";return this.loggerService.logError(e,z),b({isAuthenticated:!1,errorMessage:z,userData:null,idToken:"",accessToken:"",configId:""})}let{configId:a,authority:o}=e;if(this.loggerService.logDebug(e,`Working with config '${a}' using '${o}'`),this.popupService.isCurrentlyInPopup(e))return this.popupService.sendMessageToMainWindow(l,e),b({isAuthenticated:!1,errorMessage:"",userData:null,idToken:"",accessToken:"",configId:""});let u=this.callbackService.isCallback(l);return this.loggerService.logDebug(e,`currentUrl to check auth with: '${l}'`),(u?this.callbackService.handleCallbackAndFireEvents(l,e,c):b({})).pipe(k(()=>{let z=this.authStateService.areAuthStorageTokensValid(e);return this.loggerService.logDebug(e,`checkAuth completed. Firing events now. isAuthenticated: ${z}`),z&&(this.startCheckSessionAndValidation(e,c),u||(this.authStateService.setAuthenticatedAndFireEvent(c),this.userService.publishUserDataIfExists(e,c))),this.publicEventsService.fireEvent(b1.CheckingAuthFinished),{isAuthenticated:z,userData:this.userService.getUserDataFromStore(e),accessToken:this.authStateService.getAccessToken(e),idToken:this.authStateService.getIdToken(e),configId:a}}),D1(({isAuthenticated:z})=>{z&&this.autoLoginService.checkSavedRedirectRouteAndNavigate(e)}),m1(({message:z})=>(this.loggerService.logError(e,z),this.publicEventsService.fireEvent(b1.CheckingAuthFinishedWithError,z),b({isAuthenticated:!1,errorMessage:z,userData:null,idToken:"",accessToken:"",configId:a}))))}startCheckSessionAndValidation(e,c){this.checkSessionService.isCheckSessionConfigured(e)&&this.checkSessionService.start(e),this.periodicallyTokenCheckService.startTokenValidationPeriodically(c,e),this.silentRenewService.isSilentRenewConfigured(e)&&this.silentRenewService.getOrCreateIframe(e)}getConfigurationWithUrlState(e,c){if(!c)return null;for(let i of e)if(this.storagePersistenceService.read("authStateControl",i)===c)return i;return null}composeMultipleLoginResults(e,c,i){let l=e.filter(u=>u.configId!==c.configId),a=this.checkAuthWithConfig(c,e,i),o=l.map(u=>{let{redirectUrl:p}=u;return this.checkAuthWithConfig(u,e,p)});return a2([a,...o])}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),j0=(()=>{let t=class t{constructor(){this.document=r(C1)}redirectTo(e){this.document.location.href=e}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),W0=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.flowHelper=r(y2)}hasConfigValidResponseType(e){return this.flowHelper.isCurrentFlowAnyImplicitFlow(e)||this.flowHelper.isCurrentFlowCodeFlow(e)?!0:(this.loggerService.logWarning(e,"module configured incorrectly, invalid response_type. Check the responseType in the config"),!1)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Ct=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.urlService=r(K1),this.dataService=r(B2),this.storagePersistenceService=r(o1)}postParRequest(e,c){let i=new J2;i=i.set("Content-Type","application/x-www-form-urlencoded");let l=this.storagePersistenceService.read("authWellKnownEndPoints",e);if(!l)return w(()=>new Error("Could not read PAR endpoint because authWellKnownEndPoints are not given"));let a=l.parEndpoint;return a?this.urlService.createBodyForParCodeFlowRequest(e,c).pipe(L(o=>this.dataService.post(a,o,e,i).pipe($2(2),k(u=>(this.loggerService.logDebug(e,"par response: ",u),{expiresIn:u.expires_in,requestUri:u.request_uri})),m1(u=>{let p="There was an error on ParService postParRequest";return this.loggerService.logError(e,p,u),w(()=>new Error(p))})))):w(()=>new Error("Could not read PAR endpoint from authWellKnownEndpoints"))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Lt=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.responseTypeValidationService=r(W0),this.urlService=r(K1),this.redirectService=r(j0),this.authWellKnownService=r(L3),this.popupService=r(N4),this.checkAuthService=r(B0),this.parService=r(Ct)}loginPar(e,c){if(!this.responseTypeValidationService.hasConfigValidResponseType(e)){this.loggerService.logError(e,"Invalid response type!");return}this.loggerService.logDebug(e,"BEGIN Authorize OIDC Flow, no auth data"),this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).pipe(L(()=>this.parService.postParRequest(e,c))).subscribe(i=>{this.loggerService.logDebug(e,"par response: ",i);let l=this.urlService.getAuthorizeParUrl(i.requestUri,e);if(this.loggerService.logDebug(e,"par request url: ",l),!l){this.loggerService.logError(e,`Could not create URL with param ${i.requestUri}: '${l}'`);return}c?.urlHandler?c.urlHandler(l):this.redirectService.redirectTo(l)})}loginWithPopUpPar(e,c,i,l){let{configId:a}=e;if(!this.responseTypeValidationService.hasConfigValidResponseType(e)){let o="Invalid response type!";return this.loggerService.logError(e,o),w(()=>new Error(o))}return this.loggerService.logDebug(e,"BEGIN Authorize OIDC Flow with popup, no auth data"),this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).pipe(L(()=>this.parService.postParRequest(e,i)),L(o=>{this.loggerService.logDebug(e,`par response: ${o}`);let u=this.urlService.getAuthorizeParUrl(o.requestUri,e);if(this.loggerService.logDebug(e,"par request url: ",u),!u){let p=`Could not create URL with param ${o.requestUri}: 'url'`;return this.loggerService.logError(e,p),w(()=>new Error(p))}return this.popupService.openPopUp(u,l,e),this.popupService.result$.pipe(A2(1),L(p=>{let{userClosed:z,receivedUrl:v}=p;return z?b({isAuthenticated:!1,errorMessage:"User closed popup",userData:null,idToken:"",accessToken:"",configId:a}):this.checkAuthService.checkAuth(e,c,v)}))}))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),Mt=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.responseTypeValidationService=r(W0),this.urlService=r(K1),this.authWellKnownService=r(L3),this.popupService=r(N4),this.checkAuthService=r(B0)}loginWithPopUpStandard(e,c,i,l){let{configId:a}=e;if(!this.responseTypeValidationService.hasConfigValidResponseType(e)){let o="Invalid response type!";return this.loggerService.logError(e,o),w(()=>new Error(o))}return this.loggerService.logDebug(e,"BEGIN Authorize OIDC Flow with popup, no auth data"),this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).pipe(L(()=>this.urlService.getAuthorizeUrl(e,i)),D1(o=>this.popupService.openPopUp(o,l,e)),L(()=>this.popupService.result$.pipe(A2(1),L(o=>{let{userClosed:u,receivedUrl:p}=o;return u?b({isAuthenticated:!1,errorMessage:"User closed popup",userData:null,idToken:"",accessToken:"",configId:a}):this.checkAuthService.checkAuth(e,c,p)}))))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),gt=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.responseTypeValidationService=r(W0),this.urlService=r(K1),this.redirectService=r(j0),this.authWellKnownService=r(L3),this.flowsDataService=r(x1)}loginStandard(e,c){if(!this.responseTypeValidationService.hasConfigValidResponseType(e)){this.loggerService.logError(e,"Invalid response type!");return}this.loggerService.logDebug(e,"BEGIN Authorize OIDC Flow, no auth data"),this.flowsDataService.setCodeFlowInProgress(e),this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(e).subscribe(()=>{let{urlHandler:i}=c||{};this.flowsDataService.resetSilentRenewRunning(e),this.urlService.getAuthorizeUrl(e,c).subscribe(l=>{if(!l){this.loggerService.logError(e,"Could not create URL",l);return}i?i(l):this.redirectService.redirectTo(l)})})}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),vt=(()=>{let t=class t{constructor(){this.parLoginService=r(Lt),this.popUpLoginService=r(Mt),this.standardLoginService=r(gt),this.storagePersistenceService=r(o1),this.popupService=r(N4)}login(e,c){if(!e)throw new Error("Please provide a configuration before setting up the module");let{usePushedAuthorisationRequests:i}=e;return c?.customParams&&this.storagePersistenceService.write("storageCustomParamsAuthRequest",c.customParams,e),i?this.parLoginService.loginPar(e,c):this.standardLoginService.loginStandard(e,c)}loginWithPopUp(e,c,i,l){if(!e)throw new Error("Please provide a configuration before setting up the module");if(this.popupService.isCurrentlyInPopup(e))return b({errorMessage:"There is already a popup open."});let{usePushedAuthorisationRequests:o}=e;return i?.customParams&&this.storagePersistenceService.write("storageCustomParamsAuthRequest",i.customParams,e),o?this.parLoginService.loginWithPopUpPar(e,c,i,l):this.popUpLoginService.loginWithPopUpStandard(e,c,i,l)}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function U5(s){return s.reduce((t,n)=>t.concat(Array.isArray(n)?U5(n):n),[])}var St=(()=>{let t=class t{getConfigIdForClosestMatchingRoute(e,c){for(let i of c){let{secureRoutes:l}=i;for(let a of l??[])if(e.startsWith(a))return{matchingRoute:a,matchingConfig:i}}return{matchingRoute:null,matchingConfig:null}}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function B5(){return(s,t)=>yt(s,t,{configurationService:r(O0),authStateService:r(R1),closestMatchingRouteService:r(St),loggerService:r(H)})}function yt(s,t,n){if(!n.configurationService.hasAtLeastOneConfig())return t(s);let e=n.configurationService.getAllConfigurations(),c=e.map(u=>u.secureRoutes||[]);if(U5(c).length===0)return n.loggerService.logDebug(e[0],"No routes to check configured"),t(s);let{matchingConfig:l,matchingRoute:a}=n.closestMatchingRouteService.getConfigIdForClosestMatchingRoute(s.url,e);if(!l)return n.loggerService.logDebug(e[0],`Did not find any configured route for route ${s.url}`),t(s);n.loggerService.logDebug(l,`'${s.url}' matches configured route '${a}'`);let o=n.authStateService.getAccessToken(l);return o?(n.loggerService.logDebug(l,`'${s.url}' matches configured route '${a}', adding token`),s=s.clone({headers:s.headers.set("Authorization","Bearer "+o)}),t(s)):(n.loggerService.logDebug(l,`Wanted to add token to ${s.url} but found no token: '${o}'`),t(s))}function bt(s){let t=C({},s);for(let n in s)(s[n]===void 0||s[n]===null)&&delete t[n];return t}var xt=(()=>{let t=class t{constructor(){this.loggerService=r(H),this.dataService=r(B2),this.storagePersistenceService=r(o1),this.urlService=r(K1),this.checkSessionService=r(U0),this.resetAuthDataService=r(b2),this.redirectService=r(j0)}logoff(e,c,i){if(!e)return w(()=>new Error("Please provide a configuration before setting up the module"));this.loggerService.logDebug(e,"logoff, remove auth",i);let{urlHandler:l,customParams:a}=i||{},o=this.urlService.getEndSessionUrl(e,a);return o?this.checkSessionService.serverStateChanged(e)?(this.loggerService.logDebug(e,"Server State changed. Logoff was only locally. Returning."),b(null)):l?(this.loggerService.logDebug(e,`Custom UrlHandler found. Using this to handle logoff with url '${o}'`),l(o),this.resetAuthDataService.resetAuthorizationData(e,c),b(null)):this.logoffInternal(i,o,e,c):(this.loggerService.logDebug(e,"No endsessionUrl present. Logoff was only locally. Returning."),b(null))}logoffLocal(e,c){this.resetAuthDataService.resetAuthorizationData(e,c),this.checkSessionService.stop()}logoffLocalMultiple(e){e.forEach(c=>this.logoffLocal(c,e))}logoffAndRevokeTokens(e,c,i){if(!e)return w(()=>new Error("Please provide a configuration before setting up the module"));let{revocationEndpoint:l}=this.storagePersistenceService.read("authWellKnownEndPoints",e)||{};return l?this.storagePersistenceService.getRefreshToken(e)?this.revokeRefreshToken(e).pipe(L(a=>this.revokeAccessToken(e)),m1(a=>{let o="revoke token failed";return this.loggerService.logError(e,o,a),w(()=>new Error(o))}),B(()=>this.logoff(e,c,i))):this.revokeAccessToken(e).pipe(m1(a=>{let o="revoke accessToken failed";return this.loggerService.logError(e,o,a),w(()=>new Error(o))}),B(()=>this.logoff(e,c,i))):(this.loggerService.logDebug(e,"revocation endpoint not supported"),this.logoff(e,c,i))}revokeAccessToken(e,c){if(!e)return w(()=>new Error("Please provide a configuration before setting up the module"));let i=c||this.storagePersistenceService.getAccessToken(e),l=this.urlService.createRevocationEndpointBodyAccessToken(i,e);return this.sendRevokeRequest(e,l)}revokeRefreshToken(e,c){if(!e)return w(()=>new Error("Please provide a configuration before setting up the module"));let i=c||this.storagePersistenceService.getRefreshToken(e),l=this.urlService.createRevocationEndpointBodyRefreshToken(i,e);return this.sendRevokeRequest(e,l)}logoffInternal(e,c,i,l){let{logoffMethod:a,customParams:o}=e||{};if(!a||a==="GET")return this.redirectService.redirectTo(c),this.resetAuthDataService.resetAuthorizationData(i,l),b(null);let{state:u,logout_hint:p,ui_locales:z}=o||{},{clientId:v}=i,E=this.storagePersistenceService.getIdToken(i),W=this.urlService.getPostLogoutRedirectUrl(i),I=this.getHeaders(),{url:f1}=this.urlService.getEndSessionEndpoint(i),i1=bt({id_token_hint:E,client_id:v,post_logout_redirect_uri:W,state:u,logout_hint:p,ui_locales:z});return this.resetAuthDataService.resetAuthorizationData(i,l),this.dataService.post(f1,i1,i,I)}sendRevokeRequest(e,c){let i=this.urlService.getRevocationEndpointUrl(e),l=this.getHeaders();return this.dataService.post(i,c,e,l).pipe($2(2),L(a=>(this.loggerService.logDebug(e,"revocation endpoint post response: ",a),b(a))),m1(a=>{let o="Revocation request failed";return this.loggerService.logError(e,o,a),w(()=>new Error(o))}))}getHeaders(){let e=new J2;return e=e.set("Content-Type","application/x-www-form-urlencoded"),e}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})(),j5=(()=>{let t=class t{constructor(){this.checkSessionService=r(U0),this.checkAuthService=r(B0),this.userService=r(C3),this.tokenHelperService=r(y4),this.configurationService=r(O0),this.authStateService=r(R1),this.flowsDataService=r(x1),this.callbackService=r(T5),this.logoffRevocationService=r(xt),this.loginService=r(vt),this.refreshSessionService=r(q5),this.urlService=r(K1),this.authWellKnownService=r(L3),this.userData=y1(this.userData$,{requireSync:!0}),this.authenticated=y1(this.isAuthenticated$,{requireSync:!0})}get userData$(){return this.userService.userData$}get isAuthenticated$(){return this.authStateService.authenticated$}get checkSessionChanged$(){return this.checkSessionService.checkSessionChanged$}get stsCallback$(){return this.callbackService.stsCallback$}preloadAuthWellKnownDocument(e){return this.configurationService.getOpenIDConfiguration(e).pipe(B(c=>this.authWellKnownService.queryAndStoreAuthWellKnownEndPoints(c)))}getConfigurations(){return this.configurationService.getAllConfigurations()}getConfiguration(e){return this.configurationService.getOpenIDConfiguration(e)}getUserData(e){return this.configurationService.getOpenIDConfiguration(e).pipe(k(c=>this.userService.getUserDataFromStore(c)))}checkAuth(e,c){return this.configurationService.getOpenIDConfigurations(c).pipe(B(({allConfigs:i,currentConfig:l})=>this.checkAuthService.checkAuth(l,i,e)))}checkAuthMultiple(e){return this.configurationService.getOpenIDConfigurations().pipe(B(({allConfigs:c})=>this.checkAuthService.checkAuthMultiple(c,e)))}isAuthenticated(e){return this.configurationService.getOpenIDConfiguration(e).pipe(k(c=>this.authStateService.isAuthenticated(c)))}checkAuthIncludingServer(e){return this.configurationService.getOpenIDConfigurations(e).pipe(B(({allConfigs:c,currentConfig:i})=>this.checkAuthService.checkAuthIncludingServer(i,c)))}getAccessToken(e){return this.configurationService.getOpenIDConfiguration(e).pipe(k(c=>this.authStateService.getAccessToken(c)))}getIdToken(e){return this.configurationService.getOpenIDConfiguration(e).pipe(k(c=>this.authStateService.getIdToken(c)))}getRefreshToken(e){return this.configurationService.getOpenIDConfiguration(e).pipe(k(c=>this.authStateService.getRefreshToken(c)))}getAuthenticationResult(e){return this.configurationService.getOpenIDConfiguration(e).pipe(k(c=>this.authStateService.getAuthenticationResult(c)))}getPayloadFromIdToken(e=!1,c){return this.configurationService.getOpenIDConfiguration(c).pipe(k(i=>{let l=this.authStateService.getIdToken(i);return this.tokenHelperService.getPayloadFromToken(l,e,i)}))}getPayloadFromAccessToken(e=!1,c){return this.configurationService.getOpenIDConfiguration(c).pipe(k(i=>{let l=this.authStateService.getAccessToken(i);return this.tokenHelperService.getPayloadFromToken(l,e,i)}))}setState(e,c){return this.configurationService.getOpenIDConfiguration(c).pipe(k(i=>this.flowsDataService.setAuthStateControl(e,i)))}getState(e){return this.configurationService.getOpenIDConfiguration(e).pipe(k(c=>this.flowsDataService.getAuthStateControl(c)))}authorize(e,c){this.configurationService.getOpenIDConfiguration(e).subscribe(i=>this.loginService.login(i,c))}authorizeWithPopUp(e,c,i){return this.configurationService.getOpenIDConfigurations(i).pipe(B(({allConfigs:l,currentConfig:a})=>this.loginService.loginWithPopUp(a,l,e,c)))}forceRefreshSession(e,c){return this.configurationService.getOpenIDConfigurations(c).pipe(B(({allConfigs:i,currentConfig:l})=>this.refreshSessionService.userForceRefreshSession(l,i,e)))}logoffAndRevokeTokens(e,c){return this.configurationService.getOpenIDConfigurations(e).pipe(B(({allConfigs:i,currentConfig:l})=>this.logoffRevocationService.logoffAndRevokeTokens(l,i,c)))}logoff(e,c){return this.configurationService.getOpenIDConfigurations(e).pipe(B(({allConfigs:i,currentConfig:l})=>this.logoffRevocationService.logoff(l,i,c)))}logoffLocal(e){this.configurationService.getOpenIDConfigurations(e).subscribe(({allConfigs:c,currentConfig:i})=>this.logoffRevocationService.logoffLocal(i,c))}logoffLocalMultiple(){this.configurationService.getOpenIDConfigurations().subscribe(({allConfigs:e})=>this.logoffRevocationService.logoffLocalMultiple(e))}revokeAccessToken(e,c){return this.configurationService.getOpenIDConfiguration(c).pipe(B(i=>this.logoffRevocationService.revokeAccessToken(i,e)))}revokeRefreshToken(e,c){return this.configurationService.getOpenIDConfiguration(c).pipe(B(i=>this.logoffRevocationService.revokeRefreshToken(i,e)))}getEndSessionUrl(e,c){return this.configurationService.getOpenIDConfiguration(c).pipe(k(i=>this.urlService.getEndSessionUrl(i,e)))}getAuthorizeUrl(e,c){return this.configurationService.getOpenIDConfiguration(c).pipe(B(i=>this.urlService.getAuthorizeUrl(i,e?{customParams:e}:void 0)))}};t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var x2=(()=>{class s{http=r(j1);oidcSecurityService=r(j5);connectedUserQuery;notConnected="NOT_CONNECTED";fetch(){return l1(()=>({queryKey:["connected-user"],queryFn:()=>e6(this.fetchUserHttp(!1))}))}fetchUserHttp(n){let e=new e2().set("forceResync",n);return this.http.get(`${J.apiUrl}/users/authenticated`,{params:e})}login(){this.oidcSecurityService.authorize()}logout(){this.oidcSecurityService.logoff().subscribe()}initAuthentication(){this.oidcSecurityService.checkAuth().subscribe(n=>{n.isAuthenticated?console.log("connected"):console.log("not connected")})}hasAnyAuthorities(n,e){return Array.isArray(e)||(e=[e]),n.authorities?n.authorities.some(c=>e.includes(c)):!1}static \u0275fac=function(e){return new(e||s)};static \u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var g3=(s,t)=>{let n=r(x2),e=r(a1);if(j(e)){let c=s.data.authorities;return G3(50).pipe(E1(()=>n.connectedUserQuery?.isPending()==!1),k(()=>n.connectedUserQuery?.data()),k(i=>!c||c.length===0||n.hasAnyAuthorities(i,c)),B3(3e3))}else return!1};var q3=["XS","S","M","L","XL","XXL"];var Nt=(s,t)=>t.publicId;function wt(s,t){s&1&&(f(0,"span",18),d(1," Name is required "),m())}function kt(s,t){s&1&&(f(0,"span",18),d(1," Brand is required "),m())}function At(s,t){s&1&&(f(0,"span",18),d(1," Color is required "),m())}function Et(s,t){s&1&&(f(0,"span",18),d(1," Description is required "),m())}function It(s,t){s&1&&(f(0,"span",18),d(1," Brand is required "),m())}function Vt(s,t){s&1&&(f(0,"span",18),d(1," Stock is required "),m())}function Pt(s,t){if(s&1&&(f(0,"option",15),d(1),m()),s&2){let n=t.$implicit;q1("value",n),h(),A(n)}}function Dt(s,t){if(s&1&&(f(0,"option",15),d(1),m()),s&2){let n=t.$implicit;C6("value","",n.publicId,"+",n.name,""),h(),A(n.name)}}function Ft(s,t){if(s&1&&X(0,Dt,2,4,"option",15,Nt),s&2){let n=P();Y(n.categoriesQuery.data().content)}}function Ht(s,t){s&1&&(f(0,"span",18),d(1," At least one picture is required "),m())}function Tt(s,t){s&1&&g(0,"span",23)}var W5=(()=>{class s{formBuilder=r(h3);productService=r(u2);toastService=r(M1);router=r(V1);productPictures=new Array;name=new r1("",{nonNullable:!0,validators:[L1.required]});description=new r1("",{nonNullable:!0,validators:[L1.required]});price=new r1(0,{nonNullable:!0,validators:[L1.required]});size=new r1("XS",{nonNullable:!0,validators:[L1.required]});category=new r1("",{nonNullable:!0,validators:[L1.required]});brand=new r1("",{nonNullable:!0,validators:[L1.required]});color=new r1("",{nonNullable:!0,validators:[L1.required]});featured=new r1(!1,{nonNullable:!0,validators:[L1.required]});pictures=new r1([],{nonNullable:!0,validators:[L1.required]});stock=new r1(0,{nonNullable:!0,validators:[L1.required]});createForm=this.formBuilder.nonNullable.group({brand:this.brand,color:this.color,description:this.description,name:this.name,price:this.price,size:this.size,category:this.category,featured:this.featured,pictures:this.pictures,stock:this.stock});loading=!1;categoriesQuery=l1(()=>({queryKey:["categories"],queryFn:()=>$(this.productService.findAllCategories())}));createMutation=G1(()=>({mutationFn:n=>$(this.productService.createProduct(n)),onSettled:()=>this.onCreationSettled(),onSuccess:()=>this.onCreationSuccess(),onError:()=>this.onCreationError()}));create(){let n={brand:this.createForm.getRawValue().brand,color:this.createForm.getRawValue().color,description:this.createForm.getRawValue().description,name:this.createForm.getRawValue().name,price:this.createForm.getRawValue().price,size:this.createForm.getRawValue().size,category:{publicId:this.createForm.getRawValue().category.split("+")[0],name:this.createForm.getRawValue().category.split("+")[1]},featured:this.createForm.getRawValue().featured,pictures:this.productPictures,nbInStock:this.createForm.getRawValue().stock};this.loading=!0,this.createMutation.mutate(n)}extractFileFromTarget(n){let e=n;return n===null||e.files===null?null:e.files}onUploadNewPicture(n){this.productPictures=[];let e=this.extractFileFromTarget(n);if(e!==null)for(let c=0;c<e.length;c++){let i=e.item(c);if(i!==null){let l={file:i,mimeType:i.type};this.productPictures.push(l)}}}onCreationSettled(){this.loading=!1}onCreationSuccess(){this.router.navigate(["/admin/products/list"]),this.toastService.show("Product created","SUCCESS")}onCreationError(){this.toastService.show("Issue when creating product","ERROR")}sizes=q3;static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-create-product"]],standalone:!0,features:[_],decls:85,vars:31,consts:[[1,"grid","grid-cols-3"],["id","createForm",3,"ngSubmit","formGroup"],[1,"text-lg","font-bold"],[1,"form-control","w-full"],[1,"label"],[1,"label-text"],["type","text","placeholder","Type name here","formControlName","name",1,"input","input-bordered","w-full"],["class","label-text-alt text-red-600",4,"ngxControlError","ngxControlErrorTrack"],["type","text","placeholder","Type brand here","formControlName","brand",1,"input","input-bordered","w-full"],["type","color","formControlName","color",1,"input","input-bordered","w-full"],["placeholder","Type description here","formControlName","description",1,"textarea","textarea-bordered","w-full"],["type","number","placeholder","Type price here","formControlName","price",1,"input","input-bordered","w-full"],["type","number","placeholder","Enter the stock here","formControlName","stock",1,"input","input-bordered","w-full"],["formControlName","size",1,"select","select-bordered","w-full"],["disabled","","selected",""],[3,"value"],["formControlName","category",1,"select","select-bordered","w-full"],["type","file","multiple","","formControlName","pictures",1,"file-input","w-full",3,"change"],[1,"label-text-alt","text-red-600"],[1,"label","cursor-pointer"],[1,"flex","justify-center"],["type","checkbox","checked","checked","formControlName","featured",1,"checkbox","checkbox-primary"],["type","submit",1,"btn","btn-primary","btn-wide","w-full",3,"disabled"],[1,"loading-spinner","loading"]],template:function(e,c){e&1&&(f(0,"div",0),g(1,"div"),f(2,"form",1),T("ngSubmit",function(){return c.create()}),f(3,"h1",2),d(4,"Create a new Product"),m(),f(5,"label",3)(6,"div",4)(7,"span",5),d(8,"Name"),m()(),g(9,"input",6),f(10,"div",4),V(11,wt,2,0,"span",7),m()(),f(12,"label",3)(13,"div",4)(14,"span",5),d(15,"Brand"),m()(),g(16,"input",8),f(17,"div",4),V(18,kt,2,0,"span",7),m()(),f(19,"label",3)(20,"div",4)(21,"span",5),d(22,"Color"),m()(),g(23,"input",9),f(24,"div",4),V(25,At,2,0,"span",7),m()(),f(26,"label",3)(27,"div",4)(28,"span",5),d(29,"Description"),m()(),f(30,"textarea",10),d(31," "),m(),f(32,"div",4),V(33,Et,2,0,"span",7),m()(),f(34,"label",3)(35,"div",4)(36,"span",5),d(37,"Price"),m()(),g(38,"input",11),f(39,"div",4),V(40,It,2,0,"span",7),m()(),f(41,"label",3)(42,"div",4)(43,"span",5),d(44,"Number of stock"),m()(),g(45,"input",12),f(46,"div",4),V(47,Vt,2,0,"span",7),m()(),f(48,"label",3)(49,"div",4)(50,"span",5),d(51,"Size"),m()(),f(52,"select",13)(53,"option",14),d(54,"Select size"),m(),X(55,Pt,2,2,"option",15,Y2),m(),g(57,"div",4),m(),f(58,"label",3)(59,"div",4)(60,"span",5),d(61,"Category"),m()(),f(62,"select",16)(63,"option",14),d(64,"Select size"),m(),V(65,Ft,2,0),m(),g(66,"div",4),m(),f(67,"label",3)(68,"div",4)(69,"span",5),d(70,"Pictures"),m()(),f(71,"input",17),T("change",function(l){return c.onUploadNewPicture(l.target)}),m(),f(72,"div",4),V(73,Ht,2,0,"span",18),m()(),f(74,"div",3)(75,"label",19)(76,"span",5),d(77,"Featured"),m()(),f(78,"div",20),g(79,"input",21),m(),g(80,"div",4),m(),f(81,"button",22),V(82,Tt,1,0,"span",23),d(83," Create product "),m()(),g(84,"div"),m()),e&2&&(h(2),N("formGroup",c.createForm),h(7),S1("input-error",c.name.invalid&&!c.name.untouched),h(2),N("ngxControlError",c.name)("ngxControlErrorTrack","required"),h(5),S1("input-error",c.brand.invalid&&!c.brand.untouched),h(2),N("ngxControlError",c.brand)("ngxControlErrorTrack","required"),h(5),S1("input-error",c.color.invalid&&!c.color.untouched),h(2),N("ngxControlError",c.color)("ngxControlErrorTrack","required"),h(5),S1("input-error",c.description.invalid&&!c.description.untouched),h(3),N("ngxControlError",c.description)("ngxControlErrorTrack","required"),h(5),S1("input-error",c.price.invalid&&!c.price.untouched),h(2),N("ngxControlError",c.price)("ngxControlErrorTrack","required"),h(5),S1("input-error",c.stock.invalid&&!c.stock.untouched),h(2),N("ngxControlError",c.stock)("ngxControlErrorTrack","required"),h(8),Y(c.sizes),h(10),q(c.categoriesQuery.isSuccess()?65:-1),h(6),S1("input-error",c.brand.invalid&&!c.brand.untouched),h(2),q(c.productPictures.length===0&&c.pictures.invalid&&!c.pictures.untouched?73:-1),h(8),N("disabled",c.createForm.invalid),h(),q(c.loading?82:-1))},dependencies:[U,v5,p3,C5,M5,v2,I0,T3,L4,u3,d3,z3,n2,q2,M4]})}return s})();var Rt=(s,t)=>t.publicId,_t=s=>["/product",s],Ot=s=>({"background-color":s}),qt=()=>["fas","circle-exclamation"];function Ut(s,t){if(s&1){let n=N1();f(0,"tr",10)(1,"th"),d(2),m(),f(3,"td",13)(4,"a",14),d(5),m()(),f(6,"td"),d(7),m(),f(8,"td"),g(9,"div",15),m(),f(10,"td"),d(11),m(),f(12,"td"),d(13),m(),f(14,"td"),d(15),m(),f(16,"td"),d(17),m(),f(18,"td")(19,"div",16),T("click",function(){let c=c1(n).$implicit,i=P(2);return t1(i.deleteProduct(c.publicId))}),d(20," Delete "),m()()()}if(s&2){let n=t.$implicit,e=t.$index;h(2),A(e),h(2),N("routerLink",B1(9,_t,n.publicId)),h(),A(n.name),h(2),A(n.brand),h(2),N("ngStyle",B1(11,Ot,n.color)),h(2),A(n.price),h(2),A(n.nbInStock),h(2),A(n.featured),h(2),A(n.category.name)}}function Bt(s,t){if(s&1&&(f(0,"div",5)(1,"table",9)(2,"thead",10)(3,"tr",10),g(4,"th"),f(5,"th",11),d(6,"Name"),m(),f(7,"th"),d(8,"Brand"),m(),f(9,"th"),d(10,"Color"),m(),f(11,"th"),d(12,"Price"),m(),f(13,"th"),d(14,"Nb in stock"),m(),f(15,"th"),d(16,"Featured"),m(),f(17,"th"),d(18,"Category"),m(),f(19,"th"),d(20,"Actions"),m()()(),f(21,"tbody",12),X(22,Ut,21,13,"tr",10,Rt),m()()()),s&2){let n=P();h(22),Y(n.productsQuery.data().content)}}function jt(s,t){s&1&&(f(0,"div",6),g(1,"span",17),m())}function Wt(s,t){s&1&&(f(0,"div",7)(1,"span"),d(2,"Error! Failed to load products."),m()())}function Gt(s,t){s&1&&(f(0,"div",8),g(1,"fa-icon",18),f(2,"span"),d(3,"No product created yet."),m()()),s&2&&(h(),N("icon",s1(1,qt)))}var G5=(()=>{class s{productService=r(u2);toastService=r(M1);queryClient=J3();pageRequest={page:0,size:20,sort:["createdDate,desc"]};constructor(){d1(()=>this.handleProductQueryError())}productsQuery=l1(()=>({queryKey:["products",this.pageRequest],queryFn:()=>$(this.productService.findAllProducts(this.pageRequest))}));deleteMutation=G1(()=>({mutationFn:n=>$(this.productService.deleteProduct(n)),onSuccess:()=>this.onDeletionSuccess(),onError:()=>this.onDeletionError()}));deleteProduct(n){this.deleteMutation.mutate(n)}onDeletionSuccess(){this.queryClient.invalidateQueries({queryKey:["products"]}),this.toastService.show("Product deleted","SUCCESS")}onDeletionError(){this.toastService.show("Issue when deleting product","ERROR")}handleProductQueryError(){this.productsQuery.isError()&&this.toastService.show("Error failed to load products, please try again","ERROR")}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-admin-products"]],standalone:!0,features:[_],decls:16,vars:1,consts:[[1,"w-full","flex","justify-between","items-center"],[1,"text-2xl","font-bold"],["routerLink","/admin/products/create",1,"btn","btn-primary","me-5"],["routerLink","/admin/categories/create",1,"btn","btn-primary"],[1,"border-t","w-full","border-solid","border-gray-300","mt-3","mb-5"],[1,"overflow-x-auto","border","border-gray-300","rounded-md"],[1,"flex","w-full","justify-center"],[1,"alert","alert-error"],["role","alert",1,"alert","alert-info"],[1,"table","table-lg","table-zebra"],[1,"border-gray-300"],[1,"min-w-40"],[1,"border-0"],[1,"max-w-20","overflow-ellipsis","whitespace-nowrap","overflow-hidden"],[1,"link",3,"routerLink"],[1,"h-5","w-5","rounded-full",3,"ngStyle"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"loading","loading-spinner","loading-lg"],["size","2x",3,"icon"]],template:function(e,c){e&1&&(f(0,"div",0)(1,"div")(2,"h1",1),d(3,"Products"),m(),f(4,"div"),d(5,"Add and delete products"),m()(),f(6,"div")(7,"button",2),d(8," Create products "),m(),f(9,"button",3),d(10," Create categories "),m()()(),g(11,"div",4),V(12,Bt,24,0,"div",5)(13,jt,2,0,"div",6)(14,Wt,3,0,"div",7)(15,Gt,4,2,"div",8)),e&2&&(h(12),q(c.productsQuery.isSuccess()&&c.productsQuery.data().content.length!==0?12:c.productsQuery.isPending()?13:c.productsQuery.isError()?14:c.productsQuery.data().content.length===0?15:-1))},dependencies:[U,Y3,W1,p1]})}return s})();var $t=()=>[import("./chunk-STYQ5JTU.js").then(s=>s.FeaturedComponent)];function Qt(s,t){s&1&&g(0,"ecom-featured")}function Zt(s,t){s&1&&(f(0,"div"),d(1,"Loading... "),m())}var $5=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-home"]],standalone:!0,features:[_],decls:17,vars:0,consts:[[1,"hero","min-h-screen","rounded-xl",2,"background-image","url(./home/hero.webp)","background-size","cover"],[1,"hero-overlay","bg-opacity-20"],[1,"hero-content","justify-start","text-neutral-content","w-full","px-6","sm:px-8","lg:px-10"],[1,"text-left"],[1,"mb-5","text-3xl","sm:text-5xl","text-white","font-bold"],[1,"mb-5","text-lg","sm:text-2xl","text-white"],["routerLink","/products",1,"btn","btn-primary","btn-lg"],[1,"w-full","my-10","md:my-20"],[1,"text-2xl","sm:text-3xl","font-bold","text-center","my-8","sm:my-12"]],template:function(e,c){e&1&&(f(0,"div",0),g(1,"div",1),f(2,"div",2)(3,"div",3)(4,"h1",4),d(5," Ecommerce app "),m(),f(6,"p",5),d(7," Check out our collection of products "),m(),f(8,"button",6),d(9," Shop collection "),m()()()(),f(10,"div",7)(11,"h2",8),d(12," Featured products "),m(),V(13,Qt,1,0)(14,Zt,2,0),u6(15,13,$t,null,14),d6(),m())},dependencies:[U,W1]})}return s})();function G0(s){F1(G0);let t=r(S3),n=t.snapshot.params;if(typeof s=="function")return y1(t.params.pipe(k(s)),{initialValue:s(n)});let e=c=>s?c?.[s]??null:c;return y1(t.params.pipe(k(e)),{initialValue:e(n)})}var N2=(()=>{class s{platformId=r(a1);http=r(j1);keyCartStorage="cart";keySessionId="stripe-session-id";addedToCart$=new P1([]);addedToCart=this.addedToCart$.asObservable();constructor(){let n=this.getCartFromLocalStorage();this.addedToCart$.next(n)}getCartFromLocalStorage(){if(j(this.platformId)){let n=localStorage.getItem(this.keyCartStorage);return n?JSON.parse(n):[]}else return[]}addToCart(n,e){if(j(this.platformId)){let c={publicId:n,quantity:1},i=this.getCartFromLocalStorage();if(i.length!==0){let l=i.find(a=>a.publicId===n);l?e==="add"?l.quantity++:e==="remove"&&l.quantity--:i.push(c)}else i.push(c);localStorage.setItem(this.keyCartStorage,JSON.stringify(i)),this.addedToCart$.next(i)}}removeFromCart(n){if(j(this.platformId)){let e=this.getCartFromLocalStorage(),c=e.find(i=>i.publicId===n);c&&(e.splice(e.indexOf(c),1),localStorage.setItem(this.keyCartStorage,JSON.stringify(e)),this.addedToCart$.next(e))}}getCartDetail(){let n=this.getCartFromLocalStorage(),e=n.reduce((c,i)=>`${c}${c.length>0?",":""}${i.publicId}`,"");return this.http.get(`${J.apiUrl}/orders/get-cart-details`,{params:{productIds:e}}).pipe(k(c=>this.mapQuantity(c,n)))}mapQuantity(n,e){for(let c of e){let i=n.products.find(l=>l.publicId===c.publicId);i&&(i.quantity=c.quantity)}return n}initPaymentSession(n){return this.http.post(`${J.apiUrl}/orders/init-payment`,n)}storeSessionId(n){j(this.platformId)&&localStorage.setItem(this.keySessionId,n)}getSessionId(){if(j(this.platformId)){let n=localStorage.getItem(this.keySessionId);if(n)return n}return""}deleteSessionId(){j(this.platformId)&&localStorage.removeItem(this.keySessionId)}clearCart(){j(this.platformId)&&(localStorage.removeItem(this.keyCartStorage),this.addedToCart$.next([]))}static \u0275fac=function(e){return new(e||s)};static \u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Kt=(s,t)=>t.publicId,Xt=s=>({"background-color":s}),Yt=s=>["fas",s];function Jt(s,t){s&1&&(f(0,"div",10),d(1,"In stock"),m())}function es(s,t){s&1&&(f(0,"div",11),d(1,"Out of stock"),m())}function cs(s,t){s&1&&(f(0,"div",12),d(1," Best seller "),m())}function ts(s,t){if(s&1){let n=N1();f(0,"div",0)(1,"div",6),g(2,"img",7),m(),f(3,"div",8)(4,"h1",9),d(5),m(),V(6,Jt,2,0,"div",10)(7,es,2,0,"div",11)(8,cs,2,0,"div",12),f(9,"div",13)(10,"span",14),d(11),H1(12,"currency"),m(),f(13,"span",15),d(14),H1(15,"currency"),m()(),f(16,"div"),d(17,"Brand: "),f(18,"span",16),d(19),m()(),f(20,"div",17)(21,"div",18),d(22,"Color:"),m(),g(23,"div",19),m(),f(24,"div"),d(25,"Size: "),f(26,"span",16),d(27),m()(),f(28,"div",20)(29,"h2",21),d(30,"Description"),m(),d(31),m(),f(32,"button",22),T("click",function(){c1(n);let c=P();return t1(c.addToCart(c.productQuery.data()))}),g(33,"fa-icon",23),d(34),m()()()}if(s&2){let n=P();h(2),q1("alt",n.productQuery.data().name),N("src","data:"+n.productQuery.data().pictures[0].mimeType+";base64,"+n.productQuery.data().pictures[0].file,X2),h(3),L6("",n.productQuery.data().name," - ",n.productQuery.data().size,""),h(),q(n.productQuery.data().nbInStock>0?6:7),h(2),q(n.productQuery.data().featured?8:-1),h(3),A(T1(12,15,n.productQuery.data().price+200)),h(3),A(T1(15,17,n.productQuery.data().price)),h(5),A(n.productQuery.data().brand),h(4),N("ngStyle",B1(19,Xt,n.productQuery.data().color)),h(4),A(n.productQuery.data().size),h(4),v3(" ",n.productQuery.data().description," "),h(),N("disabled",n.productQuery.data().nbInStock<=0),h(),N("icon",B1(21,Yt,n.iconAddToCart)),h(),v3(" ",n.labelAddToCart," ")}}function ss(s,t){s&1&&(f(0,"div",1),g(1,"span",24),m())}function ns(s,t){if(s&1&&g(0,"ecom-product-card",5),s&2){let n=t.$implicit;N("product",n)}}var Q5=(()=>{class s{publicId=G0("publicId");productService=r(e3);router=r(V1);toastService=r(M1);cartService=r(N2);lastPublicId="";pageRequest={page:0,size:20,sort:[]};labelAddToCart="Add to cart";iconAddToCart="shopping-cart";constructor(){d1(()=>this.handlePublicIdChange()),d1(()=>this.handleProductQueryError()),d1(()=>this.handleRelatedProductQueryError())}productQuery=l1(()=>({queryKey:["product",this.publicId()],queryFn:()=>$(this.productService.findOneByPublicId(this.publicId()))}));relatedProductQuery=l1(()=>({queryKey:["related-product",this.publicId(),this.pageRequest],queryFn:()=>$(this.productService.findRelatedProduct(this.pageRequest,this.publicId()))}));handlePublicIdChange(){this.publicId()&&(this.lastPublicId!=this.publicId()&&this.lastPublicId!==""&&(this.relatedProductQuery.refetch(),this.productQuery.refetch()),this.lastPublicId=this.publicId())}handleRelatedProductQueryError(){this.relatedProductQuery.isError()&&this.toastService.show("Error! Failed to load related product. please try again.","ERROR")}handleProductQueryError(){this.productQuery.isError()&&this.toastService.show("Error! Failed to load product. please try again.","ERROR")}addToCart(n){this.cartService.addToCart(n.publicId,"add"),this.labelAddToCart="Added to cart",this.iconAddToCart="check",G3(3e3).pipe(A2(1)).subscribe(()=>{this.labelAddToCart="Add to cart",this.iconAddToCart="shopping-cart"})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-product-detail"]],standalone:!0,features:[_],decls:8,vars:1,consts:[[1,"flex","flex-col","lg:flex-row","justify-center","items-center","w-full"],[1,"flex","w-full","justify-center"],[1,"mt-10"],[1,"text-2xl","font-bold","mb-7","ms-4","sm:ms-0"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-8","sm:gap-5"],[3,"product"],[1,"lg:me-5"],["width","500px",1,"max-w-full","lg:max-w-none",3,"src","alt"],[1,"w-full","lg:w-auto"],[1,"text-3xl","font-bold"],[1,"text-green-500","text-lg"],[1,"text-red-500","text-lg"],[1,"rounded-md","border","w-32","p-2","text-center","border-black","my-5"],[1,"text-2xl","my-5"],[1,"line-through","me-2"],[1,"me-2"],[1,"font-bold"],[1,"flex","items-center","mt-1"],[1,"me-1"],[1,"w-5","h-5","rounded-full",3,"ngStyle"],[1,"my-5","w-96"],[1,"text-xl","font-bold"],[1,"btn","btn-primary","mt-5","w-full","lg:w-64",3,"click","disabled"],[1,"me-1",3,"icon"],[1,"loading","loading-spinner","loading-lg"]],template:function(e,c){if(e&1&&(V(0,ts,35,23,"div",0)(1,ss,2,0,"div",1),f(2,"div",2)(3,"h2",3),d(4,"Related products"),m(),f(5,"div",4),X(6,ns,1,1,"ecom-product-card",5,Kt),m()()),e&2){let i;q(c.productQuery.isSuccess()?0:c.productQuery.isPending()?1:-1),h(6),Y((i=c.relatedProductQuery.data())==null?null:i.content)}},dependencies:[U,Y3,m2,p1,e4]})}return s})();function is(s,t){if(s&1&&(f(0,"label",2),g(1,"input",7),f(2,"span",5),d(3),m()()),s&2){let n=t.$implicit;h(),q1("formControlName",n),h(2),A(n)}}var Z5=(()=>{class s{sort=P4("createdDate,asc");size=P4();productFilter=a6();formBuilder=r(h3);constructor(){d1(()=>this.updateSizeFormValue()),d1(()=>this.updateSortFormValue()),this.formFilterProducts.valueChanges.subscribe(()=>this.onFilterChange(this.formFilterProducts.getRawValue()))}formFilterProducts=this.formBuilder.nonNullable.group({sort:new r1(this.sort().split(",")[1],{nonNullable:!0,validators:[L1.required]}),size:this.buildSizeFormControl()});buildSizeFormControl(){let n=this.formBuilder.nonNullable.record({});for(let e of q3)n.addControl(e,new r1(!1,{nonNullable:!0}));return n}onFilterChange(n){let e={size:"",sort:[`createdDate,${n.sort}`]},c=[];n.size!==void 0&&(c=Object.entries(n.size));for(let[i,l]of c)l&&(e.size?.length===0?e.size=i:e.size+=`,${i}`);this.productFilter.emit(e)}getSizeFormGroup(){return this.formFilterProducts.get("size")}updateSizeFormValue(){if(this.size()){let n=this.size().split(",");for(let e of n)this.getSizeFormGroup().get(e).setValue(!0,{emitEvent:!1})}}updateSortFormValue(){this.sort()&&this.formFilterProducts.controls.sort.setValue(this.sort().split(",")[1],{emitEvent:!1})}sizes=q3;static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-products-filter"]],inputs:{sort:[1,"sort"],size:[1,"size"]},outputs:{productFilter:"productFilter"},standalone:!0,features:[_],decls:16,vars:2,consts:[[3,"formGroup"],[1,"font-bold","text-lg","mb-2"],[1,"cursor-pointer","label","justify-start","items-center"],[1,"font-bold","text-lg","mt-5","mb-2"],["type","radio","name","sort","value","asc","formControlName","sort",1,"radio","radio-primary"],[1,"label-text","ms-3"],["type","radio","name","sort","value","desc","formControlName","sort",1,"radio","radio-primary"],["type","checkbox","checked","checked",1,"checkbox","checkbox-primary","checkbox-md",3,"formControlName"]],template:function(e,c){e&1&&(f(0,"form",0)(1,"div",1),d(2,"Size"),m(),f(3,"form",0),X(4,is,4,2,"label",2,Y2),m(),f(6,"div",3),d(7,"Sorted By"),m(),f(8,"label",2),g(9,"input",4),f(10,"span",5),d(11,"Oldest"),m()(),f(12,"label",2),g(13,"input",6),f(14,"span",5),d(15,"Newest"),m()()()),e&2&&(N("formGroup",c.formFilterProducts),h(3),N("formGroup",c.getSizeFormGroup()),h(),Y(c.sizes))},dependencies:[U,z3,p3,v2,T3,V0,u3,d3,n2,q2]})}return s})();function i2(s,t={}){F1(i2);let n=r(S3),e=n.snapshot.queryParams||{},{transform:c,initialValue:i}=t;if(!s)return y1(n.queryParams,{initialValue:e});if(typeof s=="function")return y1(n.queryParams.pipe(k(s)),{initialValue:s(e)});let l=a=>{let o=a?.[s];return o?Array.isArray(o)?o.length<1?i??null:c?c(o[0]):o[0]:c?c(o):o:i??null};return y1(n.queryParams.pipe(k(l)),{initialValue:l(e)})}(function(s){function t(n,e={}){F1(s.array);let c=r(S3),i=c.snapshot.queryParams||{},{transform:l,initialValue:a}=e,o=p=>p?Array.isArray(p)?p.length<1?a??null:l?p.map(z=>l(z)):p:[l?l(p):p]:a??null,u=p=>{let z=p?.[n];return o(z)};return y1(c.queryParams.pipe(k(u)),{initialValue:u(i)})}s.array=t})(i2||(i2={}));var ls=(s,t)=>t.publicId;function as(s,t){if(s&1&&g(0,"ecom-product-card",6),s&2){let n=t.$implicit;N("product",n)}}function rs(s,t){if(s&1&&(f(0,"div",3),X(1,as,1,1,"ecom-product-card",6,ls),m()),s&2){let n=P();h(),Y(n.filteredProductsQuery.data().content)}}function os(s,t){s&1&&(f(0,"div",4),g(1,"span",7),m())}function fs(s,t){s&1&&(f(0,"div",5)(1,"div",8),d(2,"No results found"),m(),f(3,"div"),d(4,"Try to change your filters"),m()())}var K5=(()=>{class s{category=i2("category");size=i2("size");sort=i2("sort");productService=r(e3);router=r(V1);toastService=r(M1);pageRequest={page:0,size:20,sort:["createdDate,desc"]};filterProducts={category:this.category(),size:this.size()?this.size():"",sort:[this.sort()?this.sort():""]};lastCategory="";constructor(){d1(()=>this.handleFilteredProductsQueryError()),d1(()=>this.handleParametersChange())}filteredProductsQuery=l1(()=>({queryKey:["products",this.filterProducts],queryFn:()=>$(this.productService.filter(this.pageRequest,this.filterProducts))}));onFilterChange(n){n.category=this.category(),this.filterProducts=n,this.pageRequest.sort=n.sort,this.router.navigate(["/products"],{queryParams:C({},n)}),this.filteredProductsQuery.refetch()}handleFilteredProductsQueryError(){this.filteredProductsQuery.isError()&&this.toastService.show("Error! Failed to load products, please try again","ERROR")}handleParametersChange(){this.category()&&this.lastCategory!=this.category()&&this.lastCategory!==""&&(this.filterProducts={category:this.category(),size:this.size()?this.size():"",sort:[this.sort()?this.sort():""]},this.filteredProductsQuery.refetch()),this.lastCategory=this.category()}filter=E1;static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-products"]],standalone:!0,features:[_],decls:6,vars:3,consts:[[1,"grid","grid-cols-[1fr_6fr]","gap-5"],[1,"ms-5"],[3,"productFilter","sort","size"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],[1,"flex","w-full","justify-center"],[1,"flex","flex-col","items-center","justify-center"],[3,"product"],[1,"loading","loading-spinner","loading-lg"],[1,"font-bold","text-2xl"]],template:function(e,c){e&1&&(f(0,"div",0)(1,"div",1)(2,"ecom-products-filter",2),T("productFilter",function(l){return c.onFilterChange(l)}),m()(),V(3,rs,3,0,"div",3)(4,os,2,0,"div",4)(5,fs,5,0,"div",5),m()),e&2&&(h(2),N("sort",c.sort())("size",c.size()),h(),q(c.filteredProductsQuery.isSuccess()&&c.filteredProductsQuery.data().content.length!==0?3:c.filteredProductsQuery.isFetching()?4:c.filteredProductsQuery.isSuccess()&&c.filteredProductsQuery.data().content.length===0?5:-1))},dependencies:[U,Z5,e4]})}return s})();var $0=new u1("Stripe Publishable Key"),Q0=new u1("Stripe Options"),Z0=new u1("NGX_STRIPE_VERSION"),U3=class{version;loader;window;key;options;stripe$=new P1(void 0);stripe=this.stripe$.asObservable().pipe(E1(t=>!!t));constructor(t,n,e,c,i){this.version=t,this.loader=n,this.window=e,this.key=c,this.options=i,this.loader.asStream().pipe(E1(l=>l.loaded===!0),y(),k(()=>this.window.getNativeWindow().Stripe)).subscribe(l=>{let a=this.options?l(this.key,this.options):l(this.key);a.registerAppInfo(this.getNgxStripeAppInfo(this.version)),this.stripe$.next(a)})}getInstance(){return this.stripe$.getValue()}elements(t){return this.stripe.pipe(k(n=>n.elements(t)),y())}redirectToCheckout(t){return this.stripe.pipe(L(n=>S(n.redirectToCheckout(t))),y())}confirmPayment(t){return this.stripe.pipe(L(n=>S(n.confirmPayment(t))),y())}confirmAcssDebitPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmAcssDebitPayment(t,n,e))),y())}confirmUsBankAccountPayment(t,n){return this.stripe.pipe(L(e=>S(e.confirmUsBankAccountPayment(t,n))),y())}confirmAlipayPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmAlipayPayment(t,n,e))),y())}confirmAuBecsDebitPayment(t,n){return this.stripe.pipe(L(e=>S(e.confirmAuBecsDebitPayment(t,n))),y())}confirmBancontactPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmBancontactPayment(t,n,e))),y())}confirmBlikPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmBlikPayment(t,n,e))),y())}confirmBoletoPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmBoletoPayment(t,n,e))),y())}confirmCardPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmCardPayment(t,n,e))),y())}confirmCashappPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmCashappPayment(t,n,e))),y())}confirmCustomerBalancePayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmCustomerBalancePayment(t,n,e))),y())}confirmEpsPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmEpsPayment(t,n,e))),y())}confirmFpxPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmFpxPayment(t,n,e))),y())}confirmGiropayPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmGiropayPayment(t,n,e))),y())}confirmGrabPayPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmGrabPayPayment(t,n,e))),y())}confirmIdealPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmIdealPayment(t,n,e))),y())}confirmKlarnaPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmKlarnaPayment(t,n,e))),y())}confirmKonbiniPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmKonbiniPayment(t,n,e))),y())}confirmMobilepayPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmMobilepayPayment(t,n,e))),y())}confirmOxxoPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmOxxoPayment(t,n,e))),y())}confirmP24Payment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmP24Payment(t,n,e))),y())}confirmPayNowPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmPayNowPayment(t,n,e))),y())}confirmPayPalPayment(t,n){return this.stripe.pipe(L(e=>S(e.confirmPayPalPayment(t,n))),y())}confirmPixPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmPixPayment(t,n,e))),y())}confirmPromptPayPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmPromptPayPayment(t,n,e))),y())}confirmSepaDebitPayment(t,n){return this.stripe.pipe(L(e=>S(e.confirmSepaDebitPayment(t,n))),y())}confirmSofortPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmSofortPayment(t,n,e))),y())}confirmWechatPayPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmWechatPayPayment(t,n,e))),y())}handleCardAction(t){return this.stripe.pipe(L(n=>S(n.handleCardAction(t))),y())}handleNextAction(t){return this.stripe.pipe(L(n=>S(n.handleNextAction(t))),y())}verifyMicrodepositsForPayment(t,n){return this.stripe.pipe(L(e=>S(e.verifyMicrodepositsForPayment(t,n))),y())}createRadarSession(){return this.stripe.pipe(L(t=>S(t.createRadarSession())),y())}collectBankAccountForPayment(t){return this.stripe.pipe(L(n=>S(n.collectBankAccountForPayment(t))),y())}createPaymentMethod(t){return this.stripe.pipe(L(n=>S(n.createPaymentMethod(t))),y())}createConfirmationToken(t){return this.stripe.pipe(L(n=>S(n.createConfirmationToken(t))),y())}retrievePaymentIntent(t){return this.stripe.pipe(L(n=>S(n.retrievePaymentIntent(t))),y())}confirmSetup(t){return this.stripe.pipe(L(n=>S(n.confirmSetup(t))),y())}confirmAcssDebitSetup(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmAcssDebitSetup(t,n,e))),y())}confirmUsBankAccountSetup(t,n){return this.stripe.pipe(L(e=>S(e.confirmUsBankAccountSetup(t,n))),y())}confirmAuBecsDebitSetup(t,n){return this.stripe.pipe(L(e=>S(e.confirmAuBecsDebitSetup(t,n))),y())}confirmBacsDebitSetup(t,n){return this.stripe.pipe(L(e=>S(e.confirmBacsDebitSetup(t,n))),y())}confirmBancontactSetup(t,n){return this.stripe.pipe(L(e=>S(e.confirmBancontactSetup(t,n))),y())}confirmCardSetup(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmCardSetup(t,n,e))),y())}confirmCashappSetup(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmCashappSetup(t,n,e))),y())}confirmIdealSetup(t,n){return this.stripe.pipe(L(e=>S(e.confirmIdealSetup(t,n))),y())}confirmPayPalSetup(t,n){return this.stripe.pipe(L(e=>S(e.confirmPayPalSetup(t,n))),y())}confirmSepaDebitSetup(t,n){return this.stripe.pipe(L(e=>S(e.confirmSepaDebitSetup(t,n))),y())}confirmSofortSetup(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmSofortSetup(t,n,e))),y())}confirmAffirmPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmAffirmPayment(t,n,e))),y())}confirmAfterpayClearpayPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmAfterpayClearpayPayment(t,n,e))),y())}verifyMicrodepositsForSetup(t,n){return this.stripe.pipe(L(e=>S(e.verifyMicrodepositsForSetup(t,n))),y())}collectBankAccountForSetup(t){return this.stripe.pipe(L(n=>S(n.collectBankAccountForSetup(t))),y())}retrieveSetupIntent(t){return this.stripe.pipe(L(n=>S(n.retrieveSetupIntent(t))),y())}processOrder(t){return this.stripe.pipe(L(n=>S(n.processOrder(t))),y())}retrieveOrder(t){return this.stripe.pipe(L(n=>S(n.retrieveOrder(t))),y())}paymentRequest(t){return this.getInstance().paymentRequest(t)}createToken(t,n){return this.stripe.pipe(L(e=>S(e.createToken(t,n))),y())}createSource(t,n){return this.stripe.pipe(L(e=>S(e.createSource(t,n))),y())}retrieveSource(t){return this.stripe.pipe(L(n=>S(n.retrieveSource(t))),y())}verifyIdentity(t){return this.stripe.pipe(L(n=>S(n.verifyIdentity(t))),y())}collectFinancialConnectionsAccounts(t){return this.stripe.pipe(L(n=>S(n.collectFinancialConnectionsAccounts(t))),y())}collectBankAccountToken(t){return this.stripe.pipe(L(n=>S(n.collectBankAccountToken(t))),y())}createEphemeralKeyNonce(t){return this.stripe.pipe(L(n=>S(n.createEphemeralKeyNonce(t))),y())}initCustomCheckout(t){return this.stripe.pipe(L(n=>S(n.initCustomCheckout(t))),y())}initEmbeddedCheckout(t){return this.stripe.pipe(L(n=>S(n.initEmbeddedCheckout(t))),y())}handleCardPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.handleCardPayment(t,n,e))),y())}confirmPaymentIntent(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmPaymentIntent(t,n,e))),y())}handleCardSetup(t,n,e){return this.stripe.pipe(L(c=>S(c.handleCardSetup(t,n,e))),y())}confirmSetupIntent(t,n,e){return this.stripe.pipe(L(c=>S(c.confirmSetupIntent(t,n,e))),y())}handleFpxPayment(t,n,e){return this.stripe.pipe(L(c=>S(c.handleFpxPayment(t,n,e))),y())}getNgxStripeAppInfo(t){return{name:"ngx-stripe",url:"https://ngx-stripe.dev",partner_id:"pp_partner_JR4l1rmvUoPP4V",version:t}}},k4=(()=>{class s{platformId;constructor(n){this.platformId=n}getNativeWindow(){return j(this.platformId)?window:{}}static \u0275fac=function(e){return new(e||s)(z1(a1))};static \u0275prov=M({token:s,factory:s.\u0275fac})}return s})(),X5=(()=>{class s{platformId;constructor(n){this.platformId=n}getNativeDocument(){return j(this.platformId)?document:{}}static \u0275fac=function(e){return new(e||s)(z1(a1))};static \u0275prov=M({token:s,factory:s.\u0275fac})}return s})(),K0=(()=>{class s{platformId;window;document;status=new P1({error:!1,loaded:!1,loading:!1});constructor(n,e,c){this.platformId=n,this.window=e,this.document=c}asStream(){return this.load(),this.status.asObservable()}isReady(){return this.status.getValue().loaded}load(){if(y6(this.platformId))return;let n=this.status.getValue();if(this.window.getNativeWindow().hasOwnProperty("Stripe"))this.status.next({error:!1,loaded:!0,loading:!1});else if(!n.loaded&&!n.loading){this.status.next(D(C({},n),{loading:!0}));let e=this.document.getNativeDocument().createElement("script");e.type="text/javascript",e.async=!0,e.defer=!0,e.src="https://js.stripe.com/v3/",e.onload=()=>{this.status.next({error:!1,loaded:!0,loading:!1})},e.onerror=()=>{this.status.next({error:!0,loaded:!1,loading:!1})},this.document.getNativeDocument().body.appendChild(e)}}static \u0275fac=function(e){return new(e||s)(z1(a1),z1(k4),z1(X5))};static \u0275prov=M({token:s,factory:s.\u0275fac})}return s})(),A4=(()=>{class s{version;key;options;loader;window;stripe;constructor(n,e,c,i,l){this.version=n,this.key=e,this.options=c,this.loader=i,this.window=l,e&&(this.stripe=new U3(this.version,this.loader,this.window,e,c))}getStripeReference(){return this.loader.asStream().pipe(E1(n=>n.loaded===!0),k(()=>this.window.getNativeWindow().Stripe))}getInstance(){return this.stripe.getInstance()}setKey(n,e){return this.changeKey(n,e)}changeKey(n,e){return this.stripe=new U3(this.version,this.loader,this.window,n,e),this.stripe}elements(n){return this.stripe.elements(n)}redirectToCheckout(n){return this.stripe.redirectToCheckout(n)}confirmPayment(n){return this.stripe.confirmPayment(n)}confirmAcssDebitPayment(n,e,c){return this.stripe.confirmAcssDebitPayment(n,e,c)}confirmUsBankAccountPayment(n,e){return this.stripe.confirmUsBankAccountPayment(n,e)}confirmAlipayPayment(n,e,c){return this.stripe.confirmAlipayPayment(n,e,c)}confirmAuBecsDebitPayment(n,e){return this.stripe.confirmAuBecsDebitPayment(n,e)}confirmBancontactPayment(n,e,c){return this.stripe.confirmBancontactPayment(n,e,c)}confirmBlikPayment(n,e,c){return this.stripe.confirmBlikPayment(n,e,c)}confirmBoletoPayment(n,e,c){return this.stripe.confirmBoletoPayment(n,e,c)}confirmCardPayment(n,e,c){return this.stripe.confirmCardPayment(n,e,c)}confirmCashappPayment(n,e,c){return this.stripe.confirmCashappPayment(n,e,c)}confirmCustomerBalancePayment(n,e,c){return this.stripe.confirmCustomerBalancePayment(n,e,c)}confirmEpsPayment(n,e,c){return this.stripe.confirmEpsPayment(n,e,c)}confirmFpxPayment(n,e,c){return this.stripe.confirmFpxPayment(n,e,c)}confirmGiropayPayment(n,e,c){return this.stripe.confirmGiropayPayment(n,e,c)}confirmGrabPayPayment(n,e,c){return this.stripe.confirmGrabPayPayment(n,e,c)}confirmIdealPayment(n,e,c){return this.stripe.confirmIdealPayment(n,e,c)}confirmKlarnaPayment(n,e,c){return this.stripe.confirmKlarnaPayment(n,e,c)}confirmKonbiniPayment(n,e,c){return this.stripe.confirmKonbiniPayment(n,e,c)}confirmMobilepayPayment(n,e,c){return this.stripe.confirmMobilepayPayment(n,e,c)}confirmOxxoPayment(n,e,c){return this.stripe.confirmOxxoPayment(n,e,c)}confirmP24Payment(n,e,c){return this.stripe.confirmP24Payment(n,e,c)}confirmPayNowPayment(n,e,c){return this.stripe.confirmPayNowPayment(n,e,c)}confirmPayPalPayment(n,e){return this.stripe.confirmPayPalPayment(n,e)}confirmPixPayment(n,e,c){return this.stripe.confirmPixPayment(n,e,c)}confirmPromptPayPayment(n,e,c){return this.stripe.confirmPromptPayPayment(n,e,c)}confirmSepaDebitPayment(n,e){return this.stripe.confirmSepaDebitPayment(n,e)}confirmSofortPayment(n,e,c){return this.stripe.confirmSofortPayment(n,e,c)}confirmWechatPayPayment(n,e,c){return this.stripe.confirmWechatPayPayment(n,e,c)}handleCardAction(n){return this.stripe.handleCardAction(n)}handleNextAction(n){return this.stripe.handleNextAction(n)}verifyMicrodepositsForPayment(n,e){return this.stripe.verifyMicrodepositsForPayment(n,e)}createRadarSession(){return this.stripe.createRadarSession()}collectBankAccountForPayment(n){return this.stripe.collectBankAccountForPayment(n)}createPaymentMethod(n){return this.stripe.createPaymentMethod(n)}createConfirmationToken(n){return this.stripe.createConfirmationToken(n)}retrievePaymentIntent(n){return this.stripe.retrievePaymentIntent(n)}confirmSetup(n){return this.stripe.confirmSetup(n)}confirmAcssDebitSetup(n,e,c){return this.stripe.confirmAcssDebitSetup(n,e,c)}confirmUsBankAccountSetup(n,e){return this.stripe.confirmUsBankAccountSetup(n,e)}confirmAuBecsDebitSetup(n,e){return this.stripe.confirmAuBecsDebitSetup(n,e)}confirmBacsDebitSetup(n,e){return this.stripe.confirmBacsDebitSetup(n,e)}confirmBancontactSetup(n,e){return this.stripe.confirmBancontactSetup(n,e)}confirmCardSetup(n,e,c){return this.stripe.confirmCardSetup(n,e,c)}confirmCashappSetup(n,e,c){return this.stripe.confirmCashappSetup(n,e,c)}confirmIdealSetup(n,e){return this.stripe.confirmIdealSetup(n,e)}confirmPayPalSetup(n,e){return this.stripe.confirmPayPalSetup(n,e)}confirmSepaDebitSetup(n,e){return this.stripe.confirmSepaDebitSetup(n,e)}confirmSofortSetup(n,e,c){return this.stripe.confirmSofortSetup(n,e,c)}confirmAffirmPayment(n,e,c){return this.stripe.confirmAffirmPayment(n,e,c)}confirmAfterpayClearpayPayment(n,e,c){return this.stripe.confirmAfterpayClearpayPayment(n,e,c)}verifyMicrodepositsForSetup(n,e){return this.stripe.verifyMicrodepositsForSetup(n,e)}collectBankAccountForSetup(n){return this.stripe.collectBankAccountForSetup(n)}retrieveSetupIntent(n){return this.stripe.retrieveSetupIntent(n)}processOrder(n){return this.stripe.processOrder(n)}retrieveOrder(n){return this.stripe.retrieveOrder(n)}paymentRequest(n){return this.stripe.paymentRequest(n)}createToken(n,e){return this.stripe.createToken(n,e)}createSource(n,e){return this.stripe.createSource(n,e)}retrieveSource(n){return this.stripe.retrieveSource(n)}verifyIdentity(n){return this.stripe.verifyIdentity(n)}collectFinancialConnectionsAccounts(n){return this.stripe.collectFinancialConnectionsAccounts(n)}collectBankAccountToken(n){return this.stripe.collectBankAccountToken(n)}createEphemeralKeyNonce(n){return this.stripe.createEphemeralKeyNonce(n)}initCustomCheckout(n){return this.stripe.initCustomCheckout(n)}initEmbeddedCheckout(n){return this.stripe.initEmbeddedCheckout(n)}handleCardPayment(n,e,c){return this.stripe.handleCardPayment(n,e,c)}confirmPaymentIntent(n,e,c){return this.stripe.confirmPaymentIntent(n,e,c)}handleCardSetup(n,e,c){return this.stripe.handleCardSetup(n,e,c)}confirmSetupIntent(n,e,c){return this.stripe.confirmSetupIntent(n,e,c)}handleFpxPayment(n,e,c){return this.stripe.handleFpxPayment(n,e,c)}static \u0275fac=function(e){return new(e||s)(z1(Z0),z1($0),z1(Q0),z1(K0),z1(k4))};static \u0275prov=M({token:s,factory:s.\u0275fac})}return s})(),ms=(()=>{class s{stripeService;constructor(n){this.stripeService=n}elements(n,e={}){return n?Object.keys(e).length>0?n.elements(e):n.elements():Object.keys(e).length>0?this.stripeService.elements(e):this.stripeService.elements()}paymentRequest(n,e){return n?n.paymentRequest(e):this.stripeService.paymentRequest(e)}mergeOptions(n,e){return!e||n&&n.classes?n||{}:!n||!n.classes?D(C({},n||{}),{classes:{base:e,complete:`${e}--complete`,empty:`${e}--empty`,focus:`${e}--focus`,invalid:`${e}--invalid`,webkitAutoFill:`${e}--webkit-autoFill`}}):n||{}}static \u0275fac=function(e){return new(e||s)(z1(A4))};static \u0275prov=M({token:s,factory:s.\u0275fac})}return s})();var us=(()=>{class s{version;baseKey;baseOptions;loader;window;constructor(n,e,c,i,l){this.version=n,this.baseKey=e,this.baseOptions=c,this.loader=i,this.window=l}create(n,e){if(!n&&!this.baseKey)throw new Error("No key defined! Either you need to pass it as a parameter or define it when you call NgxStripeModule.forRoot()");return new U3(this.version,this.loader,this.window,n||this.baseKey,e||this.baseOptions)}static \u0275fac=function(e){return new(e||s)(z1(Z0),z1($0),z1(Q0),z1(K0),z1(k4))};static \u0275prov=M({token:s,factory:s.\u0275fac})}return s})();var ds="17.2.0";function ps(s,t){return[K0,A4,us,ms,k4,X5,{provide:$0,useValue:s},{provide:Q0,useValue:t},{provide:Z0,useValue:ds}]}function Y5(s,t){return K3([...ps(s,t)])}var hs=(s,t)=>t.publicId,zs=s=>["/product",s];function Cs(s,t){if(s&1){let n=N1();g(0,"div",11),f(1,"div",12)(2,"div",13),g(3,"img",14),f(4,"div",15)(5,"a",16),d(6),m(),f(7,"div",17),d(8),m(),f(9,"div",6),d(10),H1(11,"currency"),m()()(),f(12,"div",18)(13,"div",19)(14,"button",20),T("click",function(){let c=c1(n).$implicit,i=P(2);return t1(i.removeQuantityToCart(c.publicId,c.quantity))}),d(15,"- "),m(),f(16,"div"),d(17),m(),f(18,"button",20),T("click",function(){let c=c1(n).$implicit,i=P(2);return t1(i.addQuantityToCart(c.publicId))}),d(19,"+ "),m()(),f(20,"div",21),T("click",function(){let c=c1(n).$implicit,i=P(2);return t1(i.removeItem(c.publicId))}),d(21," Remove "),m()()()}if(s&2){let n=t.$implicit;h(3),q1("alt",n.name),N("src","data:"+n.picture.mimeType+";base64,"+n.picture.file,X2),h(2),N("routerLink",B1(9,zs,n.publicId)),h(),A(n.name),h(2),A(n.brand),h(2),A(T1(11,7,n.price)),h(7),A(n.quantity)}}function Ls(s,t){if(s&1&&X(0,Cs,22,11,null,null,hs),s&2){let n=P();Y(n.cart)}}function Ms(s,t){s&1&&(f(0,"div",3),g(1,"span",22),m())}function gs(s,t){s&1&&(f(0,"div",4)(1,"div",23),d(2,"No items in cart"),m(),f(3,"div"),d(4,"Add some items to your cart"),m()())}var J5=(()=>{class s{cartService=r(N2);oauth2Service=r(x2);toastService=r(M1);stripeService=r(A4);cart=[];platformId=r(a1);labelCheckout="Login to checkout";action="login";isInitPaymentSessionLoading=!1;cartQuery=l1(()=>({queryKey:["cart"],queryFn:()=>$(this.cartService.getCartDetail())}));initPaymentSession=G1(()=>({mutationFn:n=>$(this.cartService.initPaymentSession(n)),onSuccess:n=>this.onSessionCreateSuccess(n)}));constructor(){this.extractListToUpdate(),this.checkUserLoggedIn()}extractListToUpdate(){d1(()=>{this.cartQuery.isSuccess()&&(this.cart=this.cartQuery.data().products)})}checkUserLoggedIn(){d1(()=>{let n=this.oauth2Service.connectedUserQuery;n?.isError()?(this.labelCheckout="Login to checkout",this.action="login"):n?.isSuccess()&&(this.labelCheckout="Checkout",this.action="checkout")})}ngOnInit(){this.cartService.addedToCart.subscribe(n=>this.updateQuantity(n))}updateQuantity(n){for(let e of this.cart){let c=n.find(i=>i.publicId===e.publicId);c?e.quantity=c.quantity:this.cart.splice(this.cart.indexOf(e),1)}}addQuantityToCart(n){this.cartService.addToCart(n,"add")}removeQuantityToCart(n,e){e>1&&this.cartService.addToCart(n,"remove")}removeItem(n){let e=this.cart.findIndex(c=>c.publicId===n);e&&this.cart.splice(e,1),this.cartService.removeFromCart(n)}computeTotal(){return this.cart.reduce((n,e)=>n+e.price*e.quantity,0)}checkIfEmptyCart(){return j(this.platformId)?this.cartQuery.isSuccess()&&this.cartQuery.data().products.length===0:!1}checkout(){if(this.action==="login")this.oauth2Service.login();else if(this.action==="checkout"){this.isInitPaymentSessionLoading=!0;let n=this.cart.map(e=>({publicId:e.publicId,quantity:e.quantity}));this.initPaymentSession.mutate(n)}}onSessionCreateSuccess(n){this.cartService.storeSessionId(n.id),this.stripeService.redirectToCheckout({sessionId:n.id}).subscribe(e=>{this.isInitPaymentSessionLoading=!1,this.toastService.show(`Order error ${e.error.message}`,"ERROR")})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-cart"]],standalone:!0,features:[_],decls:27,vars:9,consts:[[1,"text-2xl","mb-2"],[1,"flex","flex-col","lg:flex-row"],[1,"flex-grow","me-5","w-full"],[1,"flex","w-full","justify-center"],[1,"flex","flex-col","items-center","justify-center","h-60"],[1,"bg-gray-100","border-gray-400","p-5","w-full","lg:w-96","h-72","mt-6","lg:mt-0","rounded-md"],[1,"font-bold"],[1,"border-t","border-gray-300","my-5"],[1,"flex","justify-between"],[1,"flex","justify-between","font-bold"],[1,"btn","btn-primary","w-full",3,"click","disabled"],[1,"border-t","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"p-4","flex"],["width","110px",1,"max-w-full","lg:max-w-none","me-5",3,"src","alt"],[1,"w-40"],[3,"routerLink"],[1,"text-sm"],[1,"flex"],[1,"w-32","flex","justify-around","items-center"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"ms-5","btn","btn-error","btn-outline",3,"click"],[1,"loading","loading-spinner","loading-lg"],[1,"font-bold","text-2xl"]],template:function(e,c){e&1&&(f(0,"div",0),d(1,"Shopping cart"),m(),f(2,"div",1)(3,"div",2),V(4,Ls,2,0)(5,Ms,2,0,"div",3)(6,gs,5,0,"div",4),m(),f(7,"div",5)(8,"div",6),d(9,"Order Summary"),m(),g(10,"div",7),f(11,"div",8)(12,"div"),d(13,"Delivery"),m(),f(14,"div"),d(15),H1(16,"currency"),m()(),g(17,"div",7),f(18,"div",9)(19,"div"),d(20,"Total"),m(),f(21,"div"),d(22),H1(23,"currency"),m()(),g(24,"div",7),f(25,"button",10),T("click",function(){return c.checkout()}),d(26),m()()()),e&2&&(h(4),q(c.cartQuery.isSuccess()&&c.cart.length!==0?4:c.cartQuery.isPending()?5:c.checkIfEmptyCart()?6:-1),h(11),A(T1(16,5,0)),h(7),A(T1(23,7,c.computeTotal())),h(3),N("disabled",c.cartQuery.isSuccess()&&c.cartQuery.data().products.length===0),h(),v3(" ",c.labelCheckout," "))},dependencies:[U,m2,W1]})}return s})();var vs=()=>["far","circle-check"];function Ss(s,t){s&1&&(f(0,"div",0),g(1,"fa-icon",2),f(2,"div",3),d(3,"Thanks for your order"),m(),f(4,"div"),d(5,"You will receive an confirmation email shortly"),m()()),s&2&&(h(),N("icon",s1(1,vs)))}function ys(s,t){s&1&&(f(0,"div",1)(1,"div",3),d(2,"Invalid cart session"),m(),f(3,"div"),d(4,"Please try again"),m()())}var e7=(()=>{class s{sessionId=i2("session_id");cartService=r(N2);isValidAccess=!0;constructor(){m6(()=>this.verifySession())}verifySession(){this.cartService.getSessionId()!==this.sessionId()?this.isValidAccess=!1:(this.cartService.deleteSessionId(),this.cartService.clearCart())}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-cart-success"]],standalone:!0,features:[_],decls:2,vars:1,consts:[[1,"flex","flex-col","items-center","justify-center","mt-20"],[1,"flex","flex-col","items-center","justify-center"],["size","5x",1,"text-green-600",3,"icon"],[1,"font-bold","text-2xl"]],template:function(e,c){e&1&&V(0,Ss,6,2,"div",0)(1,ys,5,0,"div",1),e&2&&q(c.isValidAccess?0:1)},dependencies:[U,p1]})}return s})();var E4=(()=>{class s{http=r(j1);getOrdersForConnectedUser(n){let e=y3(n);return this.http.get(`${J.apiUrl}/orders/user`,{params:e})}getOrdersForAdmin(n){let e=y3(n);return this.http.get(`${J.apiUrl}/orders/admin`,{params:e})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var bs=(s,t)=>t.publicId,xs=()=>["fas","circle-exclamation"];function Ns(s,t){if(s&1&&(f(0,"tr",10)(1,"th"),d(2),m(),f(3,"td"),d(4),m(),f(5,"td"),d(6),m(),f(7,"td"),d(8),m(),f(9,"td"),d(10),H1(11,"currency"),m()()),s&2){let n=t.$implicit,e=t.$index,c=P(2);h(2),A(e),h(2),A(c.computeItemsName(n.orderedItems)),h(2),A(n.status),h(2),A(c.computeItemsQuantity(n.orderedItems)),h(2),A(T1(11,5,c.computeTotal(n.orderedItems)))}}function ws(s,t){if(s&1&&(f(0,"div",3)(1,"table",7)(2,"thead",8)(3,"tr",8),g(4,"th"),f(5,"th"),d(6,"Products"),m(),f(7,"th"),d(8,"Status"),m(),f(9,"th"),d(10,"Nb of items"),m(),f(11,"th"),d(12,"Total amount"),m()()(),f(13,"tbody",9),X(14,Ns,12,7,"tr",10,bs),m()()()),s&2){let n=P();h(14),Y(n.ordersQuery.data().content)}}function ks(s,t){s&1&&(f(0,"div",4),g(1,"span",11),m())}function As(s,t){s&1&&(f(0,"div",5),g(1,"fa-icon",12),f(2,"span"),d(3,"No order created yet."),m()()),s&2&&(h(),N("icon",s1(1,xs)))}function Es(s,t){s&1&&(f(0,"div",6)(1,"span"),d(2,"Error! Failed to load orders!"),m()())}var c7=(()=>{class s{orderService=r(E4);pageRequest={page:0,size:20,sort:[]};platformId=r(a1);ordersQuery=l1(()=>({queryKey:["user-orders",this.pageRequest],queryFn:()=>$(this.orderService.getOrdersForConnectedUser(this.pageRequest))}));computeItemsName(n){return n.map(e=>e.name).join(", ")}computeItemsQuantity(n){return n.reduce((e,c)=>e+c.quantity,0)}computeTotal(n){return n.reduce((e,c)=>e+c.price*c.quantity,0)}checkIfPlatformBrowser(){return j(this.platformId)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-user-orders"]],standalone:!0,features:[_],decls:11,vars:1,consts:[[1,"w-full","flex","justify-between","items-center"],[1,"text-2xl","font-bold"],[1,"border-t","w-full","border-solid","border-gray-300","mt-2","mb-5"],[1,"overflow-x-auto","border","border-gray-300","rounded-md"],[1,"flex","w-full","justify-center"],[1,"alert","alert-info"],[1,"alert","alert-error"],[1,"table","table-lg","table-zebra"],[1,"border-gray-300"],[1,"border-0"],[1,"border-t-1","border-gray-300"],[1,"loading","loading-spinner","loading-lg"],["size","2x",3,"icon"]],template:function(e,c){if(e&1&&(f(0,"div",0)(1,"div")(2,"h1",1),d(3,"Your orders"),m(),f(4,"div"),d(5,"Here's the list of your orders"),m()()(),g(6,"div",2),V(7,ws,16,0,"div",3)(8,ks,2,0,"div",4)(9,As,4,2,"div",5)(10,Es,3,0,"div",6)),e&2){let i;h(7),q(c.ordersQuery.isSuccess()&&c.ordersQuery.data().numberOfElements!==0?7:c.ordersQuery.isPending()?8:((i=c.ordersQuery.data())==null?null:i.numberOfElements)===0?9:c.ordersQuery.isError()&&c.checkIfPlatformBrowser()?10:-1)}},dependencies:[U,m2,p1]})}return s})();var Is=(s,t)=>t.publicId,Vs=()=>["fas","circle-exclamation"];function Ps(s,t){if(s&1&&(f(0,"tr",10)(1,"th"),d(2),m(),f(3,"td"),d(4),m(),f(5,"td"),d(6),m(),f(7,"td"),d(8),m(),f(9,"td"),d(10),m(),f(11,"td"),d(12),m(),f(13,"td"),d(14),H1(15,"currency"),m()()),s&2){let n=t.$implicit,e=t.$index,c=P(2);h(2),A(e),h(2),A(c.computeItemsName(n.orderedItems)),h(2),A(n.email),h(2),A(n.address),h(2),A(n.status),h(2),A(c.computeItemsQuantity(n.orderedItems)),h(2),A(T1(15,7,c.computeTotal(n.orderedItems)))}}function Ds(s,t){if(s&1&&(f(0,"div",3)(1,"table",7)(2,"thead",8)(3,"tr",8),g(4,"th"),f(5,"th"),d(6,"Products"),m(),f(7,"th"),d(8,"Email"),m(),f(9,"th"),d(10,"Address"),m(),f(11,"th"),d(12,"Status"),m(),f(13,"th"),d(14,"Nb of items"),m(),f(15,"th"),d(16,"Total amount"),m()()(),f(17,"tbody",9),X(18,Ps,16,9,"tr",10,Is),m()()()),s&2){let n=P();h(18),Y(n.ordersAdminQuery.data().content)}}function Fs(s,t){s&1&&(f(0,"div",4),g(1,"span",11),m())}function Hs(s,t){s&1&&(f(0,"div",5),g(1,"fa-icon",12),f(2,"span"),d(3,"No order created yet."),m()()),s&2&&(h(),N("icon",s1(1,Vs)))}function Ts(s,t){s&1&&(f(0,"div",6)(1,"span"),d(2,"Error! Failed to load orders!"),m()())}var t7=(()=>{class s{orderService=r(E4);pageRequest={page:0,size:20,sort:[]};platformId=r(a1);ordersAdminQuery=l1(()=>({queryKey:["admin-orders",this.pageRequest],queryFn:()=>$(this.orderService.getOrdersForAdmin(this.pageRequest))}));computeItemsName(n){return n.map(e=>e.name).join(", ")}computeItemsQuantity(n){return n.reduce((e,c)=>e+c.quantity,0)}computeTotal(n){return n.reduce((e,c)=>e+c.price*c.quantity,0)}checkIfPlatformBrowser(){return j(this.platformId)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-admin-orders"]],standalone:!0,features:[_],decls:11,vars:1,consts:[[1,"w-full","flex","justify-between","items-center"],[1,"text-2xl","font-bold"],[1,"border-t","w-full","border-solid","border-gray-300","mt-2","mb-5"],[1,"overflow-x-auto","border","border-gray-300","rounded-md"],[1,"flex","w-full","justify-center"],[1,"alert","alert-info"],[1,"alert","alert-error"],[1,"table","table-lg","table-zebra"],[1,"border-gray-300"],[1,"border-0"],[1,"border-t-1","border-gray-300"],[1,"loading","loading-spinner","loading-lg"],["size","2x",3,"icon"]],template:function(e,c){if(e&1&&(f(0,"div",0)(1,"div")(2,"h1",1),d(3,"Your orders"),m(),f(4,"div"),d(5,"Here's the list of your orders"),m()()(),g(6,"div",2),V(7,Ds,20,0,"div",3)(8,Fs,2,0,"div",4)(9,Hs,4,2,"div",5)(10,Ts,3,0,"div",6)),e&2){let i;h(7),q(c.ordersAdminQuery.isSuccess()&&c.ordersAdminQuery.data().numberOfElements!==0?7:c.ordersAdminQuery.isPending()?8:((i=c.ordersAdminQuery.data())==null?null:i.numberOfElements)===0?9:c.ordersAdminQuery.isError()&&c.checkIfPlatformBrowser()?10:-1)}},dependencies:[U,m2,p1]})}return s})();var s7=[{path:"admin/categories/list",component:B8,canActivate:[g3],data:{authorities:["ROLE_ADMIN"]}},{path:"admin/categories/create",component:y5,canActivate:[g3],data:{authorities:["ROLE_ADMIN"]}},{path:"admin/products/create",component:W5,canActivate:[g3],data:{authorities:["ROLE_ADMIN"]}},{path:"admin/products/list",component:G5,canActivate:[g3],data:{authorities:["ROLE_ADMIN"]}},{path:"admin/orders/list",component:t7,canActivate:[g3],data:{authorities:["ROLE_ADMIN"]}},{path:"",component:$5},{path:"product/:publicId",component:Q5},{path:"products",component:K5},{path:"cart",component:J5},{path:"cart/success",component:e7},{path:"users/orders",component:c7}];var n7=(()=>{class s{platformId=r(a1);clear(){j(this.platformId)&&sessionStorage.clear()}read(n){return j(this.platformId)?sessionStorage.getItem(n):null}remove(n){j(this.platformId)&&sessionStorage.removeItem(n)}write(n,e){j(this.platformId)&&sessionStorage.setItem(n,e)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var i7={providers:[E6(),v6({eventCoalescing:!0}),V6(s7,P6()),H4(w6(),N6([B5()])),V5({config:{authority:J.kinde.authority,redirectUrl:J.kinde.redirectUrl,postLogoutRedirectUri:J.kinde.postLogoutRedirectUri,clientId:J.kinde.clientId,scope:"openid profile email offline",responseType:"code",silentRenew:!0,useRefreshToken:!0,logLevel:U2.Warn,secureRoutes:[J.apiUrl],customParamsAuthRequest:{audience:J.kinde.audience}}}),{provide:S4,useClass:n7},H6(new F6),Y5(J.stripePublishableKey)]};var l7={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]};var X0={prefix:"fas",iconName:"cart-shopping",icon:[576,512,[128722,"shopping-cart"],"f07a","M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},a7=X0;var r7={prefix:"fas",iconName:"truck-fast",icon:[640,512,["shipping-fast"],"f48b","M112 0C85.5 0 64 21.5 64 48l0 48L16 96c-8.8 0-16 7.2-16 16s7.2 16 16 16l48 0 208 0c8.8 0 16 7.2 16 16s-7.2 16-16 16L64 160l-16 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l16 0 176 0c8.8 0 16 7.2 16 16s-7.2 16-16 16L64 224l-48 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l48 0 144 0c8.8 0 16 7.2 16 16s-7.2 16-16 16L64 288l0 128c0 53 43 96 96 96s96-43 96-96l128 0c0 53 43 96 96 96s96-43 96-96l32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64 0-32 0-18.7c0-17-6.7-33.3-18.7-45.3L512 114.7c-12-12-28.3-18.7-45.3-18.7L416 96l0-48c0-26.5-21.5-48-48-48L112 0zM544 237.3l0 18.7-128 0 0-96 50.7 0L544 237.3zM160 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96zm272 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0z"]};var o7={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]};var f7={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};var m7={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"]};var u7={prefix:"fab",iconName:"youtube",icon:[576,512,[61802],"f167","M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"]};var d7={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};var p7={prefix:"far",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L369 209z"]};var h7=[l7,X0,r7,u7,m7,d7,o7,f7,a7,p7];function I4(s,t,n){!t&&F1(s);let e=t??r(Z2);return n?Q2(e,n):e}function z7(s){return function(e={}){var c=e,{injector:t}=c,n=J0(c,["injector"]);return t=I4(this,t),Q2(t,()=>r(s,n))}}function C7(s,t,n={}){let{deps:e=[],multi:c=!1,extraProviders:i=[],isFunctionValue:l=!1}=n;return(a,o=l)=>{let u;return typeof a<"u"?u={provide:s,useFactory:typeof a=="function"?o?()=>a:a:()=>a,multi:c}:u={provide:s,useFactory:t,deps:e,multi:c},[i,u]}}function L7(s,t){let n=s.name||s.toString(),e=t??{isRoot:!0};if(e.isRoot??=!0,e.multi&&(e.isRoot=!1),e.isRoot){if(e.token)throw new Error(`createInjectionToken is creating a root InjectionToken but an external token is passed in.
`);let i=new u1(`Token for ${n}`,{factory:()=>e.deps&&Array.isArray(e.deps)?s(...e.deps.map(a=>(a=Array.isArray(a)?a.at(-1):a,r(a)))):s()}),l=z7(i);return[l,C7(i,s,e),i,()=>({provide:l6,useValue:()=>l(),multi:!0})]}let c=e.token||new u1(`Token for ${n}`);return[z7(c),C7(c,s,e),c,()=>[]]}var Y0=s=>(s=I4(Y0,s),Q2(s,()=>{let t=r(D2),n=new W2(1);return t.onDestroy(()=>{n.next(),n.complete()}),Object.assign(n,{onDestroy:t.onDestroy.bind(t)}),n}));var[Rs]=L7(()=>{let s=new l2,[t,n]=[r(K2),r(C1)];return t.runOutsideAngular(()=>{t6(n,"click").subscribe(s)}),s}),M7=(()=>{let t=class t{constructor(){this.ngZone=r(K2),this.elementRef=r(O1),this.documentClick$=Rs(),this.destroy$=Y0(),this.clickOutside=new Y1}ngOnInit(){this.documentClick$.pipe(Z3(this.destroy$),E1(e=>!this.elementRef.nativeElement.contains(e.target))).subscribe(e=>{this.ngZone.run(()=>this.clickOutside.emit(e))})}};t.\u0275fac=function(c){return new(c||t)},t.\u0275dir=Z({type:t,selectors:[["","clickOutside",""]],outputs:{clickOutside:"clickOutside"},standalone:!0});let s=t;return s})();var _s=(s,t)=>t.publicId,Os=()=>["fas","cart-shopping"],qs=()=>["products"],Us=s=>({category:s}),Bs=()=>["fas","user"];function js(s,t){if(s&1){let n=N1();f(0,"li")(1,"a",20),T("click",function(){c1(n);let c=P(2),i=J1(13);return t1(c.closeMenu(i))})("clickOutside",function(){c1(n);let c=P(2),i=J1(13);return t1(c.closeMenu(i))}),d(2),m()()}if(s&2){let n=t.$implicit;h(),N("routerLink",s1(3,qs))("queryParams",B1(4,Us,n.publicId)),h(),A(n.name)}}function Ws(s,t){if(s&1&&X(0,js,3,6,"li",null,_s),s&2){let n=P();Y(n.categoryQuery.data().content)}}function Gs(s,t){if(s&1){let n=N1();f(0,"li")(1,"details",null,1)(3,"summary"),d(4,"Admin"),m(),f(5,"ul",10)(6,"li")(7,"a",21),T("click",function(){c1(n);let c=J1(2),i=P();return t1(i.closeMenu(c))})("clickOutside",function(){c1(n);let c=J1(2),i=P();return t1(i.closeMenu(c))}),d(8,"Categories"),m()(),f(9,"li")(10,"a",22),T("click",function(){c1(n);let c=J1(2),i=P();return t1(i.closeMenu(c))})("clickOutside",function(){c1(n);let c=J1(2),i=P();return t1(i.closeMenu(c))}),d(11,"Products"),m()(),f(12,"li")(13,"a",23),T("click",function(){c1(n);let c=J1(2),i=P();return t1(i.closeMenu(c))})("clickOutside",function(){c1(n);let c=J1(2),i=P();return t1(i.closeMenu(c))}),d(14,"Orders"),m()()()()()}}function $s(s,t){if(s&1&&(f(0,"div",14),g(1,"img",24),m()),s&2){let n,e=P();h(),q1("src",e.connectedUserQuery==null||(n=e.connectedUserQuery.data())==null?null:n.imageUrl,X2)}}function Qs(s,t){s&1&&g(0,"fa-icon",15),s&2&&N("icon",s1(1,Bs))}function Zs(s,t){if(s&1){let n=N1();f(0,"ul",16)(1,"li")(2,"button",25),T("click",function(){c1(n);let c=P();return t1(c.closeDropDownMenu())}),d(3,"My Orders"),m()(),f(4,"li")(5,"button",26),T("click",function(){c1(n);let c=P();return t1(c.logout())}),d(6,"Logout"),m()()()}}function Ks(s,t){if(s&1){let n=N1();f(0,"ul",16)(1,"li")(2,"button",26),T("click",function(){c1(n);let c=P();return t1(c.login())}),d(3,"Login"),m()()()}}var g7=(()=>{class s{oauth2Service=r(x2);productService=r(e3);cartService=r(N2);nbItemsInCart=0;connectedUserQuery=this.oauth2Service.connectedUserQuery;categoryQuery=l1(()=>({queryKey:["categories"],queryFn:()=>$(this.productService.findAllCategories())}));login(){this.closeDropDownMenu(),this.oauth2Service.login()}logout(){this.closeDropDownMenu(),this.oauth2Service.logout()}isConnected(){return this.connectedUserQuery?.status()==="success"&&this.connectedUserQuery?.data()?.email!==this.oauth2Service.notConnected}closeDropDownMenu(){let n=document.activeElement;n&&n.blur()}closeMenu(n){n.removeAttribute("open")}ngOnInit(){this.listenToCart()}listenToCart(){this.cartService.addedToCart.subscribe(n=>{this.nbItemsInCart=n.reduce((e,c)=>e+c.quantity,0)})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-navbar"]],standalone:!0,features:[_],decls:32,vars:7,consts:[["productsMenu",""],["adminMenu",""],[1,"navbar","bg-base-100"],[1,"navbar-start"],[1,"dropdown"],[1,"btn","btn-ghost","text-xl"],["routerLink","/",1,"border-1","bg-secondary","logo","p-2","rounded-xl"],[1,"navbar-center","flex"],[1,"menu","menu-sm","sm:menu-lg","menu-horizontal","px-1"],["href","/"],[1,"z-30"],[1,"navbar-end","pe-4","flex","align-items-center"],[1,"dropdown","dropdown-end","pe-4"],["tabindex","0","role","button"],[1,"border","border-solid","rounded-full"],[1,"menu-icon",3,"icon"],[1,"dropdown-content","menu","menu-lg","bg-base-100","rounded-box","z-10","w-52","p-2","shadow"],["routerLink","/cart",1,"dropdown","dropdown-end","me-2"],[1,"indicator"],[1,"indicator-item","badge","badge-primary"],[3,"click","clickOutside","routerLink","queryParams"],["routerLink","admin/categories/list",3,"click","clickOutside"],["routerLink","admin/products/list",3,"click","clickOutside"],["routerLink","admin/orders/list",3,"click","clickOutside"],["alt","user-avatar","width","45px",1,"avatar-unknown","rounded-full",3,"src"],["routerLink","/users/orders",1,"link",3,"click"],[1,"link",3,"click"]],template:function(e,c){if(e&1&&(f(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5)(4,"div",6),d(5,"EC"),m()()()(),f(6,"div",7)(7,"div",8)(8,"li")(9,"a",9),d(10,"Home"),m()(),f(11,"li")(12,"details",null,0)(14,"summary"),d(15,"Products"),m(),f(16,"ul",10),V(17,Ws,2,0),m()()(),V(18,Gs,15,0,"li"),m()(),f(19,"div",11)(20,"div",12)(21,"div",13),V(22,$s,2,1,"div",14)(23,Qs,1,2,"fa-icon",15),m(),V(24,Zs,7,0,"ul",16)(25,Ks,4,0,"ul",16),m(),f(26,"div",17)(27,"div",13)(28,"div",18)(29,"span",19),d(30),m(),g(31,"fa-icon",15),m()()()()()),e&2){let i;h(17),q(c.categoryQuery.isSuccess()&&c.categoryQuery.data()?17:-1),h(),q((c.connectedUserQuery==null?null:c.connectedUserQuery.status())==="success"&&c.oauth2Service.hasAnyAuthorities(c.connectedUserQuery==null?null:c.connectedUserQuery.data(),"ROLE_ADMIN")?18:-1),h(4),q(c.isConnected()&&(c.connectedUserQuery==null||(i=c.connectedUserQuery.data())==null?null:i.imageUrl)!==null?22:23),h(2),q(c.isConnected()?24:25),h(6),A(c.nbItemsInCart),h(),N("icon",s1(6,Os))}},dependencies:[U,W1,p1,M7],styles:[".menu-icon[_ngcontent-%COMP%]{font-size:1.8rem}"]})}return s})();var Xs=()=>["fas","truck-fast"],Ys=()=>["fab","twitter"],Js=()=>["fab","youtube"],en=()=>["fab","facebook"],v7=(()=>{class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-footer"]],standalone:!0,features:[_],decls:47,vars:8,consts:[[1,"footer","bg-secondary","border-2","border-t","text-base-content","p-10"],[1,"footer-title"],["href","#",1,"link","link-hover"],[1,"footer","bg-secondary","text-base-content","px-10","py-4"],[1,"grid-flow-col","items-center"],["size","3x",1,"pe-3",3,"icon"],[1,"md:place-self-center","md:justify-self-end"],[1,"grid","grid-flow-col","gap-4"],["href","#","aria-label","Twitter shop"],["size","2x",3,"icon"],["href","#","aria-label","Youtube shop"],["href","#","aria-label","Facebook shop"]],template:function(e,c){e&1&&(f(0,"footer",0)(1,"nav")(2,"h6",1),d(3,"Help"),m(),f(4,"a",2),d(5,"Shipping"),m(),f(6,"a",2),d(7,"Returns + Exchanges"),m(),f(8,"a",2),d(9,"FAQ"),m(),f(10,"a",2),d(11,"Compare"),m()(),f(12,"nav")(13,"h6",1),d(14,"Company"),m(),f(15,"a",2),d(16,"About us"),m(),f(17,"a",2),d(18,"Contact"),m(),f(19,"a",2),d(20,"Jobs"),m(),f(21,"a",2),d(22,"Press kit"),m()(),f(23,"nav")(24,"h6",1),d(25,"Legal"),m(),f(26,"a",2),d(27,"Terms of use"),m(),f(28,"a",2),d(29,"Privacy policy"),m(),f(30,"a",2),d(31,"Cookie policy"),m()()(),f(32,"footer",3)(33,"aside",4),g(34,"fa-icon",5),f(35,"p"),d(36," CodeCake Ltd. "),g(37,"br"),d(38," Providing Ecommerce solutions "),m()(),f(39,"nav",6)(40,"div",7)(41,"a",8),g(42,"fa-icon",9),m(),f(43,"a",10),g(44,"fa-icon",9),m(),f(45,"a",11),g(46,"fa-icon",9),m()()()()),e&2&&(h(34),N("icon",s1(4,Xs)),h(8),N("icon",s1(5,Ys)),h(2),N("icon",s1(6,Js)),h(2),N("icon",s1(7,en)))},dependencies:[U,p1]})}return s})();var cn=(s,t)=>({"alert-error":s,"alert-success":t}),tn=()=>["fas","xmark"],sn=()=>["fas","check"];function nn(s,t){s&1&&g(0,"fa-icon",5),s&2&&N("icon",s1(1,tn))}function ln(s,t){s&1&&g(0,"fa-icon",5),s&2&&N("icon",s1(1,sn))}function an(s,t){if(s&1&&(f(0,"div",1),V(1,nn,1,2,"fa-icon",5)(2,ln,1,2,"fa-icon",5),f(3,"div"),d(4),m()()),s&2){let n=t.$implicit;N("ngClass",M6(4,cn,n.type==="ERROR",n.type==="SUCCESS")),h(),q(n.type==="ERROR"?1:-1),h(),q(n.type==="SUCCESS"?2:-1),h(2),A(n.body)}}var S7=(()=>{class s{faIconLibrary=r(z0);faConfig=r(h0);oauth2Service=r(x2);toastService=r(M1);platformId=r(a1);constructor(){j(this.platformId)&&this.oauth2Service.initAuthentication(),this.oauth2Service.connectedUserQuery=this.oauth2Service.fetch()}ngOnInit(){this.initFontAwesome()}initFontAwesome(){this.faConfig.defaultPrefix="far",this.faIconLibrary.addIcons(...h7)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=R({type:s,selectors:[["ecom-root"]],standalone:!0,features:[_],decls:9,vars:0,consts:[["role","alert",1,"absolute","z-30","top-0","right-0","me-4"],["role","alert",1,"alert","my-4","flex","justify-start","items-center",3,"ngClass"],[1,"flex","flex-col","min-h-screen"],[1,"container","mx-auto","py-7","grow","h-full"],[1,"mx-5"],["size","2x",1,"mt-1",3,"icon"]],template:function(e,c){e&1&&(f(0,"div",0),X(1,an,5,7,"div",1,Y2),m(),f(3,"div",2),g(4,"ecom-navbar"),f(5,"div",3)(6,"div",4),g(7,"router-outlet"),m()(),g(8,"ecom-footer"),m()),e&2&&(h(),Y(c.toastService.toasts))},dependencies:[D6,I6,p1,g7,v7,S6]})}return s})();k6(S7,i7).catch(s=>console.error(s));
